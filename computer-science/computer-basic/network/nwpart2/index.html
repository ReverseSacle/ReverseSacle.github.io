<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content=#222><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=icon type=image/ico sizes=48x48 href=/images/favicon.ico><link rel=alternate type=application/rss+xml title=逆转天平 href=https://www.reversesacle.com/rss.xml><link rel=alternate type=application/atom+xml title=逆转天平 href=https://www.reversesacle.com/atom.xml><link rel=alternate type=application/json title=逆转天平 href=https://www.reversesacle.com/feed.json><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel=stylesheet href=/css/app.css><meta name=description content=计算机基础><link rel=canonical href=https://www.reversesacle.com/computer-science/computer-basic/network/nwpart2/ ><title>计算机网络-第二部分 - 计算机网络 - 计算机基础 - 计算机科学 | ReverseSacle-Blog</title><meta name=generator content="Hexo 6.3.0"></head><body itemscope itemtype=http://schema.org/WebPage><div id=loading><div class=dotloader><div class=dot></div><div class=dot></div><div class=dot></div><div class=dot></div><div class=dot></div></div></div><div id=container><header id=header itemscope itemtype=http://schema.org/WPHeader><div class=inner><div id=brand><div class=pjax><h1 itemprop="name headline">计算机网络-第二部分</h1><div class=meta><span class=item title="创建时间：2023-07-26 20:35:04"><span class=icon><i class="ic i-calendar"></i></span> <span class=text>发表于</span> <time itemprop="dateCreated datePublished" datetime=2023-07-26T20:35:04+08:00>2023-07-26</time></span><span class=item title=本文字数><span class=icon><i class="ic i-pen"></i></span> <span class=text>本文字数</span> <span>20k</span> <span class=text>字</span></span><span class=item title=阅读时长><span class=icon><i class="ic i-clock"></i></span> <span class=text>阅读时长</span> <span>23 分钟</span></span></div></div></div><nav id=nav><div class=inner><div class=toggle><div class=lines role=navigation aria-label=切换导航栏><span class=line></span><span class=line></span><span class=line></span></div></div><ul class=menu><li class="item title"><a href=/ rel=start>ReverseSacle-Blog</a></li></ul><ul class=right><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id=imgs class=pjax><ul><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg15.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg20.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg13.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg11.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg17.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg10.webp></li></ul></div></header><div id=waves><svg class=waves xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewBox="0 24 150 28" preserveAspectRatio=none shape-rendering=auto><defs><path id=gentle-wave d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352z"/></defs><g class=parallax><use xlink:href=#gentle-wave x=48 y=0 /><use xlink:href=#gentle-wave x=48 y=3 /><use xlink:href=#gentle-wave x=48 y=5 /><use xlink:href=#gentle-wave x=48 y=7 /></g></svg></div><main><div class=inner><div id=main class=pjax><div class="article wrap"><div class=breadcrumb itemscope itemtype=https://schema.org/BreadcrumbList><i class="ic i-home"></i> <span><a href=/ >首页</a></span><i class="ic i-angle-right"></i> <span itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/ itemprop=item rel=index title="分类于 计算机科学"><span itemprop=name>计算机科学</span></a><meta itemprop=position content=1></span><i class="ic i-angle-right"></i> <span itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/computer-basic/ itemprop=item rel=index title="分类于 计算机基础"><span itemprop=name>计算机基础</span></a><meta itemprop=position content=2></span><i class="ic i-angle-right"></i> <span class=current itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/computer-basic/computer-network/ itemprop=item rel=index title="分类于 计算机网络"><span itemprop=name>计算机网络</span></a><meta itemprop=position content=3></span></div><article itemscope itemtype=http://schema.org/Article class="post block" lang=zh-CN><link itemprop=mainEntityOfPage href=https://www.reversesacle.com/computer-science/computer-basic/network/nwpart2/ ><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content=/images/avatar.webp><meta itemprop=name content=ReverseSacle><meta itemprop=description content="所见即所得，所思即所行, 知识书库 & 学习点滴"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content=逆转天平></span><div class="body md" itemprop=articleBody><h2 id=物理层><a class=anchor href=#物理层>#</a> 物理层</h2><h3 id=概述><a class=anchor href=#概述>#</a> ! 概述</h3><p>物理层的作用是尽可能屏蔽掉具体传输介质和物理设备的差异，实现相邻计算机节点之间比特流的透明传送。</p><ul><li>物理层需考虑 - 怎样在各连接的计算机传输媒体上传输数据比特流</li><li>物理层为数据链路层屏蔽了各传输媒体的差异</li><li>数据链路层需考虑 - 如何完成本层的协议和服务，不必考虑传输媒体</li></ul><h3 id=传输媒体><a class=anchor href=#传输媒体>#</a> 传输媒体</h3><p><strong>导引型传输媒体</strong> - 电磁波被导引沿着固体媒体传播</p><ul><li><p>同轴电缆 - 绝缘保护套层↔屏蔽层↔绝缘层↔内导体 - 横切面各层是同轴心的(名称由来)</p><ul><li>基带同轴电缆(50Ω) - 数字传输，过去用于局域网</li><li>宽带同轴电缆(75Ω) - 模拟传输，目前主要用于有线电视</li></ul></li><li><p>双绞线 - 把两根互相绝缘的铜导线并排放一起再按一定规则绞合</p><ul><li>无屏蔽线双绞线UTP电缆</li><li>屏蔽双绞线STP电缆</li><li>绞合的作用 - 抵御部分来自外界的电磁波干扰和减少相邻导线的电磁干扰</li></ul></li><li><p>光纤</p><ul><li>室外四芯光缆</li><li>光纤的优点 - 通信容量大，传输损耗小，抗雷电和电磁干扰性能好，无串音干扰，保密性好，不易被窃听，体积小，重量轻</li></ul></li><li><p>电力线</p><ul><li>电力线电话</li></ul></li></ul><p><strong>非导引型传输媒体</strong></p><ul><li>无线电波</li><li>微波</li><li>红外线</li><li>可见光</li></ul><h3 id=物理层协议主要任务><a class=anchor href=#物理层协议主要任务>#</a> 物理层协议主要任务</h3><ul><li>机械特性 - 指明接口所用接线器的形状和尺寸，引脚数目和排列，固定和锁定装置</li><li>电气特性 - 指明在接口电缆的各条线上出现的电压的范围</li><li>功能特性 - 指明某条线上出现的某一电平的电压表示什么意义</li><li>过程特性 - 指明对于不同功能的各种可能事件的出现顺序</li></ul><h3 id=传输方式><a class=anchor href=#传输方式>#</a> ! 传输方式</h3><ul><li><strong>串行传输</strong> - 一个比特一个比特依次发送，需一条数据传输线路</li><li><strong>并行传输</strong> - 一次发送N个比特，需N条传输线路</li><li><strong>同步传输</strong><ul><li>数据块以稳定的比特流的形式传输，字节之间没有间隔</li><li>接收方在每个比特的中间时刻进行检测</li><li>当双方设备的时钟频率有差异，会导致接收方判别错位，需保持收发双方的时钟保持同步(外同步和内同步)</li></ul></li><li><strong>异步传输</strong><ul><li>以字节为独立的传输单位，字节之间的时间间隔不固定</li><li>每个字节前后分别加上起始位和结束位</li><li>异步 - 字节之间异步(字节之间的时间间隔不固定)</li><li>字节中的每个比特仍然同步(各比特的持续时间是相同的)</li></ul></li><li><strong>单工(单向通信)</strong> - 通信双方只有一个数据传输方向(如无线电广播)，需一条信道</li><li><strong>半双工(双向交替通信)</strong> - 通信双方可以相互传输数据，但不能同时进行(如对讲机)，需两条信道(各方向一条)</li><li><strong>全双工(双向同时通信)</strong> - 通信双方可以同时发送和接收信息(如电话)，需两条信道(各方向一条)</li></ul><h3 id=编码与调制><a class=anchor href=#编码与调制>#</a> 编码与调制</h3><p>消息(message) → 数据(data) → 信号(signal)</p><ul><li>消息 - 文字/图片/音频/视频</li><li>数据 - 运送消息的实体</li><li>信号 - 数据的电磁表现<ul><li>数字基带信号 - CPU与内存之间传输信息的信号</li><li>模拟基带信号 - 麦克风产生的音频信号</li></ul></li><li>信道- 信号需要在信道中传输<ul><li>数字信道</li><li>模拟信道</li></ul></li></ul><p><strong>数字基带信号的处理</strong></p><ul><li><strong>编码</strong> - 对数字基带信号的波形进行变换，产生的信号还是数字信号<ul><li>以太网 - 曼彻斯特编码</li></ul></li><li><strong>调制</strong> - 把数字基带信号的频率范围搬移到较高的频段，产生的信号是模拟信号<ul><li>WIFI使用的</li><li>CCK调制 - 补码键控</li><li>DSSS调制 - 直接序列扩频</li><li>OFDM调制 - 正交频分复用</li></ul></li></ul><p><strong>模拟基带信号的处理</strong></p><ul><li>编码<ul><li>PCM - 对音频信号进行编码的脉码调制</li></ul></li><li>调制<ul><li>将语音数据加载到模拟的载波信号中传输(传统电话)</li><li>FDM技术 - 频分复用</li></ul></li></ul><p><strong>码元</strong></p><ul><li>码元定义 - 在使用时间域的波形表示数字信号时，代表不同离散数值的基本波形</li><li>简单定义 - 构成信号的一段波形</li></ul><p><strong>常用编码</strong></p><ul><li>不归零编码 - 需要额外一根传输线传输时钟信号，存在同步问题</li><li>归零编码 - 每个码元传输结束后都要归零，自同步(把时钟信号归零方式编码在数据内)</li><li>曼彻斯特编码 - 通过码元中间时刻的跳变即表示时钟又表示数据</li><li>差分曼彻斯特编码 - 跳变仅表示时钟，码元开始处的电平是否发生变换表示数据</li></ul><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/22.webp alt=""></p><p><strong>基本调制方法(二元调制)</strong></p><ul><li>调幅(AM) - 无载波输出表示比特0，有载波输出表示比特1</li><li>调频(FM) - 频率f1波形表示比特0，频率f2波形表示比特1</li><li>调相(PM) - 初相位0度表示比特0，初相位180度表示比特1</li><li>使用基本调制方法，1个码元只能包含1个比特信息</li></ul><p><strong>混合调制方法(多元调制)</strong></p><ul><li>频率和相位<ul><li>频率和相位是相关的(频率是相位时间的变化率)</li><li>一次只能调制频率和相位其中一个</li></ul></li><li>相位和振幅<ul><li>QAM - 正交振幅调制(相位和振幅可结合起来一起调制)</li></ul></li><li>QAM-16<ul><li>12种相位，每种相位有1或2种振幅可选</li><li>可调制出16种码元(波形)，每种码元可对应表示4比特</li><li>码元与4个比特的对应关系采用格雷码(任意两个相邻码只有1个比特不同)</li></ul></li></ul><h3 id=信道的极限容量><a class=anchor href=#信道的极限容量>#</a> 信道的极限容量</h3><ul><li><p>码间串扰 - 信号波形失去了码元之间的清晰界限</p></li><li><p>产生失真的原因</p><ul><li><p>码元传输速率</p></li><li><p>信号传输距离</p></li><li><p>噪声干扰</p></li><li><p>传输媒体质量</p></li></ul></li></ul><h4 id=奈氏准则><a class=anchor href=#奈氏准则>#</a> 奈氏准则</h4><ul><li>在假定的理想条件下，为了避免码间串扰，码元传输速率是有上限的</li><li>理想低通道的最高码元传输速率 = 2W Baud</li><li>理想带通道的最高码元传输速率 = 1W Baud</li><li>W - 信道带宽(单位Hz)</li><li>Baud - 码元/s(波特)</li><li>码元传输速率又称波特率，调制速率，波形速率或符号速率</li><li>码元与比特率的关系<ul><li>当1个码元只携带1比特的信息量时，波特率与比特率在数值上是相等的</li><li>当1个码元只携带N比特的信息量时，波特率转换成比特率时数值要乘以N</li></ul></li><li>要提高信息传输速率(比特率)，需要使每一个码元能携带更多个比特的信息量，需采用多元制</li><li>实际信道传输的最高码元速率，明显低于奈氏准则给出的上限数值<ul><li>信道的极限信息传输速率还要受限于实际的信号在信道种传输时的信噪比</li></ul></li></ul><h4 id=香农公式><a class=anchor href=#香农公式>#</a> 香农公式</h4><ul><li><p>带宽受限且有高斯白噪声干扰的信道的极限信息传输速率</p></li><li><p>公式 - C = [W x<span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mrow><mo stretchy=false>(</mo><mn>1</mn><mo>+</mo><mfrac><mi>S</mi><mi>N</mi></mfrac><mo stretchy=false>)</mo></mrow></mrow><annotation encoding=application/x-tex>\log_2{(1 + \frac{S}{N})}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.217331em;vertical-align:-.345em></span><span class=mop><span class=mop>lo<span style=margin-right:.01389em>g</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.20696799999999996em><span style=top:-2.4558600000000004em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.24414em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mord><span class=mopen>(</span><span class=mord>1</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>+</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord><span class="mopen nulldelimiter"></span><span class=mfrac><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.872331em><span style=top:-2.6550000000000002em><span class=pstrut style=height:3em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:.10903em>N</span></span></span></span><span style=top:-3.23em><span class=pstrut style=height:3em></span><span class=frac-line style=border-bottom-width:.04em></span></span><span style=top:-3.394em><span class=pstrut style=height:3em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:.05764em>S</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.345em><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mclose>)</span></span></span></span></span> ]</p><ul><li>C - 信道的极限信息传输速率 - b/s</li><li>W - 信道带宽 - Hz</li><li>S - 信道内所传信号的平均功率</li><li>N - 信道内的高斯噪声功率</li><li><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mfrac><mi>S</mi><mi>N</mi></mfrac></mrow><annotation encoding=application/x-tex>\frac{S}{N}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.217331em;vertical-align:-.345em></span><span class=mord><span class="mopen nulldelimiter"></span><span class=mfrac><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.872331em><span style=top:-2.6550000000000002em><span class=pstrut style=height:3em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:.10903em>N</span></span></span></span><span style=top:-3.23em><span class=pstrut style=height:3em></span><span class=frac-line style=border-bottom-width:.04em></span></span><span style=top:-3.394em><span class=pstrut style=height:3em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:.05764em>S</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.345em><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> - 信噪比，使用分贝(dB)作为度量单位，dB = 10 x<span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>10</mn></msub><mfrac><mi>S</mi><mi>N</mi></mfrac></mrow><annotation encoding=application/x-tex>\log_{10}{\frac{S}{N}}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.217331em;vertical-align:-.345em></span><span class=mop><span class=mop>lo<span style=margin-right:.01389em>g</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.20696799999999996em><span style=top:-2.4558600000000004em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.24414em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mord><span class=mord><span class="mopen nulldelimiter"></span><span class=mfrac><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.872331em><span style=top:-2.6550000000000002em><span class=pstrut style=height:3em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:.10903em>N</span></span></span></span><span style=top:-3.23em><span class=pstrut style=height:3em></span><span class=frac-line style=border-bottom-width:.04em></span></span><span style=top:-3.394em><span class=pstrut style=height:3em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:.05764em>S</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.345em><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span> (信噪比)</li></ul></li><li><p>信道带宽或信道中信噪比越大，信息的极限传输速率越高</p></li><li><p>在信道带宽一定的条件下，想提高信息的传输速率，必须采用多元制和提高信噪比</p></li></ul><h2 id=数据链路层data-link-layer><a class=anchor href=#数据链路层data-link-layer>#</a> 数据链路层(Data Link Layer)</h2><h3 id=概述-2><a class=anchor href=#概述-2>#</a> ! 概述</h3><p>数据链路层通常简称为链路层(两台主机之间的数据传输，总是在一段一段的链路上传送的)。数据链路层的作用是将网络层交下来的IP数据报组装成帧，在两个相邻节点间的链路上传送帧。每一帧包括数据和必要的控制信息(如同步信息，地址信息，差错控制等)。</p><ul><li>链路(Link) - 从一个结点到相邻结点的一段物理线路，中间没有任何其他结点</li><li>数据链路(Data Link) - 把实现通信协议的硬件和软件加到链路上</li><li>数据链路层以帧为单位进行传输和处理数据</li></ul><h3 id=三个重要问题><a class=anchor href=#三个重要问题>#</a> 三个重要问题</h3><h4 id=点对点信道的数据链路层><a class=anchor href=#点对点信道的数据链路层>#</a> ! 点对点信道的数据链路层</h4><p><strong>封装成帧</strong></p><ul><li>用户发送数据 →</li><li>通过应用层封装成为应用层协议数据单元，交付给运输层 →</li><li>运输层添加运输层协议首部后变为运输层协议数据单元，交付给网络层 →</li><li>网络层添加网络层协议首部后变为网络层协议数据单元，交付给数据链路层 →</li><li>数据链路层添加数据链路层协议首部(帧头)和帧尾(该过程为<strong>封装成帧</strong>)，交付给物理层<ul><li>帧尾 - 基于待发送的数据和检错算法计算出的<strong>检错码</strong></li><li>添加帧头和帧尾目的 - 为了在链路上以帧为单元来传输数据</li></ul></li></ul><p><strong>差错检测</strong></p><ul><li>封装好的帧通过物理层发送到传输媒体，遭遇干扰后可能出现误码</li><li>接收端通过检错码和检测算法判断是否出现误码</li></ul><p><strong>可靠/不可靠传输</strong></p><ul><li><p>当数据链路层向上层提供的是<strong>不可靠服务</strong></p><ul><li>接收方接收到有误码的帧时会将其丢弃，不再采取措施</li></ul></li><li><p>当数据链路层向上层提供的是<strong>可靠服务</strong></p><ul><li>接收方接收到有误码的帧时，会采取额外措施</li><li>可靠传输 - 误码不能完全避免，但能实现发送方发送什么，接收方就能收到什么</li></ul></li></ul><h4 id=广播信道的数据链路层><a class=anchor href=#广播信道的数据链路层>#</a> 广播信道的数据链路层</h4><ul><li>包含点对点信道的数据链路层</li><li>帧头包含目的地址</li></ul><p><strong>共享式局域网</strong></p><ul><li>当总线上多台主机使用总线传输帧时会产生碰撞<ul><li>以太网采用的协调方法是采用接入控制协议CSMA/CD(载波监听多点接入/碰撞检测)</li></ul></li></ul><p><strong>交换式局域网</strong></p><ul><li>使用点对点链路和链路层交换机的交换式局域网</li></ul><p><strong>无线局域网</strong></p><ul><li><code>802.11</code>局域网的媒体接入控制协议CSMA/CA(载波监听多点接入/碰撞避免)</li></ul><h3 id=封装成帧><a class=anchor href=#封装成帧>#</a> 封装成帧</h3><ul><li>帧头和帧尾包含重要的控制信息</li><li>帧头和帧尾的作用之一就是帧定界</li><li>透明传输 - 数据链路层对上层交付的传输数据没有任何限制<ul><li>面向字节的物理链路，使用<strong>字节</strong>填充(或字符填充)的方式实现</li><li>面向比特的物理链路，使用<strong>比特</strong>填充的方法实现透明传输</li></ul></li></ul><h3 id=差错检测><a class=anchor href=#差错检测>#</a> 差错检测</h3><ul><li>比特差错 - 传输过程中，比特0和比特1的变换</li><li>误码率BER(Bit Error Rate) - 一段时间内，传输错误的比特占所传输比特总数的比率</li><li>使用差错检错码来解决比特差错</li><li>检错码只能检测出是否出现差错，无法纠正错误</li></ul><p><strong>奇偶校验</strong></p><ul><li>待发送数据后面添加1位奇偶校验位，使整个数据中的1的个数位奇数(奇校验)或偶数(偶校验)</li><li>如果有个奇数个位发生误码，则奇偶性发生变化，可以检测出误码</li><li>如果有个偶数个位发生误码，则奇偶性不发生变化，不能可以检测出误码(漏检)</li></ul><p><strong>循环冗余校验CRC(Cyclic Redundancy Check)</strong></p><ul><li><p>漏检率非常低，易于用硬件实现</p></li><li><p>过程</p><ul><li><p>收发双方约定一个生成多项式G(x)</p></li><li><p>发送方由待发送数据和多项式计算出差错检错码(冗余码)，将其添加到待传输数据的后面一起传输</p></li><li><p>接收方通过多项式计算收到的数据是否产生了误码</p></li></ul></li><li><p>要求多项式包含最低次项</p></li></ul><h3 id=可靠传输><a class=anchor href=#可靠传输>#</a> 可靠传输</h3><h4 id=概述-3><a class=anchor href=#概述-3>#</a> 概述</h4><ul><li>有线链路，误码率低，不要求数据链路层提供可靠服务</li><li>无线链路，误码率高，要求数据链路层提供可靠服务</li><li>传输差错包括<ul><li>比特差错</li><li>分组丢失</li><li>分组失序</li><li>分组重复</li></ul></li><li>分组丢失/失序/重复一般不会出现在数据链路层</li><li>可靠传输服务不局限于数据链路层，其他层也可实现</li><li><code>802.11</code>无线局域网要求数据链路层实现可靠传输，以太网不要求</li><li>网际层的IP协议向上层提供无连接，不可靠传输服务</li><li>TCP向上层提供面向连接的可靠传输服务</li><li>UDP向上层提供无连接、不可靠传输服务</li><li>可靠传输实现复杂，开销大</li></ul><h4 id=三种实现机制><a class=anchor href=#三种实现机制>#</a> 三种实现机制</h4><p><strong>停止-等待协议SW</strong></p><ul><li>发送方发送数据分组</li><li>接收方接收后，进行差错检测<ul><li>无误码后发送确认分组(ACK)</li><li>有误码丢弃分组，并发送否认分组(NAK)</li></ul></li><li>分组丢失<ul><li>为了防止当发送方发送的数据分组丢失，导致双方一直在等待对方的确认，可在发送方发送完一个数据分组时，启动一个超时计时器并设置重传时间，若到了重传时间，接收方还没有反应，则重传原来的数据分组，该过程位<strong>超时重传</strong>，重传时间选为略大于从发送方到接收方的平均往返时间</li></ul></li><li>分组重复<ul><li>接收方发送确认分组后分组在传输过程中丢失，之后发送方超时重传</li><li>为了避免该错误，必须给每个分组带上序号(1比特)</li><li>确认分组也可以带上序号(用于解决确认迟到的问题)，也可以不带序号</li></ul></li><li>停止-等待协议的信道利用率 - U = [<span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mfrac><msub><mi>T</mi><mi>D</mi></msub><mrow><msub><mi>T</mi><mi>D</mi></msub><mo>+</mo><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><msub><mi>T</mi><mi>A</mi></msub></mrow></mfrac></mrow><annotation encoding=application/x-tex>\frac{T_D}{T_D+RTT+T_A}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.3339409999999998em;vertical-align:-.44530499999999995em></span><span class=mord><span class="mopen nulldelimiter"></span><span class=mfrac><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.8886359999999999em><span style=top:-2.6550000000000002em><span class=pstrut style=height:3em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:.13889em>T</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.3448em><span style=top:-2.3567071428571427em;margin-left:-.13889em;margin-right:.07142857142857144em><span class=pstrut style=height:2.5em></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style=margin-right:.02778em>D</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.14329285714285717em><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style=margin-right:.00773em>R</span><span class="mord mathnormal mtight" style=margin-right:.13889em>T</span><span class="mord mathnormal mtight" style=margin-right:.13889em>T</span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:.13889em>T</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.3448em><span style=top:-2.3567071428571427em;margin-left:-.13889em;margin-right:.07142857142857144em><span class=pstrut style=height:2.5em></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.14329285714285717em><span></span></span></span></span></span></span></span></span></span><span style=top:-3.23em><span class=pstrut style=height:3em></span><span class=frac-line style=border-bottom-width:.04em></span></span><span style=top:-3.410305em><span class=pstrut style=height:3em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:.13889em>T</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.3448em><span style=top:-2.3567071428571427em;margin-left:-.13889em;margin-right:.07142857142857144em><span class=pstrut style=height:2.5em></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style=margin-right:.02778em>D</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.14329285714285717em><span></span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.44530499999999995em><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>]<ul><li>U - 信道利用率</li><li><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><msub><mi>T</mi><mi>D</mi></msub></mrow><annotation encoding=application/x-tex>T_D</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.83333em;vertical-align:-.15em></span><span class=mord><span class="mord mathnormal" style=margin-right:.13889em>T</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.32833099999999993em><span style=top:-2.5500000000000003em;margin-left:-.13889em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style=margin-right:.02778em>D</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span></span></span></span> - 发送方发送分组所耗费的一段时间(发送时延)</li><li>RTT - 收发双方之间的往返时间</li><li><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><msub><mi>T</mi><mi>A</mi></msub></mrow><annotation encoding=application/x-tex>T_A</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.83333em;vertical-align:-.15em></span><span class=mord><span class="mord mathnormal" style=margin-right:.13889em>T</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.32833099999999993em><span style=top:-2.5500000000000003em;margin-left:-.13889em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span></span></span></span> - 接收方发送确认分组所耗费的一段时间(发送时延)</li></ul></li></ul><p><strong>回退N帧协议GBN</strong></p><ul><li>在流水线传输基础上，利用发送窗口限制发送方可连续发送数据分组的个数</li><li><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTg0LjMmYW1wO3A9MjY=">→回退N帧协议演示</span></li></ul><p><strong>选择重传协议SR</strong></p><ul><li><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTk1LjImYW1wO3A9Mjc=">→选择重传协议演示</span></li></ul><h3 id=点对点协议ppppoint-to-point-protocol><a class=anchor href=#点对点协议ppppoint-to-point-protocol>#</a> 点对点协议PPP(Point-to-Point Protocol)</h3><h4 id=概述-4><a class=anchor href=#概述-4>#</a> ! 概述</h4><ul><li><p>是目前使用最广泛的点对点数据链路层协议</p></li><li><p>用户计算机与ISP进行通信时，所使用的数据链路层协议通常就是PPP协议</p></li><li><p>1999年公布的在以太网上允许的PPP协议 - <strong>PPPoE</strong>(PPP over Ethernet)</p><ul><li>该协议使ISP可通过DSL，电路调制解调器，以太网等接入技术以以太网接口的形式为用户提供接入服务</li></ul></li><li><p>广泛应用于广域网路由器之间的专用线路</p></li><li><p>由IETF1992年制定，1993年和1994年修订，现在的PPP协议是因特网的正式标准(RFC1661, RFC1662)</p></li><li><p>为数据链路层各种协议数据报提供了一个标准方法，由以下三部分构成</p><ul><li>对各种协议数据报的封装方法(封装成帧)</li><li>链路控制协议LCP - 用于建立，配置以及测试数据链路的支持</li><li>一套网络控制协议NCPs - 其中的每一个协议支持不同的网络层协议</li></ul></li></ul><h4 id=帧格式><a class=anchor href=#帧格式>#</a> 帧格式</h4><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/1.webp alt=""></p><p><strong>对透明传输问题的处理</strong></p><ul><li>实现透明传输的方法<ul><li>面向字节的异步链路 - 采用字节填充法(插入转义字符)</li><li>面向比特的同步链路 - 采用比特填充法(插入比特0)</li></ul></li></ul><h4 id=工作过程><a class=anchor href=#工作过程>#</a> 工作过程</h4><ul><li>PPP链路的开始和结束状态都是<strong>静止</strong>状态</li><li>当检测到调制解调器的载波信号并建立物理层连接后，PPP就进入链路的<strong>建立</strong>状态</li><li>链路控制协议LCP开始协商一些配置选项<ul><li>最大帧长</li><li>鉴别协议 - 无需鉴别，口令鉴别协议PAP，挑战握手鉴别协议CHAP</li></ul></li><li>协商成功，就进入<strong>鉴别</strong>状态；协商失败，就退回到<strong>静止</strong>状态</li><li>无需鉴别或鉴别成功后进入<strong>网络</strong>状态；鉴别失败进入<strong>终止</strong>状态</li><li>进入网络状态后，进行<strong>NCP配置</strong><ul><li>PPP链路的两端互相交换网络层特定的NCP分组</li><li>如果在PPP链路上运行的是IP，则使用IP控制协议IPCP来对PPP链路的每一端配置IP模块(<strong>分配IP地址</strong>)</li></ul></li><li>配置完成后进入<strong>打开</strong>状态，即可进行数据通信</li><li>当出现故障或链路一端发出终止请求时，进入<strong>终止</strong>状态</li><li>当调制解调器的载波信号停止时，进入<strong>静止</strong>状态</li></ul><h3 id=媒体接入><a class=anchor href=#媒体接入>#</a> 媒体接入</h3><h4 id=基本概念><a class=anchor href=#基本概念>#</a> ! 基本概念</h4><ul><li>在总线型局域网中，各主机竞争使用总线，当有2个或多个主机在同一时刻发送数据，信号在共享媒体上就会产生碰撞，该过程为发生冲突，使这些主机都发送失败</li><li>共享信道需要考虑如何协调多个发送和接收站点对一个共享传输媒体的占用，即媒体接入控制MAC(Medium Access Control)</li></ul><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/2.webp alt=""></p><h4 id=静态划分信道><a class=anchor href=#静态划分信道>#</a> 静态划分信道</h4><p><strong>信道复用</strong></p><ul><li>复用是通信技术中的一个重要概念。复用就是通过一条物理线路同时传输多路用户的信号</li><li>当网络中传输媒体的传输容量大于多条单一信道传输的总通信量时，可利用复用技术在一条物理线路上建立多条通信信道来充分利用传输媒体的带宽</li></ul><p><strong>常见复用技术</strong></p><ul><li><p>频分复用FDM</p><ul><li>将传输线路的频带资源划分为多个子频带，以形成多个子信道</li><li>各子信道之间需要留出隔离频带(避免造成子信道间的干扰)</li><li>当多路信号输入一个多路复用器时，复用器将每一路信号调制到不同频率的载波上</li><li>接收端由相应的分用器通过滤波将各路信号分开，将合成的复用信号恢复成原始的多路信号</li><li>频分复用的所有用户同时占用不同的频带资源并行通信</li></ul></li><li><p>时分复用TDM</p><ul><li>将时间划分为一个个时隙</li><li>时分复用技术将传输线路的带宽资源按时隙轮流分配给不同用户</li><li>每对用户只在分配的时隙里使用线路传输数据</li><li>时分复用的所有用户在不同的时间占用同样的频带宽度</li></ul></li><li><p>波分复用WDM</p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/3.webp alt=""></p></li><li><p>码分复用CDM</p><ul><li>是另一种共享信道的方法，常用于多址接入，常用名称为码分多址CDMA(Code Division Multiple Access)</li><li>与FDM和TDM不同，CDM的每一个用户可以在同样的时间使用同样的频带进行通信</li><li>由于各用户使用经过特殊挑选的不同码型，因此各用户之间不会造成干扰</li><li>其频谱类似于白噪声</li><li>在CDMA中每一个比特时间再划分为m(m的值通常是64或128)个短的间隔，称为码片(Chip)</li><li>使用CDMA的每一个站被指派一个唯一的m bit码片序列(Chip Sequence)<ul><li>一个站要发送比特1，则发送它自己的m bit码片序列</li><li>一个站要发送比特0，则发送它自己的m bit码片序列的二进制反码</li></ul></li><li>码片序列的挑选原则<ul><li>分配给每个站的码片序列必须各不相同(采用伪随机)</li><li>分配给每个站的码片序列必须相互正交(规格化内积为0)</li><li><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mstyle mathsize=0.9em><mi>S</mi><mo separator=true>⋅</mo><mi>T</mi><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><mrow><msub><mi>S</mi><mi>i</mi></msub><msub><mi>T</mi><mi>i</mi></msub></mrow><mo separator=true>,</mo><mtext> </mtext><mi>S</mi><mo separator=true>⋅</mo><mi>S</mi><mo>=</mo><mn>1</mn><mo separator=true>,</mo><mtext> </mtext><mi>S</mi><mo separator=true>⋅</mo><mover accent=true><mi>T</mi><mo stretchy=true>‾</mo></mover><mo>=</mo><mn>0</mn><mo separator=true>,</mo><mtext> </mtext><mi>S</mi><mo separator=true>⋅</mo><mover accent=true><mi>S</mi><mo stretchy=true>‾</mo></mover><mo>=</mo><mo>−</mo><mn>1</mn></mstyle></mrow><annotation encoding=application/x-tex>\small S · T = \frac{1}{m}\sum_{i=1}^{m}{S_iT_i}, \space S · S = 1, \space S · \overline{T} = 0, \space S · \overline{S} = -1</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.614997em;vertical-align:0></span><span class="mord mathnormal sizing reset-size6 size5" style=margin-right:.05764em>S</span><span class="mpunct sizing reset-size6 size5">⋅</span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord mathnormal sizing reset-size6 size5" style=margin-right:.13889em>T</span><span class=mspace style=margin-right:.2777777777777778em></span><span class="mrel sizing reset-size6 size5">=</span><span class=mspace style=margin-right:.2777777777777778em></span></span><span class=base><span class=strut style=height:1.051764em;vertical-align:-.3105em></span><span class="mord sizing reset-size6 size5"><span class="mopen nulldelimiter sizing reset-size5 size6"></span><span class=mfrac><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.8236266666666667em><span style=top:-2.6550000000000002em><span class=pstrut style=height:3em></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style=top:-3.23em><span class=pstrut style=height:3em></span><span class=frac-line style=border-bottom-width:.04em></span></span><span style=top:-3.394em><span class=pstrut style=height:3em></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.345em><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size5 size6"></span></span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mop sizing reset-size6 size5"><span class="mop op-symbol small-op" style=position:relative;top:-.0000050000000000050004em>∑</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.7077066666666667em><span style=top:-2.2833233333333336em;margin-left:0;margin-right:.05555555555555556em><span class=pstrut style=height:2.6em></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style=top:-3.0206666666666666em;margin-right:.05555555555555556em><span class=pstrut style=height:2.6em></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.31667666666666666em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord sizing reset-size6 size5"><span class=mord><span class="mord mathnormal" style=margin-right:.05764em>S</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.28967999999999994em><span style=top:-2.45em;margin-left:-.05764em;margin-right:.05555555555555556em><span class=pstrut style=height:2.6em></span><span class="sizing reset-size5 size2 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mord><span class="mord mathnormal" style=margin-right:.13889em>T</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.28967999999999994em><span style=top:-2.45em;margin-left:-.13889em;margin-right:.05555555555555556em><span class=pstrut style=height:2.6em></span><span class="sizing reset-size5 size2 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span></span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace sizing reset-size6 size5"> </span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord mathnormal sizing reset-size6 size5" style=margin-right:.05764em>S</span><span class="mpunct sizing reset-size6 size5">⋅</span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord mathnormal sizing reset-size6 size5" style=margin-right:.05764em>S</span><span class=mspace style=margin-right:.2777777777777778em></span><span class="mrel sizing reset-size6 size5">=</span><span class=mspace style=margin-right:.2777777777777778em></span></span><span class=base><span class=strut style=height:.9699930000000001em;vertical-align:-.174996em></span><span class="mord sizing reset-size6 size5">1</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace sizing reset-size6 size5"> </span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord mathnormal sizing reset-size6 size5" style=margin-right:.05764em>S</span><span class="mpunct sizing reset-size6 size5">⋅</span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord overline sizing reset-size6 size5"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:.8833300000000001em><span style=top:-3em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal" style=margin-right:.13889em>T</span></span></span><span style=top:-3.80333em><span class=pstrut style=height:3em></span><span class=overline-line style=border-bottom-width:.04em></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class="mrel sizing reset-size6 size5">=</span><span class=mspace style=margin-right:.2777777777777778em></span></span><span class=base><span class=strut style=height:.9699930000000001em;vertical-align:-.174996em></span><span class="mord sizing reset-size6 size5">0</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace sizing reset-size6 size5"> </span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord mathnormal sizing reset-size6 size5" style=margin-right:.05764em>S</span><span class="mpunct sizing reset-size6 size5">⋅</span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord overline sizing reset-size6 size5"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:.8833300000000001em><span style=top:-3em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal" style=margin-right:.05764em>S</span></span></span><span style=top:-3.80333em><span class=pstrut style=height:3em></span><span class=overline-line style=border-bottom-width:.04em></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class="mrel sizing reset-size6 size5">=</span><span class=mspace style=margin-right:.2777777777777778em></span></span><span class=base><span class=strut style=height:.654993em;vertical-align:-.07499700000000001em></span><span class="mord sizing reset-size6 size5">−</span><span class="mord sizing reset-size6 size5">1</span></span></span></span> →<ul><li>S - 站S的码片序列</li><li>T - 其他任何站的码片序列</li></ul></li></ul></li></ul></li></ul><h4 id=动态接入控制-随机接入><a class=anchor href=#动态接入控制-随机接入>#</a> 动态接入控制 - 随机接入</h4><ul><li><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTE1LjcmYW1wO3A9MzE=">→CSMA/CD协议</span></li><li><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTE3LjAmYW1wO3A9MzI=">→CSMA/CA协议</span></li></ul><h3 id=mac地址-ip地址-arp协议><a class=anchor href=#mac地址-ip地址-arp协议>#</a> ! MAC地址 &amp; IP地址 &amp; ARP协议</h3><h4 id=概述-5><a class=anchor href=#概述-5>#</a> 概述</h4><ul><li>MAC地址是以太网的MAC子层所使用的地址</li><li>IP地址是TCP/IP体系结构网际层所使用的地址</li><li>ARP协议属于TCP/IP体系结构的网际层，其作用是当知道设备所分配到的IP地址，使用ARP协议可通过该IP地址获取到设备的MAC地址</li></ul><h4 id=mac地址media-access-control-address><a class=anchor href=#mac地址media-access-control-address>#</a> MAC地址(Media Access Control Address)</h4><p>MAC地址的全称是<strong>媒体访问控制地址</strong>，也可以称为LAN 地址、物理地址、以太网地址等。如果说，互联网中每一个资源都由IP地址唯一标识(IP协议内容)，那么一切网络设备都由MAC地址唯一标识。可以理解为，MAC地址是一个网络设备真正的身份证号，IP地址只是一种不重复的定位方式(比如说住在某省某市某街道的张三，这种逻辑定位是IP地址，他的身份证号才是他的MAC地址)，也可以理解为MAC地址是身份证号，IP地址是邮政地址。</p><p>不仅仅是网络资源才有IP地址，网络设备也有IP地址，比如路由器。但从结构上说，路由器等网络设备的作用是组成一个网络，而且通常是内网，所以它们使用的IP地址通常是内网IP，内网的设备在与内网以外的设备进行通信时，需要用到NAT协议。</p><p>MAC地址的长度为6字节(48比特)，地址空间大小有280万亿之多(248)，MAC地址由IEEE统一管理与分配，理论上，一个网络设备中的网卡上的MAC地址是永久的。不同的网卡生产商从IEEE那里购买自己的MAC地址空间(MAC的前24比特)，也就是前24比特由IEEE统一管理，保证不会重复。而后24比特，由各家生产商自己管理，同样保证生产的两块网卡的MAC地址不会重复。</p><p>MAC地址具有可携带性、永久性，身份证号永久地标识一个人的身份，不论他到哪里都不会改变。而IP地址不具有这些性质，当一台设备更换了网络，它的IP地址也就可能发生改变，也就是它在互联网中的定位发生了变化。</p><p>MAC地址有一个特殊地址：FF-FF-FF-FF-FF-FF(全1地址)，该地址表示广播地址，使用点对点信道的数据链路层不需要使用广播地址。</p><p>当多个主机连接在同一个广播信道上，想要实现两个主机之间的通信，每个主机都必须有一个唯一的标识(一个数据链路层地址)。</p><ul><li><p>在每个主机发送的帧中必须携带标识<strong>发送主机和接收主机的地址</strong>。由于这类地址是用于媒体接入控制MAC(Media Access Control)，因此这类地址被称为MAC地址</p></li><li><p>MAC地址一般被固化在网卡(网络适配器)的电可擦可编程只读存储器EEPROM中，因此MAC地址也被称为<strong>硬件地址</strong>。MAC地址有时也被称为<strong>物理地址</strong>(这不意味着MAC地址属于物理层)</p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/4.webp alt=""></p></li></ul><p>一般情况下，用户主机会包含有线局域网适配器(有线网卡)和无线局域网适配器(无线网卡)。每个网络适配器都有全国唯一的MAC地址。而交换机和路由器拥有更多的MAC地址。</p><ul><li><p>MAC地址是对网络上各接口的唯一标识，而不是对网络上各设备的唯一标识</p></li><li><p>IEEE 802局域网的MAC地址</p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/5.webp alt=""></p><ul><li>第一字节 ~ 第六字节 - 字节发送顺序</li><li><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><msub><mi>b</mi><mn>0</mn></msub></mrow><annotation encoding=application/x-tex>b_0</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.84444em;vertical-align:-.15em></span><span class=mord><span class="mord mathnormal">b</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span></span></span></span> ~<span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><msub><mi>b</mi><mn>7</mn></msub></mrow><annotation encoding=application/x-tex>b_7</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.84444em;vertical-align:-.15em></span><span class=mord><span class="mord mathnormal">b</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span></span></span></span> - 字节内的比特发送顺序</li></ul></li><li><p>单播MAC地址</p><ul><li>在拥有三台主机(A,B,C)的总线型以太网中，各主机有固化的全球单播MAC地址</li><li>假设主机B要给主机C发送单播帧，主机B先构建单播帧并在帧首部的目的地址字段填入主机C的MAC地址，源地址字段填入自己的MAC地址，再加上帧首部的其他字段，数据载荷和帧尾就构成了单播帧</li><li>主机B将单播帧发送，主机A和主机C都能收到该单播帧</li><li>主机A匹配该单播帧的目的地址失败，就丢弃该单播帧</li><li>主机C匹配该单播帧的目的地址成功，就接收单播帧并交给上层处理</li></ul></li><li><p>广播MAC地址</p><ul><li>在拥有三台主机(A,B,C)的总线型以太网中，各主机有固化的全球广播MAC地址</li><li>假设主机B要给主机C发送广播帧，主机B先构建广播帧并在帧首部的目的地址字段填入主机C的MAC地址，源地址字段填入自己的MAC地址，再加上帧首部的其他字段，数据载荷和帧尾就构成了广播帧</li><li>主机B将广播帧发送，主机A和主机C都能收到该广播帧，经判断为广播帧，主机A和C都接收该广播帧并交给上层处理</li></ul></li><li><p>多播MAC地址</p><ul><li>在拥有四台主机(A,B,C,D)的总线型以太网中，各主机有固化的全球多播MAC地</li></ul><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/6.webp alt=""></p></li></ul><h4 id=网际协议地址internet-protocol-address-ip地址><a class=anchor href=#网际协议地址internet-protocol-address-ip地址>#</a> 网际协议地址(Internet Protocol address - IP地址)</h4><p>网际协议IP(Internet Protocol)是TCP/IP协议中最重要的协议之一，是属于<strong>网络层</strong>的协议，主要作用是定义数据包的格式、对数据包进行路由和寻址，以便它们可以跨网络传播并到达正确的目的地。目前IP协议主要分为两种，一种是旧的IPv4，另一种是较新的IPv6，目前这两种协议都在使用，但后者已经被提议来取代前者</p><ul><li>IP地址是因特网上的主机和路由器所使用的地址，用于标识<ul><li>网络编号 - 标识因特网的网络</li><li>主机编号 - 标识同一网络上不同主机(或路由器各接口)</li></ul></li><li>如果只是一个单独的网络，不接入因特网，可以只使用MAC地址</li><li>如果主机所在的网络，要接入因特网，则IP地址和MAC地址都需要</li></ul><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/7.webp alt=""></p><details class=info><summary>什么是IP地址？IP寻址如何工作？</summary><div><p>每个连入互联网的设备或域(如计算机、服务器、路由器等)都被分配一个<strong>IP地址(Internet Protocol address)</strong>，作为唯一标识符。每个IP地址都是一个字符序列，如 192.168.1.1(IPv4)、2001:0db8:85a3:0000:0000:8a2e:0370:7334(IPv6) 。</p><p>当网络设备发送IP数据包时，数据包中包含了<strong>源IP地址</strong>和<strong>目的IP地址</strong> 。源IP地址用于标识数据包的发送方设备或域，而目的IP地址则用于标识数据包的接收方设备或域。这类似于一封邮件中同时包含了目的地地址和回邮地址。</p><p>网络设备根据目的IP地址来判断数据包的目的地，并将数据包转发到正确的目的地网络或子网络，从而实现了设备间的通信。</p><p>这种基于IP地址的寻址方式是互联网通信的基础，它允许数据包在不同的网络之间传递，从而实现了全球范围内的网络互联互通。IP地址的唯一性和全局性保证了网络中的每个设备都可以通过其独特的IP地址进行标识和寻址。</p></div></details><details class=info><summary>什么是IP地址过滤？</summary><div><p><strong>IP 地址过滤(IP Address Filtering)</strong> 简单来说就是限制或阻止特定IP地址或IP地址范围的访问。例如，你有一个图片服务突然被某一个IP地址攻击，那我们就可以禁止这个IP地址访问图片服务。</p><p>IP 地址过滤是一种简单的网络安全措施，实际应用中一般会结合其他网络安全措施，如认证、授权、加密等一起使用。单独使用IP地址过滤并不能完全保证网络的安全。</p></div></details><h4 id=地址解析协议协议address-resolution-protocol-arp><a class=anchor href=#地址解析协议协议address-resolution-protocol-arp>#</a> 地址解析协议协议(Address Resolution Protocol - ARP)</h4><p>ARP协议解决的是网络层地址和数据链路层地址之间的转换问题。因为一个IP数据报在物理上传输的过程中，总是需要知道下一跳(物理上的下一个目的地)该去往何处，但IP地址属于逻辑地址，而MAC地址才是物理地址，ARP协议解决了IP地址转MAC地址的一些问题。</p><p><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTQyLjMmYW1wO3A9MzU=">ARP协议演示</span> &amp; <span class=exturl data-url="aHR0cHM6Ly9qYXZhZ3VpZGUuY24vY3MtYmFzaWNzL25ldHdvcmsvYXJwLmh0bWw=">ARP协议的工作原理/ARP协议详解(网络层)</span></p><h3 id=集线器与交换机的区别><a class=anchor href=#集线器与交换机的区别>#</a> 集线器与交换机的区别</h3><p><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTExLjEmYW1wO3A9MzY=">集线器与交换机区别演示</span> &amp; <span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTE5LjAmYW1wO3A9Mzc=">交换机自学习和转发帧的流程演示</span></p><h3 id=以太网交换机的生成树协议stp><a class=anchor href=#以太网交换机的生成树协议stp>#</a> 以太网交换机的生成树协议STP</h3><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/8.webp alt=""></p><ul><li>以太网交换机使用生成树协议STP(Spanning Tree Protocol)，可以再增加冗余链路来提高网络可靠性和避免网络环境带来的各种问题<ul><li>不论交换机采用什么样的物理连接，交换机都能够自动计算并构建一个逻辑上没有环路的网络，其逻辑拓扑结构必须是树形的无逻辑环路</li><li>最终生成的树型逻辑拓扑要确保连通整个网络</li><li>当首次连接交换机或网络物理拓扑发送变化时(有可能是人为改变或故障)，交换机都将进行生成树的重新计算</li></ul></li></ul><h3 id=虚拟局域网vlan><a class=anchor href=#虚拟局域网vlan>#</a> 虚拟局域网VLAN</h3><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/9.webp alt=""></p><p><strong>VLAN技术的实现</strong> - <span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTkuMyZhbXA7cD00MA==">→VLAN技术的基本过程演示</span></p><h2 id=网络层网际层network-layer><a class=anchor href=#网络层网际层network-layer>#</a> 网络层/网际层(Network layer)</h2><h3 id=概述-6><a class=anchor href=#概述-6>#</a> 概述</h3><p>网络层负责为分组交换网上的不同主机提供通信服务。在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组和包进行传送。在TCP/IP体系结构中，由于网络层使用IP协议，因此分组也叫IP数据报，简称<strong>数据报</strong>。</p><p>网络层的还有一个任务就是选择合适的路由，使源主机运输层所传下来的分组，能通过网络层中的路由器找到目的主机。这里强调指出，网络层中的网络二字已经不是通常谈到的具体网络，而是指计算机网络体系结构模型中第三层的名称。</p><ul><li>网络层的主要任务是<strong>实现网络互连</strong>，<strong>使数据包在各网络之间传输</strong></li><li>实现网络层任务，需要解决<ul><li>网络层向运输层提供怎样的服务(可靠还是不可靠传输)</li><li>网络层的寻址问题</li><li>路由选择问题(人工，算法)</li></ul></li><li>互联网是由大量的异构(heterogeneous)网络通过路由器(router)相互连接起来的。互联网使用的网络层协议是无连接的网际协议(Internet Protocol - IP)和许多路由选择协议，因此互联网的网络层也叫做网际层或IP层</li></ul><details class=info><summary>网络层有哪些常见的协议？</summary><div><ul><li><p><strong>IP(Internet Protocol - 网际协议)</strong> - TCP/IP协议中最重要的协议之一，属于网络层的协议，主要作用是定义数据包的格式、对数据包进行路由和寻址，以便它们可以跨网络传播并到达正确的目的地。目前IP协议主要分为两种，一种是过去的IPv4，另一种是较新的IPv6，目前这两种协议都在使用，但后者已经被提议来取代前者</p></li><li><p><strong>ARP(Address Resolution Protocol - 地址解析协议)</strong> - ARP协议解决的是网络层地址和链路层地址之间的转换问题。因为一个IP数据报在物理上传输的过程中，总是需要知道下一跳(物理上的下一个目的地)该去往何处，但 IP 地址属于逻辑地址，而MAC地址才是物理地址，ARP协议解决了IP地址转MAC地址的一些问题</p></li><li><p><strong>ICMP(Internet Control Message Protocol - 互联网控制报文协议)</strong> - 一种用于传输网络状态和错误消息的协议，常用于网络诊断和故障排除。例如，Ping工具就使用了ICMP协议来测试网络连通性</p></li><li><p><strong>NAT(Network Address Translation - 网络地址转换协议)</strong> - NAT协议的应用场景如同它的名称——网络地址转换，应用于内部网到外部网的地址转换过程中。具体地说，在一个小的子网(局域网，LAN)内，各主机使用的是同一个LAN下的IP地址，但在该LAN以外，在广域网(WAN)中，需要一个统一的IP地址来标识该LAN在整个Internet上的位置</p></li><li><p><strong>OSPF(Open Shortest Path First - 开放式最短路径优先)</strong> - 一种内部网关协议(Interior Gateway Protocol，IGP)，也是广泛使用的一种动态路由协议，基于链路状态算法，考虑了链路的带宽、延迟等因素来选择最佳路径</p></li><li><p><strong>RIP(Routing Information Protocol - 路由信息协议)</strong> - 一种内部网关协议(Interior Gateway Protocol，IGP)，也是一种动态路由协议，基于距离向量算法，使用固定的跳数作为度量标准，选择跳数最少的路径作为最佳路径</p></li><li><p><strong>BGP(Border Gateway Protocol - 边界网关协议)</strong> - 一种用来在路由选择域之间交换网络层可达性信息(Network Layer Reachability Information，NLRI)的路由选择协议，具有高度的灵活性和可扩展性</p></li></ul><h3 id=两种服务><a class=anchor href=#两种服务>#</a> 两种服务</h3><p><strong>面向连接的虚电路服务</strong></p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/10_1.webp alt=""></p><p><strong>无连接的数据报服务</strong></p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/10_2.webp alt=""></p><h3 id=ipv4地址><a class=anchor href=#ipv4地址>#</a> ! IPv4地址</h3><h4 id=概述-7><a class=anchor href=#概述-7>#</a> 概述</h4><ul><li><p>IPv4地址就是给因特网(Internet)上的每一台主机(或路由器)的每一个接口<strong>分配</strong>一个在全世界范围内的<strong>唯一的32比特的标识符</strong></p></li><li><p>IP地址由因特网名字和数字分配机构ICANN(Internet Corporation for Assigned Names and Numbers)进行分配</p><ul><li>我国用户可向亚太网络信息中心APNIC(Asia Pacific Network Information Center)申请IP地址，需缴纳费用</li><li>2011年2月3日，互联网号码分配管理局IANA(由ICANN行使职能)宣布IPv4地址已分配完毕</li><li>我国在2014至2015年也逐步停止了向新用户和应用分配IPv4地址，同时全面开展商用部署IPv6</li></ul></li><li><p>IPv4地址的编址方法的三个历史阶段</p><ul><li>1981年 - 分类编址</li><li>1985年 - 划分子网</li><li>1993年 - 无分类编址</li></ul></li><li><p>32比特的IPv4地址采用<strong>点分十进制表示方法</strong></p><ul><li><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mstyle mathsize=0.9em><mi><munder><mo><munder><mn>00001010</mn><mo stretchy=true>⏟</mo></munder></mo><mn>10</mn></munder></mi></mstyle></mrow><annotation encoding=application/x-tex>\small \underset{10}{\underbrace{00001010}}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.793196em;vertical-align:-1.2131999999999998em></span><span class="mord sizing reset-size6 size5"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.6444400000000001em><span style=top:-1.7520000000000002em;margin-left:0><span class=pstrut style=height:3em></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span><span style=top:-3.0000000000000004em><span class=pstrut style=height:3em></span><span><span class=mop><span class="mord munder"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.64444em><span class=svg-align style=top:-2.352em><span class=pstrut style=height:3em></span><span class=stretchy style=height:.548em;min-width:1.6em><span class=brace-left style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class=brace-center style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class=brace-right style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style=top:-3em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.648em><span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.3479999999999999em><span></span></span></span></span></span></span></span></span></span><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mstyle mathsize=0.9em><mi><munder><mo><munder><mn>11110000</mn><mo stretchy=true>⏟</mo></munder></mo><mn>240</mn></munder></mi></mstyle></mrow><annotation encoding=application/x-tex>\small \underset{240}{\underbrace{11110000}}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.793196em;vertical-align:-1.2131999999999998em></span><span class="mord sizing reset-size6 size5"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.6444400000000001em><span style=top:-1.7520000000000002em;margin-left:0><span class=pstrut style=height:3em></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">4</span><span class="mord mtight">0</span></span></span></span><span style=top:-3.0000000000000004em><span class=pstrut style=height:3em></span><span><span class=mop><span class="mord munder"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.64444em><span class=svg-align style=top:-2.352em><span class=pstrut style=height:3em></span><span class=stretchy style=height:.548em;min-width:1.6em><span class=brace-left style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class=brace-center style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class=brace-right style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style=top:-3em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>1</span><span class=mord>1</span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.648em><span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.3479999999999999em><span></span></span></span></span></span></span></span></span></span><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mstyle mathsize=0.9em><mi><munder><mo><munder><mn>00001111</mn><mo stretchy=true>⏟</mo></munder></mo><mn>15</mn></munder></mi></mstyle></mrow><annotation encoding=application/x-tex>\small \underset{15}{\underbrace{00001111}}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.793196em;vertical-align:-1.2131999999999998em></span><span class="mord sizing reset-size6 size5"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.6444400000000001em><span style=top:-1.7520000000000002em;margin-left:0><span class=pstrut style=height:3em></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">5</span></span></span></span><span style=top:-3.0000000000000004em><span class=pstrut style=height:3em></span><span><span class=mop><span class="mord munder"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.64444em><span class=svg-align style=top:-2.352em><span class=pstrut style=height:3em></span><span class=stretchy style=height:.548em;min-width:1.6em><span class=brace-left style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class=brace-center style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class=brace-right style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style=top:-3em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>1</span><span class=mord>1</span><span class=mord>1</span><span class=mord>1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.648em><span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.3479999999999999em><span></span></span></span></span></span></span></span></span></span><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mstyle mathsize=0.9em><mi><munder><mo><munder><mn>10101010</mn><mo stretchy=true>⏟</mo></munder></mo><mn>170</mn></munder></mi></mstyle></mrow><annotation encoding=application/x-tex>\small \underset{170}{\underbrace{10101010}}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.793196em;vertical-align:-1.2131999999999998em></span><span class="mord sizing reset-size6 size5"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.6444400000000001em><span style=top:-1.7520000000000002em;margin-left:0><span class=pstrut style=height:3em></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">7</span><span class="mord mtight">0</span></span></span></span><span style=top:-3.0000000000000004em><span class=pstrut style=height:3em></span><span><span class=mop><span class="mord munder"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.64444em><span class=svg-align style=top:-2.352em><span class=pstrut style=height:3em></span><span class=stretchy style=height:.548em;min-width:1.6em><span class=brace-left style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class=brace-center style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class=brace-right style=height:.548em><svg width=400em height=0.548em viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style=top:-3em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.648em><span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.3479999999999999em><span></span></span></span></span></span></span></span></span></span> → <code>10.240.15.170</code></li><li>每八位分一组</li><li>每个十进制之间用<code>.</code>来分隔</li></ul></li></ul><details class=info><summary>IPv4和IPv6有什么区别？</summary><div><p>**IPv4(Internet Protocol version 4)**是目前广泛使用的IP地址版本，其格式是四组由点分隔的数字，例如：123.89.46.72。IPv4 使用 32 位地址作为其 Internet 地址，这意味着共有约 42 亿( 2^32)个可用IP地址。</p><p>这么少当然不够用啦！为了解决 IP 地址耗尽的问题，最根本的办法是采用具有更大地址空间的新版本IP协议 - <strong>IPv6(Internet Protocol version 6)</strong>。IPv6地址使用更复杂的格式，该格式使用由单或双冒号分隔的一组数字和字母，例如：2001:0db8:85a3:0000:0000:8a2e:0370:7334 。IPv6使用128位互联网地址，这意味着约有2^128(3开头的39位数字)个可用IP地址。除了更大的地址空间之外，IPv6的优势还包括</p><ul><li><strong>无状态地址自动配置(Stateless Address Autoconfiguration，简称 SLAAC)</strong> - 主机可以直接通过根据接口标识和网络前缀生成全局唯一的IPv6地址，而无需依赖DHCP(Dynamic Host Configuration Protocol)服务器，简化了网络配置和管理</li><li><strong>NAT(Network Address Translation，网络地址转换)成为可选项</strong> - IPv6地址资源充足，可以给全球每个设备一个独立的地址</li><li><strong>对标头结构进行了改进</strong> - IPv6 标头结构相较于 IPv4 更加简化和高效，减少了处理开销，提高了网络性能</li><li><strong>可选的扩展头</strong> - 允许在 IPv6 标头中添加不同的扩展头(Extension Headers)，用于实现不同类型的功能和选项</li><li><strong>ICMPv6(Internet Control Message Protocol for IPv6)</strong> - IPv6中的ICMPv6相较于IPv4中的ICMP有了一些改进，如邻居发现、路径MTU发现等功能的改进，从而提升了网络的可靠性和性能</li></ul></div></details></div></details><h4 id=分类编址的ipv4地址><a class=anchor href=#分类编址的ipv4地址>#</a> 分类编址的IPv4地址</h4><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/11_1.webp alt=""></p><p><strong>A类地址</strong></p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/11_2.webp alt=""></p><p><strong>B类地址</strong></p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/11_3.webp alt=""></p><p><strong>C类地址</strong></p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/11_4.webp alt=""></p><p>根据IP地址的第一个十进制的值，可判断类别</p><ul><li>小于127 - A类</li><li>128 ~ 191 - B类</li><li>192 ~ 223 - C类</li></ul><h4 id=划分子网的ipv4地址><a class=anchor href=#划分子网的ipv4地址>#</a> 划分子网的IPv4地址</h4><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/12.webp alt=""></p><h4 id=无分类编址的ipv4地址><a class=anchor href=#无分类编址的ipv4地址>#</a> 无分类编址的IPv4地址</h4><ul><li><p>数量巨大的C类网其地址空间太小，没有得到充分利用</p></li><li><p>因特网IETF提出了采用无分类编址的方法来解决IP地址紧张的问题，还成立IPv6工作组</p></li><li><p>1993年，IETF发表了无分类域间路由选择CIDR(Classless Inter-Domain Routing)的RFC文档(RFC - 1517 ~ 1519和1520)</p><ul><li>CIDR消除了传统的A类，B类和C类地址，以及划分子网的概念</li><li>CIDR可以更加有效地分配IPv4的地址空间</li></ul></li><li><p>CIDR使用<strong>斜线计法</strong>，即在IPv4地址后面加上斜线<code>/</code>，在斜线后面写上网络前缀所占的比特数量</p><ul><li><code>128.14.35.7/20</code></li><li>网络编号前缀占用的比特数量为20</li><li>主机编号占用的比特数量为32 - 20 = 12</li></ul></li><li><p>CIDR实际上是将网络前缀都相同的连续的IP地址组成一个CIDR地址块</p></li><li><p>只需知道CIDR地址块中的任何一个地址，就可知道</p><ul><li>地址块的最小地址</li><li>地址块的最大地址</li><li>地址块的地址数量</li><li>地址块聚合某类网络(A类，B类或C类)的数量</li><li>地址掩码(也可称为子网掩码)</li></ul><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/13_1.webp alt=""></p></li><li><p>路由聚合(构造超网)</p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/13_2.webp alt=""></p></li></ul><h4 id=ipv4地址的应用规划><a class=anchor href=#ipv4地址的应用规划>#</a> IPv4地址的应用规划</h4><ul><li><p>给定一个IPv4地址块，如何将其划分成几个更小的地址块，并将这些地址块分配给互联网中的不同网络，以此给各网中的主机和路由器接口分配IPv4地址</p></li><li><p>定长的子网掩码FLSM - Fixed Length Subnet Mask</p><ul><li>使用同一个子网掩码来划分子网</li><li>每个子网所分配的IP地址数量相同，造成IP地址的浪费</li></ul><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/14_1.webp alt=""></p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/14_2.webp alt=""></p></li><li><p>变长的子网掩码VLSM - Variable Length Subnet Mask</p><ul><li>使用不同的子网掩码来划分子网</li><li>每个子网所分配的IP地址数量可以不同，尽可能减少对IP地址的浪费</li></ul><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/15_1.webp alt=""></p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/15_2.webp alt=""></p></li></ul><h3 id=ip数据报的发送和转发过程><a class=anchor href=#ip数据报的发送和转发过程>#</a> IP数据报的发送和转发过程</h3><ul><li><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTguNCZhbXA7cD00OA==">→IP数据报的发送和转发过程演示</span></li></ul><h3 id=静态路由配置><a class=anchor href=#静态路由配置>#</a> ! 静态路由配置</h3><ul><li><p>静态路由配置是指用户或网络管理员使用路由器的相关命令给路由器<strong>人工配置路由表</strong></p><ul><li>不能及时适应网络状态(流量，拓扑等)的变化</li></ul></li><li><p>静态路由配置可能产生路由环路的错误</p><ul><li>配置错误</li><li>聚合了不存在的网络</li><li>网络故障</li></ul></li><li><p>为了防止IP数据报在路由环路中永久兜圈，在IP数据报首部设有<strong>生存时间TTL字段</strong></p><ul><li>IP数据报进入路由器后，TTL字段减1，若TTL的值不等于0，则被路由器转发，否则被丢弃</li></ul></li><li><p><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTguNyZhbXA7cD00OQ==">→路由环路错误演示</span></p></li><li><p>路由条目的类型</p><ul><li>自连网络</li><li>静态路由 - 人工配置</li><li>动态路由 - 路由选择协议</li></ul></li><li><p>特殊的静态路由条目</p><ul><li>默认路由 - 目的网络为<code>0.0.0.0</code>，地址掩码为<code>0.0.0.0</code></li><li>特定主机路由 - 目的网络为特定主机的IP地址，地址掩码为<code>255.255.255.255</code></li><li>黑洞路由 - 下一跳为null0</li></ul></li></ul><h3 id=路由选择协议><a class=anchor href=#路由选择协议>#</a> 路由选择协议</h3><h4 id=概述-8><a class=anchor href=#概述-8>#</a> 概述</h4><p>静态路由选择</p><ul><li>需人工配置</li><li>不能及时式样网络状态的变化</li><li>用于小规模网络</li></ul><p>动态路由选择</p><ul><li>路由器通过路由选择协议自动获取路由信息</li><li>能较好地适应网络状态的变化</li><li>用于大规模网络</li></ul><p>因特网所采用的路由选择协议</p><ul><li>自适应 - 动态路由选择，能较好地适应网络状态的变化</li><li>分布式 - 路由器之间互换路由信息</li><li>分层次 - 将整个因特网划分为许多较小的自治系统AS(Autonomous System)</li></ul><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/16.webp alt=""></p><p>上图中的<strong>网关</strong>名词，是由于早期的RFC文档中没有使用路由器这个名词，新版RFC文档中已改为路由器了。</p><h4 id=常见的路由选择协议><a class=anchor href=#常见的路由选择协议>#</a> 常见的路由选择协议</h4><p>内部网关协议IGP(Interior Gateway Protocol)</p><ul><li>基于距离向量<ul><li>路由信息协议RIP - 在因特网上最早使用</li><li>内部网关路由协议IGRP - 是思科早期私有协议，已被EIGRP取代</li></ul></li><li>结合距离向量和链路状态<ul><li>增强型内部网关路由协议EIGRP - 思科私有的，用来取代IGRP的混合型路由协议</li></ul></li><li>基于链路状态<ul><li>开放式最短路径优先OSPF - 在各种网络中广泛使用</li><li>中间系统到中间系统IS-IS - 集成化IS-IS是ISP骨干网最长最常用的IGP协议</li></ul></li></ul><p>外部网关协议EGP</p><ul><li>边界网关协议BGP(Border Gateway Protocol)</li></ul><h4 id=路由器的基本结构><a class=anchor href=#路由器的基本结构>#</a> ! 路由器的基本结构</h4><p>路由器是一种具有多个输入端口和输出端口的专用计算机，用于转发分组，可分为两个部分</p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/17.webp alt=""></p><p>路由器的各端口还具有输入缓冲区和输出缓冲区</p><ul><li><p>输入缓冲区用来暂存新进路由器但还来不及处理的分组</p></li><li><p>输出缓冲区用来暂存已经处理完毕但还来不及发送的分组</p></li></ul><h4 id=路由信息协议riprouting-information-protocol><a class=anchor href=#路由信息协议riprouting-information-protocol>#</a> 路由信息协议RIP(Routing Information Protocol)</h4><p>一种内部网关协议，也是一种动态路由协议，基于距离向量算法，使用固定的跳数作为度量标准，选择跳数最少的路径作为最佳路径。</p><ul><li><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYj90PTguNiZhbXA7cD01MQ==">→路由信息协议RIP基本工作原理演示</span></li></ul><h4 id=开放最短路径优先ospf><a class=anchor href=#开放最短路径优先ospf>#</a> 开放最短路径优先OSPF</h4><p>一种内部网关协议，也是广泛使用的一种动态路由协议，基于链路状态算法，考虑了链路的带宽、延迟等因素来选择最佳路径。</p><ul><li>开放最短路径优先OSPF(Open Shortest Path First)<ul><li>是为克服RIP的缺点在1989年开发出来的</li><li>开发 - 不受某一家厂商控制，是公开发表</li><li>最短路径优先 - 是因为使用了Dijkstra的最短路径算法SPF</li></ul></li><li>OSPF是基于链路状态，由于采用了最短路径算法计算路由，在算法上不会产生路由环路</li><li>OSPF不限制网络规模，更新效率高，收敛速度快</li><li>链路状态是指本路由器和哪些路由器相邻，以及相应链路的代价<ul><li>代价用来表示费用，距离，时延，带宽等由网络管理人员决定</li></ul></li></ul><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/18.webp alt=""></p><ul><li>使用OSPF的每个路由器都会产生链路状态通告LSA(Link State Advertisement)，包含<ul><li>自连网络的链路状态信息</li><li>邻居路由器的链路状态信息</li></ul></li><li>LSA被封装在链路状态更新分组LSU中，采用洪泛法发送</li><li>使用OSPF的每个路由器都有一个链路状态数据库LSDB，用于存储LSA</li><li>通过各路由器洪泛法发送封装有自己LSA的LSU分组，各路由器的LSDB最终将达到一致</li><li>使用OSPF的各路由器基于LSDB进行最短路径优先SPF计算，构建出各自到达其他路由器的最短路径，即构建各自的路由表</li><li>OSPF有五种分组类型<ul><li>问候(Hello)分组 - 用来发现和维护邻居路由器的可达性</li><li>数据库描述(Database Description)分组 - 向邻居路由器给出自己的链路状态数据库中所有链路状态项目的摘要信息</li><li>链路状态请求(Link State Request)分组 - 向邻居路由器请求发送某些链路状态项目的详细信息</li><li>链路状态更新(Link State Update)分组 - 路由器所有这种分组将其链路进行洪泛发送，即用洪泛法对全网更新链路状态</li><li>链路状态确认(Link State Acknowledgment)分组 - 对链路状态更新分组的确认分组</li></ul></li><li>基本工作过程<ul><li>相邻路由器之间周期性发送问候分组 - 建立和维护关系</li><li>建立邻居关系后，发送路由器给邻居路由器发送数据库描述分组 - 将自己的链路状态数据库中的所有链路状态项目的摘要信息发送给邻居路由器</li><li>邻居路由器收到发送路由器发送的数据库描述分组后，发现自己缺少其中的某些链路状态项目便会发送链路状态请求分组</li><li>发送路由器收到后将邻居路由器所缺少的链路状态项目的详细信息封装在链路状态更新分组中并发送</li><li>邻居路由器收到后，将这些信息添加到自己的链路状态数据库中并发送链路状态确认分组</li><li>最终，相邻路由器的链路状态状态数据库将达到一致</li><li>每30分钟或线路状态发生变化时，路由器都会发送链路状态更新分组，收到该分组的路由器将洪泛转发该分组并给发送路由器法回链路状态确认分组</li></ul></li><li>OSPF在多点接入网络中路由器邻居关系的建立<ul><li>选举指定路由器DR(designated router)和备用的指定路由器BDR(backup designated router)</li><li>所有的非DR/BDR只与DR/BDR建立邻居关系</li><li>非DR/BDR之间通过DR/BDR交换信息</li></ul></li><li>OSPF把一个自治系统再划分为若干个更小的范围称为区域</li></ul><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/19.webp alt=""></p><h4 id=边界网关协议bgpborder-gateway-protocol><a class=anchor href=#边界网关协议bgpborder-gateway-protocol>#</a> 边界网关协议BGP(Border Gateway Protocol)</h4><p>一种用来在路由选择域之间交换网络层可达性信息(Network Layer Reachability Information - NLRI)的路由选择协议，具有高度的灵活性和可扩展性。</p><ul><li><p>外部网关协议EGP</p><ul><li>在不同自治系统内，度量路由的代价可能不同，使用代价作为度量来寻找最佳路由不可行</li><li>自治系统之间的路由选择必须考虑相关政策(政治，经济，安全等)</li></ul></li><li><p>BGP只能寻找一条能够到达目的网络且比较好的路由(不能兜圈子)，而并非寻找一条最佳路由</p></li><li><p>在配置BGP时，每个自治系统的管理员要选择至少一个路由器作为该自治系统的BGP发言人</p></li><li><p>BGP发言人 - BGP边界路由器</p></li><li><p>在不同自治系统的BGP发言人要交换路由信息，首先必须建立TCP连接，端口号为179</p><ul><li>在此TCP连接上交换BGP报文以建立BGP会话</li><li>利用BGP会话交换路由信息(例如，增加新的路由或撤销过时路由，以及报告出错的情况)</li><li>利用TCP连接交换路由信息的两个BGP发言人，彼此称为对方的邻站(neighbor)或对等站(peer)</li></ul></li><li><p>BGP发言人除了允许BGP外，还必须运行自己所在自治系统所使用的内部网关协议IGP(OSPF或RIP)</p></li><li><p>BGP发言人交换网络可达性的信息(要到达某个网络所要经过的一系列自治系统)后，各BGP发言人根据所采用的策略从收到的路由信息中找出到达各自治系统的较好的路由，也就是构造出树形结构，不存在回路的自治系统连通图</p></li><li><p>BGP适用于多级结构的因特网</p></li><li><p>BGP-4的四种报文</p><ul><li>OPEN(打开)报文 - 用来与相邻的另一个BGP发言人建立关系，使通信初始化</li><li>UPDATE(更新)报文 - 用来通告某一路由的信息，以及列出要撤销的多条路由</li><li>KEEPALIVE(保活)报文 - 用来周期性地证实邻站的连通性</li><li>NOTIFICATION(通知)报文 - 用来发送检测的差错</li></ul></li></ul><h3 id=ipv4数据报的首部格式><a class=anchor href=#ipv4数据报的首部格式>#</a> ! IPv4数据报的首部格式</h3><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/20.webp alt=""></p><ul><li><p>每一行由32个字节构成，每个小格子称为字段或者域，每个字段或某些字段的组合用来表达IP协议的相关功能</p></li><li><p>该范围内的IP数据报指IPv4数据报</p></li><li><p>版本</p><ul><li>占4比特，表示IP协议的版本</li><li>通信双方使用的IP协议的版本必须一致。目前广泛使用的IP协议版本号为4(IPv4)</li></ul></li><li><p>首部长度</p><ul><li>占4比特，表示IP数据报首部的长度，该字段的取值以4字节为单位</li><li>最小十进制取值为5，表示IP数据报首部只有20字节固定部分</li><li>最大十进制取值为15，表示IP数据报首部包含20字节固定部分和最大40字节可变部分</li></ul></li><li><p>可选字段</p><ul><li>长度从1个字节到40个字节不等。用来支持排错，测量及安全等措施</li><li>可选字段增加了IP数据报的功能，但这使IP数据报的首部长度可变。这增加了每一个路由器处理IP数据报的开销，实际很少被使用</li></ul></li><li><p>填充字段</p><ul><li>确保首部长度为4字节的整数倍，使用全0进行填充</li></ul></li><li><p>区分服务</p><ul><li>占8比特，用来获得更好的服务</li><li>在旧标准中叫服务类型，一直没有被使用</li><li>1998年，因特网工程任务组IETF把其名为区分服务，利用该字段的不同数字可提供不同等级的服务质量。只有在使用区分服务时，该字段才起作用，一般情况都不使用该字段</li></ul></li><li><p>总长度</p><ul><li><p>假如首部长度为<code>0101</code>，总长度为<code>0000001111111100</code></p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/computer-basic/network/part2/21.webp alt=""></p></li></ul></li><li><p>标识，标志和片偏移</p><ul><li>三个字段共用于IP数据报的分片</li><li>网际层封装出的IP数据报将在数据链路成封装成帧，每一种数据链路层协议都规定了帧的数据载荷的最大长度，称为最大传输单元(MTU)，当IP数据报长度超过MTU时无法封装，需要进行切片，将原IP数据报分片为更小的IP数据报，再将各分片IP数据报封装成帧</li></ul></li><li><p>标识</p><ul><li>占16比特，属于同一数据报的各分片数据报应该具有相同的标识</li><li>IP软件维持一个计数器，每产生一个数据报，计数器值加1，并将此值赋给标识字段</li></ul></li><li><p>标志</p><ul><li>占3个比特，各比特含义为<ul><li>DF位 - 1表示不允许分片，0表示允许分片</li><li>MF位 - 1表示后面还有分片，0表示这是最后一个分片</li><li>保留位 - 必须为0</li></ul></li></ul></li><li><p>片偏移</p><ul><li>占13比特，指出分片数据报的数据载荷部分偏移其在原数据报的位置有多少各单位</li><li>片偏移以8个字节为单位</li></ul></li><li><p>生存时间TTL</p><ul><li>占8比特，最初以秒为单位，最大生存周期为255秒</li><li>路由器转发IP数据报时，将IP数据报首部中的该字段的值减去IP数据报在本路由上所耗费的时间，若不为0就转发，否则就丢弃。</li><li>现在以跳数为单位，路由器转发IP数据报时，将IP数据报首部中的该字段减1，若不为0就转发，否则就丢弃。</li><li>用于防止IP数据报在网络中永远兜圈</li></ul></li><li><p>首部检验和</p><ul><li>占16比特，用来检测首部在传输过程中是否出现差错，比CRC检验码简单，称为因特网检验和</li><li>IP数据报每经过一个路由器，路由器都要重新计算首部检验和，因为某些字段(生存时间，标志，片偏移)的取值可能发生变化</li><li>IPv6中路由器不再计算首部校验和</li></ul></li><li><p>源IP地址和目的IP地址</p><ul><li>各占32比特，用来填写发送该IP数据报的源主机的IP地址和接收该IP数据报的目的主机的IP地址</li></ul></li></ul><h3 id=网际控制报文协议icmpinternet-control-message-protocol><a class=anchor href=#网际控制报文协议icmpinternet-control-message-protocol>#</a> 网际控制报文协议ICMP(Internet Control Message Protocol)</h3><p>一种用于传输网络状态和错误消息的协议，常用于网络诊断和故障排除。例如，Ping工具就使用了ICMP协议来测试网络连通性。</p><ul><li><p>为了更有效地转发IP数据报和提高交付成功的机会</p></li><li><p>主机或路由器使用ICMP来发送差错报告报文和询问报文</p></li><li><p>ICMP报文被封装在IP数据报中发送</p></li><li><p>ICMP差错报告报文有五种</p><ul><li><p>终点不可达</p><ul><li>当路由器或主机不能交付数据报时，就向源点发送终点不可达报文，根据ICMP的代码字段细分为<ul><li>目的主机不可达</li><li>目的协议不可达</li><li>目的端口不可达</li><li>目的网络未知</li><li>目的主机未知</li></ul></li></ul></li><li><p>源点抑制</p><ul><li>当路由器或主机由于拥塞而丢弃数据报时，就向源点发送源点抑制报文，使源点知道应当把数据的发送速率放慢</li></ul></li><li><p>时间超过</p><ul><li>当路由器收到一个目的IP地址不是自己的IP数据报，会将其生存时间TTL字段的值减1。若结果不为0，则将该IP数据报转发出去；若结果为0，除丢弃IP数据报外，还要向源点发送时间超过报文</li><li>另外，当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃，也会向源点发送时间超过报文</li></ul></li><li><p>参数问题</p><ul><li>当路由器或目的主机收到IP数据报后，根据其首部中的检验和字段发现首部在传输过程中出现了误码，就丢弃该数据报，并向源点发送参数问题报文</li></ul></li><li><p>改变路由(重定向)</p><ul><li>路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器(可通过更好的路由)</li></ul></li></ul></li><li><p>以下情况不应发送ICMP差错报告报文</p><ul><li>对ICMP差错报告报文不在发送ICMP差错报告报文</li><li>对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文</li><li>对具有多播地址的数据报都不发送ICMP差错报告报文</li><li>对具有特殊地址(<code>127.0.0.0</code>和<code>0.0.0.0</code>)的数据报不发生ICMP差错报告报文</li></ul></li><li><p>常用的ICMP询问报文</p><ul><li>回送请求和回答<ul><li>ICMP回送请求报文是由主机或路由器向一个特定的目的主机发出的询问。收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文</li><li>这种询问报文用来测试目的站是否可达及了解其有关状态</li></ul></li><li>时间戳请求和回答<ul><li>ICMP时间戳请求报文是请某个主机或路由器回答当前的日期和时间</li><li>在IMCP时间戳回答报文中有一个32为字符，其中写入的整数代表从1900年1月1日起到当前时刻一共有多少秒</li><li>这种询问用来进行时钟同步和测量时间</li></ul></li></ul></li><li><p>ICMP应用案例</p><ul><li>分组网间探测PING(Packet InterNet Groper)<ul><li>用来测试主机或路由器间的连贯性</li><li>应用层直接使用网际层的ICMP(没有通过运输层的TCP或UDP)</li><li>使用ICMP回送请求和回答报文</li></ul></li><li>跟踪路由<ul><li>用来测试IP数据报从源主机到达目的主机要经过哪些路由器</li><li>Windows版本<ul><li>tracert命令</li><li>应用层直接使用网际层ICMP</li><li>使用了ICMP回送请求和回答报文以及差错报告报文</li></ul></li><li>Unix版本<ul><li>traceroute命令</li><li>在运输层使用UDP协议</li><li>仅使用ICMP差错报告报文</li></ul></li></ul></li></ul></li></ul><h3 id=虚拟专用网vpn与网络地址转换nat><a class=anchor href=#虚拟专用网vpn与网络地址转换nat>#</a> ! 虚拟专用网VPN与网络地址转换NAT</h3><h4 id=虚拟专用网vpnvirtual-private-network><a class=anchor href=#虚拟专用网vpnvirtual-private-network>#</a> 虚拟专用网VPN(Virtual Private Network)</h4><ul><li>如何让两个专用网络通信<ul><li>租用电信公司的通信线路(租金高)</li><li><strong>利用公用的因特网</strong>作为本机构各专用网之间的通信载体，这种专用网又称为虚拟专用网</li></ul></li><li>虚拟专用网中的各主机所分配的地址应该是本机构可自由分配的专用地址，而不是需要申请的，在因特网上使用的公有地址</li><li>无需申请的，可自由分配的专用地址也称私有地址<ul><li>私有地址只能用于一个机构的内部通信，不能用于和因特网上的主机通信，即私有地址只能用作本地地址而不能用作全球地址</li><li>在因特网中的所有路由器，对目的地址是私有地址的IP数据报一律不进行转发</li></ul></li><li>同一机构内不同部门的内部网络所构成的虚拟专用网络VPN又称为<strong>内联网VPN</strong></li><li>一个机构的VPN需要有某些外部机构(合作伙伴)参加进来，这样的VPN就称为<strong>外联网VPN</strong></li><li>在外地工作的员工需要访问公司内部的专用网络时，只要在任何地点接入到因特网，允许驻留在员工PC中的VPN软件，在员工的PC和公司的主机之间建立VPN隧道，即可访问专用网络中的资源，这种VPN称为<strong>远程接入VPN</strong></li></ul><h4 id=网络地址转换协议natnetwork-address-translation><a class=anchor href=#网络地址转换协议natnetwork-address-translation>#</a> 网络地址转换协议NAT(Network Address Translation)</h4><ul><li>1994年提出了一种网络地址转换NAT的方法缓解IPv4地址空间即将耗尽的问题</li><li>NAT能使用内部专用地址的专用网络用户共享少量外部全球地址来访问因特网上的主机和资源</li><li>使用私有地址的主机如何与因特网上使用全球IP地址的主机进行通信<ul><li>需要在专用网络连接到因特网的路由器上安装NAT软件，装有NAT软件的路由器叫做NAT路由器，它至少有一个有效的外部全球IP地址</li><li>所有使用私有地址的主机在和外界通信时，都要在NAT路由器上将其私有地址转换成全球IP地址</li><li>如果NAT路由器具有N个全球IP地址，那么至多只能有N个内网主机能够同时和因特网上的主机通信</li></ul></li><li>由于绝大多数的网络应用都是使用运输层协议TCP或UDP来传送数据，因此可利用运输层的端口号和IP地址一起进行转换，这样，用一个全球IP地址就可以使多个拥有本地地址的主机同时和因特网上的主机进行通信。这种将端口号和IP地址一起进行转换的技术叫作<strong>网络地址与端口号转换NAPT</strong>(Network Address and Port Translation)</li><li>使用私有地址的主机不能直接充当因特网服务器</li><li>对于一些P2P网络应用，需要外网主机主动与内网主机进行通信，在通过NAT时会遇到问题，需要网络应用自己使用一些特殊的NAT穿越技术来解决问题</li><li>NAT对外网屏蔽了内网主机的网络地址，能为内网的主机提供一定的安全保护</li></ul><details class=info><summary>NAT的作用是什么？</summary><div><p>NAT协议的应用场景如同它的名称 - 网络地址转换，应用于内部网到外部网的地址转换过程中。具体地说，在一个小的子网(局域网，LAN)内，各主机使用的是同一个LAN下的IP地址，但在该LAN以外，在广域网(WAN)中，需要一个统一的IP地址来标识该LAN在整个Internet上的位置。</p><p>NAT主要用于在不同网络之间转换IP地址。它允许将私有IP地址(如在局域网中使用的IP地址)映射为公有IP地址(在互联网中使用的IP地址)或者反向映射，从而实现局域网内的多个设备通过单一公有IP地址访问互联网。</p><p>NAT不光可以缓解IPv4地址资源短缺的问题，还可以隐藏内部网络的实际拓扑结构，使得外部网络无法直接访问内部网络中的设备，从而提高了内部网络的安全性。</p><p><span class=exturl data-url="aHR0cHM6Ly9qYXZhZ3VpZGUuY24vY3MtYmFzaWNzL25ldHdvcmsvbmF0Lmh0bWw=">NAT协议详解(网络层)</span></p></div></details><div class=tags><a href=/tags/computer-basic/ rel=tag><i class="ic i-tag"></i> 计算机基础</a></div></div><footer><div class=meta><span class=item><span class=icon><i class="ic i-calendar-check"></i></span> <span class=text>更新于</span> <time title="修改时间：2025-01-09 17:58:14" itemprop=dateModified datetime=2025-01-09T17:58:14+08:00>2025-01-09</time></span><span class=item data-path=/computer-science/computer-basic/network/nwpart2/ title=阅读次数><span class=icon><i class="ic i-eye"></i></span> <span class=text>阅读次数</span><span class=waline-pageview-count></span> <span class=text>次</span></span></div><div id=copyright><ul><li class=author><strong>本文作者：</strong> ReverseSacle <i class="ic i-at"><em>@</em></i>逆转天平</li><li class=link><strong>本文链接：</strong> <a href=https://www.reversesacle.com/computer-science/computer-basic/network/nwpart2/ title=计算机网络-第二部分>https://www.reversesacle.com/computer-science/computer-basic/network/nwpart2/</a></li><li class=license><strong>版权声明：</strong> 本站所有文章除特别声明外，均采用 <span class=exturl data-url=aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class=post-nav><div class="item left"><a href=/computer-science/computer-basic/network/nwpart1/ itemprop=url rel=prev data-background-image=https:&#x2F;&#x2F;resa-imgs.oss-accelerate.aliyuncs.com&#x2F;img&#x2F;acg11.webp title=计算机网络-第一部分><span class=type>上一篇</span><span class=category><i class="ic i-flag"></i> 计算机网络</span><h3>计算机网络-第一部分</h3></a></div><div class="item right"><a href=/computer-science/computer-basic/network/nwpart3/ itemprop=url rel=next data-background-image=https:&#x2F;&#x2F;resa-imgs.oss-accelerate.aliyuncs.com&#x2F;img&#x2F;acg8.webp title=计算机网络-第三部分><span class=type>下一篇</span><span class=category><i class="ic i-flag"></i> 计算机网络</span><h3>计算机网络-第三部分</h3></a></div></div><div class=wrap id=comments><div id=waline-comment></div></div></div><div id=sidebar><div class=inner><div class=panels><div class=inner><div class="contents panel pjax" data-title=文章目录><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%89%A9%E7%90%86%E5%B1%82><span class=toc-number>1.</span> <span class=toc-text>物理层</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E8%BF%B0><span class=toc-number>1.1.</span> <span class=toc-text>! 概述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93><span class=toc-number>1.2.</span> <span class=toc-text>传输媒体</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%89%A9%E7%90%86%E5%B1%82%E5%8D%8F%E8%AE%AE%E4%B8%BB%E8%A6%81%E4%BB%BB%E5%8A%A1><span class=toc-number>1.3.</span> <span class=toc-text>物理层协议主要任务</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F><span class=toc-number>1.4.</span> <span class=toc-text>! 传输方式</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6><span class=toc-number>1.5.</span> <span class=toc-text>编码与调制</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F><span class=toc-number>1.6.</span> <span class=toc-text>信道的极限容量</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%A5%88%E6%B0%8F%E5%87%86%E5%88%99><span class=toc-number>1.6.1.</span> <span class=toc-text>奈氏准则</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E9%A6%99%E5%86%9C%E5%85%AC%E5%BC%8F><span class=toc-number>1.6.2.</span> <span class=toc-text>香农公式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82data-link-layer><span class=toc-number>2.</span> <span class=toc-text>数据链路层(Data Link Layer)</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E8%BF%B0-2><span class=toc-number>2.1.</span> <span class=toc-text>! 概述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%B8%89%E4%B8%AA%E9%87%8D%E8%A6%81%E9%97%AE%E9%A2%98><span class=toc-number>2.2.</span> <span class=toc-text>三个重要问题</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82><span class=toc-number>2.2.1.</span> <span class=toc-text>! 点对点信道的数据链路层</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82><span class=toc-number>2.2.2.</span> <span class=toc-text>广播信道的数据链路层</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7><span class=toc-number>2.3.</span> <span class=toc-text>封装成帧</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B><span class=toc-number>2.4.</span> <span class=toc-text>差错检测</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93><span class=toc-number>2.5.</span> <span class=toc-text>可靠传输</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E6%A6%82%E8%BF%B0-3><span class=toc-number>2.5.1.</span> <span class=toc-text>概述</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E4%B8%89%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6><span class=toc-number>2.5.2.</span> <span class=toc-text>三种实现机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEppppoint-to-point-protocol><span class=toc-number>2.6.</span> <span class=toc-text>点对点协议PPP(Point-to-Point Protocol)</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E6%A6%82%E8%BF%B0-4><span class=toc-number>2.6.1.</span> <span class=toc-text>! 概述</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%B8%A7%E6%A0%BC%E5%BC%8F><span class=toc-number>2.6.2.</span> <span class=toc-text>帧格式</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B><span class=toc-number>2.6.3.</span> <span class=toc-text>工作过程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5><span class=toc-number>2.7.</span> <span class=toc-text>媒体接入</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5><span class=toc-number>2.7.1.</span> <span class=toc-text>! 基本概念</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E9%9D%99%E6%80%81%E5%88%92%E5%88%86%E4%BF%A1%E9%81%93><span class=toc-number>2.7.2.</span> <span class=toc-text>静态划分信道</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%8A%A8%E6%80%81%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6-%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5><span class=toc-number>2.7.3.</span> <span class=toc-text>动态接入控制 - 随机接入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#mac%E5%9C%B0%E5%9D%80-ip%E5%9C%B0%E5%9D%80-arp%E5%8D%8F%E8%AE%AE><span class=toc-number>2.8.</span> <span class=toc-text>! MAC地址 &amp; IP地址 &amp; ARP协议</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E6%A6%82%E8%BF%B0-5><span class=toc-number>2.8.1.</span> <span class=toc-text>概述</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#mac%E5%9C%B0%E5%9D%80media-access-control-address><span class=toc-number>2.8.2.</span> <span class=toc-text>MAC地址(Media Access Control Address)</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AE%E5%9C%B0%E5%9D%80internet-protocol-address-ip%E5%9C%B0%E5%9D%80><span class=toc-number>2.8.3.</span> <span class=toc-text>网际协议地址(Internet Protocol address - IP地址)</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE%E5%8D%8F%E8%AE%AEaddress-resolution-protocol-arp><span class=toc-number>2.8.4.</span> <span class=toc-text>地址解析协议协议(Address Resolution Protocol - ARP)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%9B%86%E7%BA%BF%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB><span class=toc-number>2.9.</span> <span class=toc-text>集线器与交换机的区别</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AEstp><span class=toc-number>2.10.</span> <span class=toc-text>以太网交换机的生成树协议STP</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91vlan><span class=toc-number>2.11.</span> <span class=toc-text>虚拟局域网VLAN</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%BD%91%E7%BB%9C%E5%B1%82%E7%BD%91%E9%99%85%E5%B1%82network-layer><span class=toc-number>3.</span> <span class=toc-text>网络层&#x2F;网际层(Network layer)</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E8%BF%B0-6><span class=toc-number>3.1.</span> <span class=toc-text>概述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1><span class=toc-number>3.2.</span> <span class=toc-text>两种服务</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#ipv4%E5%9C%B0%E5%9D%80><span class=toc-number>3.3.</span> <span class=toc-text>! IPv4地址</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E6%A6%82%E8%BF%B0-7><span class=toc-number>3.3.1.</span> <span class=toc-text>概述</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80%E7%9A%84ipv4%E5%9C%B0%E5%9D%80><span class=toc-number>3.3.2.</span> <span class=toc-text>分类编址的IPv4地址</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%E7%9A%84ipv4%E5%9C%B0%E5%9D%80><span class=toc-number>3.3.3.</span> <span class=toc-text>划分子网的IPv4地址</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80%E7%9A%84ipv4%E5%9C%B0%E5%9D%80><span class=toc-number>3.3.4.</span> <span class=toc-text>无分类编址的IPv4地址</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#ipv4%E5%9C%B0%E5%9D%80%E7%9A%84%E5%BA%94%E7%94%A8%E8%A7%84%E5%88%92><span class=toc-number>3.3.5.</span> <span class=toc-text>IPv4地址的应用规划</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#ip%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E5%8F%91%E9%80%81%E5%92%8C%E8%BD%AC%E5%8F%91%E8%BF%87%E7%A8%8B><span class=toc-number>3.4.</span> <span class=toc-text>IP数据报的发送和转发过程</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE><span class=toc-number>3.5.</span> <span class=toc-text>! 静态路由配置</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE><span class=toc-number>3.6.</span> <span class=toc-text>路由选择协议</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E6%A6%82%E8%BF%B0-8><span class=toc-number>3.6.1.</span> <span class=toc-text>概述</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%B8%B8%E8%A7%81%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE><span class=toc-number>3.6.2.</span> <span class=toc-text>常见的路由选择协议</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84><span class=toc-number>3.6.3.</span> <span class=toc-text>! 路由器的基本结构</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AEriprouting-information-protocol><span class=toc-number>3.6.4.</span> <span class=toc-text>路由信息协议RIP(Routing Information Protocol)</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88ospf><span class=toc-number>3.6.5.</span> <span class=toc-text>开放最短路径优先OSPF</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AEbgpborder-gateway-protocol><span class=toc-number>3.6.6.</span> <span class=toc-text>边界网关协议BGP(Border Gateway Protocol)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#ipv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F><span class=toc-number>3.7.</span> <span class=toc-text>! IPv4数据报的首部格式</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEicmpinternet-control-message-protocol><span class=toc-number>3.8.</span> <span class=toc-text>网际控制报文协议ICMP(Internet Control Message Protocol)</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91vpn%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2nat><span class=toc-number>3.9.</span> <span class=toc-text>! 虚拟专用网VPN与网络地址转换NAT</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91vpnvirtual-private-network><span class=toc-number>3.9.1.</span> <span class=toc-text>虚拟专用网VPN(Virtual Private Network)</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%E5%8D%8F%E8%AE%AEnatnetwork-address-translation><span class=toc-number>3.9.2.</span> <span class=toc-text>网络地址转换协议NAT(Network Address Translation)</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title=系列文章><ul><li><a href=/computer-science/computer-basic/network/nwpart1/ rel=bookmark title=计算机网络-第一部分>计算机网络-第一部分</a></li><li class=active><a href=/computer-science/computer-basic/network/nwpart2/ rel=bookmark title=计算机网络-第二部分>计算机网络-第二部分</a></li><li><a href=/computer-science/computer-basic/network/nwpart3/ rel=bookmark title=计算机网络-第三部分>计算机网络-第三部分</a></li></ul></div><div class="overview panel" data-title=站点概览><div class=author itemprop=author itemscope itemtype=http://schema.org/Person><img class=image itemprop=image alt=ReverseSacle data-src=/images/avatar.webp><p class=name itemprop=name>ReverseSacle</p><div class=description itemprop=description>知识书库 & 学习点滴</div></div><nav class=state><div class="item posts"><a href=/archives/ ><span class=count>186</span> <span class=name>文章</span></a></div><div class="item categories"><a href=/categories/ ><span class=count>52</span> <span class=name>分类</span></a></div><div class="item tags"><a href=/tags/ ><span class=count>18</span> <span class=name>标签</span></a></div></nav><div class=social><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1JldmVyc2VTYWNsZQ==" title=https:&#x2F;&#x2F;github.com&#x2F;ReverseSacle><i class="ic i-github"></i></span><span class="exturl item email" data-url="bWFpbHRvOnByaXZhdGVAcmV2ZXJzZXNhY2xlLmNvbQ==" title=mailto:private@reversesacle.com><i class="ic i-envelope"></i></span></div><ul class=menu><li class=item><a href=/ rel=section><i class="ic i-home"></i> 首页</a></li><li class="item dropdown"><a href=javascript:void(0);><i class="ic i-feather"></i> 文章</a><ul class=submenu><li class=item><a href=/archives/ rel=section><i class="ic i-list-alt"></i> 归档</a></li><li class=item><a href=/categories/ rel=section><i class="ic i-th"></i> 分类</a></li><li class=item><a href=/tags/ rel=section><i class="ic i-tags"></i> 标签</a></li></ul></li><li class=item><a href=/about/ rel=section><i class="ic i-user"></i> 关于</a></li><li class=item><a href=/friend-links/ rel=section><i class="ic i-heart"></i> 友链</a></li></ul></div></div></div><ul id=quick><li class="prev pjax"><a href=/computer-science/computer-basic/network/nwpart1/ rel=prev title=上一篇><i class="ic i-chevron-left"></i></a></li><li class=up><i class="ic i-arrow-up"></i></li><li class=down><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href=/computer-science/computer-basic/network/nwpart3/ rel=next title=下一篇><i class="ic i-chevron-right"></i></a></li><li class=percent></li></ul></div></div><div class=dimmer></div></div></main><footer id=footer><div class=inner><div class=widgets><div class="rpost pjax"><h2>随机文章</h2><ul><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/link-list/ title="分类于 链表">链表</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/link-list/trick/ title=链表基础技巧>链表基础技巧</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/rust/ title="分类于 Rust">Rust</a></div><span><a href=/computer-science/programming/rust/rust-data-structure/linear-structure/link-stack/ title=Rust-链栈>Rust-链栈</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/dynamic-program/ title="分类于 动态规划">动态规划</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/dynamic-program/link/ title=动态规划-链路>动态规划-链路</a></span></li><li class=item><div class=breadcrumb><a href=/categories/general-science-and-technology/ title="分类于 通用科学技术">通用科学技术</a><i class="ic i-angle-right"></i> <a href=/categories/general-science-and-technology/pc/ title="分类于 通用技术之PC端">通用技术之PC端</a><i class="ic i-angle-right"></i> <a href=/categories/general-science-and-technology/pc/laptop/ title="分类于 笔记本">笔记本</a></div><span><a href=/general-science-and-technology/pc/laptop/laptop-clean/ title=笔记本的清洁>笔记本的清洁</a></span></li><li class=item><div class=breadcrumb><a href=/categories/general-science-and-technology/ title="分类于 通用科学技术">通用科学技术</a><i class="ic i-angle-right"></i> <a href=/categories/general-science-and-technology/smartphone/ title="分类于 通用技术之手机端">通用技术之手机端</a></div><span><a href=/general-science-and-technology/smartphone/del-builtin-softwares/ title=手机内置软件卸载>手机内置软件卸载</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/rust/ title="分类于 Rust">Rust</a></div><span><a href=/computer-science/programming/rust/rust-data-structure/linear-structure/doubly-link-list/ title=Rust-双向链表>Rust-双向链表</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/binary-tree/ title="分类于 二叉树">二叉树</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/binary-tree/sum/ title=二叉树-求和>二叉树-求和</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/android-development/ title="分类于 安卓开发">安卓开发</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/android-development/automation-testing/ title="分类于 自动化测试">自动化测试</a></div><span><a href=/computer-science/programming/android-development/automation-testing/appium-automated-testing/ title=Appium自动化测试>Appium自动化测试</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/binarysearch/ title="分类于 二分查找">二分查找</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/binarysearch/search/ title=二分查找-查找>二分查找-查找</a></span></li><li class=item><div class=breadcrumb><a href=/categories/general-science-and-technology/ title="分类于 通用科学技术">通用科学技术</a><i class="ic i-angle-right"></i> <a href=/categories/general-science-and-technology/pc/ title="分类于 通用技术之PC端">通用技术之PC端</a></div><span><a href=/general-science-and-technology/pc/win-question/ title=windows综合问题>windows综合问题</a></span></li></ul></div><div><h2>最新评论</h2><ul id=waline-recent></ul></div></div><div class=status><div class=copyright>&copy; 2021 – <span itemprop=copyrightYear>2025</span><span class=with-love><i class="ic i-sakura rotate"></i></span> <span class=author itemprop=copyrightHolder>ReverseSacle @ ReverseSacle-Blog</span></div><div class=count><i class="ic i-clock" aria-hidden=true></i> <span id=time align=center>载入时间中...<script defer>var now=new Date;function createtime(){var n=new Date("2021-11-16 22:30:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("time").innerHTML="已经过 "+dnum+" 天 "+hnum+" 小时 "+mnum+" 分 "+snum+" 秒 "}setInterval("createtime()",250)</script></span><span class=post-meta-item-icon>|&nbsp<i class="ic i-chart-area"></i></span> <span title=站点总字数>2.1m 字</span> <span class=post-meta-item-icon>|&nbsp<i class="ic i-coffee"></i></span> <span title=站点阅读时长>40:40</span></div></div></div></footer></div><script data-config>var LOCAL={path:"computer-science/computer-basic/network/nwpart2/",favicon:{show:"ReverseSacle-Blog",hide:"ReverseSacle-Blog"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},waline:!0,copy_tex:!0,katex:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src=https://polyfill.alicdn.com/v3/polyfill.min.js></script><script src=https://jd.reversesacle.com/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1.16.0/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js></script><script src=/js/app.js></script></body></html>