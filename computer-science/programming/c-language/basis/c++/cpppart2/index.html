<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content=#222><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=icon type=image/ico sizes=48x48 href=/images/favicon.ico><link rel=alternate type=application/rss+xml title=逆转天平 href=https://www.reversesacle.com/rss.xml><link rel=alternate type=application/atom+xml title=逆转天平 href=https://www.reversesacle.com/atom.xml><link rel=alternate type=application/json title=逆转天平 href=https://www.reversesacle.com/feed.json><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel=stylesheet href=/css/app.css><meta name=description content=编程语言><link rel=canonical href=https://www.reversesacle.com/computer-science/programming/c-language/basis/c++/cpppart2/ ><title>C++基础知识-第二部分-C++98/03标准 - C++基础 - C语言 - 编程 - 计算机科学 | ReverseSacle-Blog</title><meta name=generator content="Hexo 6.3.0"></head><body itemscope itemtype=http://schema.org/WebPage><div id=loading><div class=dotloader><div class=dot></div><div class=dot></div><div class=dot></div><div class=dot></div><div class=dot></div></div></div><div id=container><header id=header itemscope itemtype=http://schema.org/WPHeader><div class=inner><div id=brand><div class=pjax><h1 itemprop="name headline">C++基础知识-第二部分-C++98/03标准</h1><div class=meta><span class=item title="创建时间：2022-02-18 16:53:22"><span class=icon><i class="ic i-calendar"></i></span> <span class=text>发表于</span> <time itemprop="dateCreated datePublished" datetime=2022-02-18T16:53:22+08:00>2022-02-18</time></span><span class=item title=本文字数><span class=icon><i class="ic i-pen"></i></span> <span class=text>本文字数</span> <span>27k</span> <span class=text>字</span></span><span class=item title=阅读时长><span class=icon><i class="ic i-clock"></i></span> <span class=text>阅读时长</span> <span>32 分钟</span></span></div></div></div><nav id=nav><div class=inner><div class=toggle><div class=lines role=navigation aria-label=切换导航栏><span class=line></span><span class=line></span><span class=line></span></div></div><ul class=menu><li class="item title"><a href=/ rel=start>ReverseSacle-Blog</a></li></ul><ul class=right><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id=imgs class=pjax><ul><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg11.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg5.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg10.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg15.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg18.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg16.webp></li></ul></div></header><div id=waves><svg class=waves xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewBox="0 24 150 28" preserveAspectRatio=none shape-rendering=auto><defs><path id=gentle-wave d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352z"/></defs><g class=parallax><use xlink:href=#gentle-wave x=48 y=0 /><use xlink:href=#gentle-wave x=48 y=3 /><use xlink:href=#gentle-wave x=48 y=5 /><use xlink:href=#gentle-wave x=48 y=7 /></g></svg></div><main><div class=inner><div id=main class=pjax><div class="article wrap"><div class=breadcrumb itemscope itemtype=https://schema.org/BreadcrumbList><i class="ic i-home"></i> <span><a href=/ >首页</a></span><i class="ic i-angle-right"></i> <span itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/ itemprop=item rel=index title="分类于 计算机科学"><span itemprop=name>计算机科学</span></a><meta itemprop=position content=1></span><i class="ic i-angle-right"></i> <span itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/programming/ itemprop=item rel=index title="分类于 编程"><span itemprop=name>编程</span></a><meta itemprop=position content=2></span><i class="ic i-angle-right"></i> <span itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/programming/c-language/ itemprop=item rel=index title="分类于 C语言"><span itemprop=name>C语言</span></a><meta itemprop=position content=3></span><i class="ic i-angle-right"></i> <span class=current itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/programming/c-language/cpp-basic/ itemprop=item rel=index title="分类于 C++基础"><span itemprop=name>C++基础</span></a><meta itemprop=position content=4></span></div><article itemscope itemtype=http://schema.org/Article class="post block" lang=zh-CN><link itemprop=mainEntityOfPage href=https://www.reversesacle.com/computer-science/programming/c-language/basis/c++/cpppart2/ ><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content=/images/avatar.webp><meta itemprop=name content=ReverseSacle><meta itemprop=description content="所见即所得，所思即所行, 知识书库 & 学习点滴"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content=逆转天平></span><div class="body md" itemprop=articleBody><h2 id=异常处理机制><a class=anchor href=#异常处理机制>#</a> 异常处理机制</h2><p>异常处理机制允许在代码中标识和处理错误。异常处理主要涉及三个关键字<code>try</code>、<code>catch</code>、<code>throw</code>。</p><ul><li><p>在<code>try</code>中编写可能引发异常的代码。如果在<code>try</code>块中发生异常，程序会立即跳转到与异常类型匹配的<code>catch</code>块。如果在<code>try</code>块中发生异常，程序将立即跳转到与异常类型匹配的第一个<code>catch</code>块。如果没有匹配的<code>catch</code>块，异常将传播到上一层的<code>try</code>块或导致程序终止</p></li><li><p><code>catch</code>块用于捕获并处理<code>try</code>块中抛出的异常。每个<code>catch</code>块可以捕获特定类型的异常，并提供相应的处理逻辑。也可以使用省略号(<code>...</code>)捕获任何类型的异常</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token comment">// 一些可能引发异常的代码</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ExceptionType1 e1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token comment">// 处理 ExceptionType1 类型的异常</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ExceptionType2 e2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token comment">// 处理 ExceptionType2 类型的异常</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token comment">// 处理其他类型的异常</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p><code>throw</code>用于在程序中显式引发异常。可以抛出各种类型的异常，包括内置类型、自定义类型或标准库提供的异常类型</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">throw</span> <span class="token function">MyException</span><span class="token punctuation">(</span><span class="token string">"An error occurred"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>异常可以是任何类型，但通常推荐使用派生自<code>std::exception</code>的类型。标准库中有一些常见的异常类，如<code>std::runtime_error</code>、<code>std::logic_error</code>等</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdexcept></span></span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">throw</span> std<span class="token double-colon punctuation">::</span><span class="token function">runtime_error</span><span class="token punctuation">(</span><span class="token string">"A runtime error occurred"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul><figure class="highlight cpp"><figcaption data-lang=C++><span>例子</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdexcept></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">void</span> <span class="token function">processValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> </pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token keyword">try</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>            <span class="token keyword">throw</span> std<span class="token double-colon punctuation">::</span><span class="token function">runtime_error</span><span class="token punctuation">(</span><span class="token string">"Negative value encountered"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=11></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Value: "</span> <span class="token operator">&lt;&lt;</span> value <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>exception<span class="token operator">&amp;</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=13></td><td><pre>        std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Exception caught: "</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=16></td><td><pre></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num=18></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token function">processValue</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// No exception</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token function">processValue</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Exception caught: Negative value encountered</span></pre></td></tr><tr><td data-num=21></td><td><pre></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=23></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><details class=info><summary>如何处理在申请动态内存时找不到足够大的内存块？</summary><div><ul><li><p>对于<code>malloc</code>来说，需要判断其是否返回空指针，如果是则马上用<code>return</code>语句终止该函数或者<code>exit</code>终止该程序</p></li><li><p>对于<code>new</code>来说，默认抛出异常，所以可以使用<code>try...catch...</code>代码块的方式</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10000000</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>bad_alloc <span class="token operator">&amp;</span>memExp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    cerr <span class="token operator">&lt;&lt;</span> memExp<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>还可以使用<code>set_new_handler</code>函数的方式</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">void</span> <span class="token function">no_more_memory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num=2></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>    cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Unable to satisfy request for memory"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token function">set_new_handler</span><span class="token punctuation">(</span>no_more_memory<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10000000</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>在这种方式里，如果<code>new</code>不能满足内存分配请求，<code>no_more_memory</code>会被反复调用，所以<code>set_new_handler</code>函数必须完成以下事情</p><ul><li>让更多内存可被使用 - 可以在程序一开始执行就分配一大块内存，之后当<code>set_new_handler</code>第一次被调用，就将这些内存释放还给程序使用</li><li>使用另一个<code>set_new_handler</code></li><li>卸除<code>set_new_handler</code> - 返回空指针，这样<code>new</code>就会抛出异常</li><li>直接抛出<code>bad_alloc</code>异常</li><li>调用<code>abort</code>或<code>exit</code></li></ul></li></ul></div></details><h2 id=预处理概述><a class=anchor href=#预处理概述>#</a> 预处理概述</h2><p><strong>C++98标准后的头文件</strong></p><ul><li>C标准库 - 老版的有<code>.h</code>后缀，新版无，增加了字符c的前缀，例如<code>&lt;stdio.h&gt;</code>变为<code>&lt;cstdio&gt;</code>，不指定std命名空间也可用</li><li>C++标准库 - 老版的有<code>.h</code>后缀，新版无，老版已全被弃用只能用新版，必须指定std命名空间</li></ul><p><strong>extern关键字</strong> - 在头文件中声明全局变量，防止重复定义</p><ul><li>当<code>extern</code>修饰变量或函数时，表示变量或函数的定义在其他文件中，提示编译器在其他模块中寻找其定义</li><li>当使用<code>extern C</code>时，会提示编译器在编译函数时按照C的规则去翻译相应的函数名，如果按照<code>C++</code>的规则，函数名会被翻译得变得面目全非，因为<code>C++</code>支持函数的重载</li></ul><details class=info><summary>extern "C"是什么？</summary><div><p>在<code>C++</code>中extern还有另外一种作用，用于指示<code>C或者C++</code>函数的调用规范。比如在<code>C++</code>中调用C库函数，就需要在<code>C++</code>程序中用<code>extern C</code>声明要引用的函数。这是给链接器用的，告诉链接器在链接的时候用C函数规范来链接。主要原因是<code>C++</code>和C程序编译完成后在目标代码中命名规则不同，用此来解决名字匹配的问题。</p></div></details><p><strong>宏</strong></p><p>当用<code>C++</code>编译程序时，宏<code>__cplusplus</code>就会被定义，用于区别编译器。</p><h2 id=命名空间><a class=anchor href=#命名空间>#</a> 命名空间</h2><p>创建命名空间 - <code>namespace 命名空间的名字&#123;//类、函数、模板、变量的声明和定义&#125;</code></p><p>创建命名空间的别名 - <code>namespace 别名 = 原名</code></p><p>命名空间用于解决项目中的名称冲突问题。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token comment">// 命名空间</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">namespace</span> mworld</pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>     <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">// 全局变量</span></pre></td></tr><tr><td data-num=8></td><td><pre>     <span class="token keyword">class</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num=9></td><td><pre>     <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=10></td><td><pre>     <span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=11></td><td><pre>         <span class="token keyword">int</span> age</pre></td></tr><tr><td data-num=12></td><td><pre>     <span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=13></td><td><pre>         <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=15></td><td><pre>     <span class="token keyword">void</span> <span class="token function">testshow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"tsetshow"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=16></td><td><pre>     <span class="token keyword">void</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person Show"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=18></td><td><pre></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token comment">// 命名空间的使用声明方式一</span></pre></td></tr><tr><td data-num=22></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> mworld<span class="token double-colon punctuation">::</span>a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=23></td><td><pre>    mworld<span class="token double-colon punctuation">::</span><span class="token function">testshow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=24></td><td><pre>    mworld<span class="token double-colon punctuation">::</span>Person p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=25></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=26></td><td><pre>    </pre></td></tr><tr><td data-num=27></td><td><pre>    <span class="token comment">// 方式二</span></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token keyword">using</span> <span class="token keyword">namespace</span> mword<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=29></td><td><pre>    <span class="token function">testshow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=30></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=31></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id=强制类型转换><a class=anchor href=#强制类型转换>#</a> 强制类型转换</h2><p><strong>static_cast</strong></p><ul><li><p>语法 - <code>static_cast&lt;目标类型&gt;(表达式)</code></p></li><li><p>用于常规类型转换(例如数值类型)，非const到const的转换，以及基类到派生类的指针或引用的转换</p></li><li><p>不执行运行时类型检查</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre>	<span class="token keyword">int</span> l2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre>	<span class="token keyword">long</span> l3 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">long</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=6></td><td><pre>	</pre></td></tr><tr><td data-num=7></td><td><pre>	<span class="token keyword">void</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=8></td><td><pre>	<span class="token keyword">double</span><span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=9></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ul><p><strong>reinterpret_cast</strong></p><ul><li><p>语法 - <code>reinterpret_cast&lt;目标类型&gt;(表达式)</code></p></li><li><p>目标类型和表达式中必须有一个是指针(或引用)类型</p></li><li><p>可改变指针(或引用)类型</p></li><li><p>可将指针(或引用)转成整形变量，指针和整形的字节数必须相同</p></li><li><p>将整形变量转成指针(或引用)</p></li><li><p>执行底层的、不安全的类型转换，通常用于将指针或引用转换为不同类型的指针或引用，但不提供类型安全性检查</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">int</span> myInt <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">double</span><span class="token operator">*</span> doublePtr <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reinterpret_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myInt<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul><p><strong>const_cast</strong></p><ul><li><p>语法 - <code>const_cast&lt;目标类型&gt;(表达式)</code></p></li><li><p>用于在某些情况下移除对象的<code>const</code>属性</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">const</span> <span class="token keyword">int</span> myConstValue <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">*</span> constPtr <span class="token operator">=</span> <span class="token operator">&amp;</span>myConstValue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token comment">// 去除const属性</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span><span class="token operator">*</span> nonConstPtr <span class="token operator">=</span> <span class="token generic-function"><span class="token function">const_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>constPtr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=6></td><td><pre></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token comment">// 现在可以通过非常量指针修改值</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token operator">*</span>nonConstPtr <span class="token operator">=</span> <span class="token number">43</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul><p><strong>dynamic_cast</strong></p><ul><li><p>语法 - <code>dynamic_cast&lt;目标类型&gt;(表达式)</code></p></li><li><p>用于多态类型的转换，可以将派生类指针转换为基类指针</p></li><li><p>可用于判断是否可以安全地将对象的地址赋值给特定类型的指针</p></li><li><p>主要用于安全地在类层次结构中进行向下转型(派生类到基类的转换)。它在运行时执行类型检查，如果转换不安全，则返回空指针(对于指针)或抛出<code>std::bad_cast</code>异常(对于引用)</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre>Base<span class="token operator">*</span> basePtr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Derived</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=2></td><td><pre>Derived<span class="token operator">*</span> derivedPtr <span class="token operator">=</span> <span class="token generic-function"><span class="token function">dynamic_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Derived<span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>basePtr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul><details class=info><summary>为什么要引入四种强制类型转换？</summary><div><p>c语言可以在任意类型之间进行转换，但是有一点就是不安全。可能会不经意间将指向const对象的指针转换成非const对象的指针，也有可能将基类对象指针转换成派生类对象的指针。因此这四种强制类型转换是的代码更加严谨规范。</p><p>引入四种强制类型转换主要是为了提供更灵活、更细粒度的类型转换机制，以满足不同的编程需求。每种类型转换都有其特定的应用场景和用途，从而让程序员可以更精确地控制类型的转换过程。</p></div></details><h2 id=模板泛型><a class=anchor href=#模板泛型>#</a> 模板(泛型)</h2><h3 id=概念><a class=anchor href=#概念>#</a> 概念</h3><p>基本语法 - <code>template&lt;typename T&gt;</code></p><ul><li>template - 模板创建声明</li><li>typename - 表明其后面的符号为数据类型，可用class字符替代</li><li>T - 通用数据类型</li></ul><p><strong>注意事项</strong></p><ul><li><p>模板必须能确定类型才能使用</p></li><li><p>采用自动类型推导时，必须能推导出一致数据类型才可使用</p></li><li><p>尽量使用显示指定类型</p></li><li><p>可以为类的成员函数创建模板，但不能是虚函数和析构函数</p></li><li><p>支持多个通用数据类型</p><figure class="highlight cpp"><figcaption data-lang=C++><span>模板</span><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWV0NDExYjczWi8/cD0xNzAmc3BtX2lkX2Zyb209cGFnZURyaXZlciZ2ZF9zb3VyY2U9MTg0NWFmNThkZTJkN2VlOWY4OGZkMmEzZWFmMjhkNGI=">案例</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">void</span> <span class="token function">_swap</span><span class="token punctuation">(</span>T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span>T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    T temp <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    a <span class="token operator">=</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    b <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=11></td><td><pre></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"func调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=14></td><td><pre></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token keyword">float</span> c <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">,</span>d <span class="token operator">=</span> <span class="token number">2.0f</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token comment">// 自动类型推导</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token function">_swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token function">_swap</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=22></td><td><pre>    </pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token comment">// 显示指定类型</span></pre></td></tr><tr><td data-num=24></td><td><pre>    <span class="token generic-function"><span class="token function">_swap</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token generic-function"><span class="token function">_swap</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=26></td><td><pre>    </pre></td></tr><tr><td data-num=27></td><td><pre>    <span class="token comment">//_swap(a,c);// Err, 无法推导出具体类型</span></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token comment">//func();// Err，模板无法确定类型</span></pre></td></tr><tr><td data-num=29></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=30></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ul><details class=info><summary>typename关键字有什么用？</summary><div><p><code>typename</code>是<code>C++</code>中的一个关键字，主要用于在模板编程中标识一个依赖于模板参数的类型。<code>typename</code>的主要用途是告诉编译器某个名字是一个类型而不是变量。</p><p>在模板中，当依赖于模板参数的名称是一个类型时，为了让编译器明确该名称表示的是一个类型，通常需要使用<code>typename</code>关键字。</p></div></details><details class=info><summary>模板和继承，这个两个的区别是什么？</summary><div><p>模板是泛型编程的工具，允许编写与类型无关的代码；而继承是面向对象编程的一个核心概念，用于代码复用和建立类型的层次结构。</p><p>模板是在编译时处理的，为每种类型生成专门的代码；继承则是一种运行时特性，特别是涉及多态和虚函数时。</p><p>模板用于创建能够处理多种类型的通用代码；继承用于创建基于现有类的新类，扩展其功能或修改其行为。</p></div></details><h3 id=函数模板><a class=anchor href=#函数模板>#</a> 函数模板</h3><p>函数模板允许编写与类型无关的函数。使用函数模板，可以创建一个通用的函数定义，该定义可以与多种数据类型一起工作。当使用该模板时，编译器会根据所使用的具体类型自动生成相应的函数实例。</p><p><strong>普通函数与函数模板</strong></p><p><strong>区别</strong></p><ul><li><p>普通函数调用可以发生隐式类型推导</p></li><li><p>函数模板采用自动类型推导，不可以发生隐式类型推导</p></li><li><p>函数模板采用显示指定类型，可以发生隐式类型推导</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token comment">// 普通函数</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=6></td><td><pre></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token comment">// 函数模板</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">int</span> <span class="token function">tadd</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> T b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token char">'a'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=15></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    </pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token comment">// Err，自动类型推导，不可以发生隐式类型推导(T有两个类型可选)</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token comment">//cout &lt;&lt; tadd(a,c) &lt;&lt; endl;</span></pre></td></tr><tr><td data-num=19></td><td><pre>    </pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token comment">// 显示指定类型，可以发生隐式类型推导</span></pre></td></tr><tr><td data-num=21></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token generic-function"><span class="token function">tadd</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=23></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ul><p><strong>调用规则</strong></p><ul><li><p>函数模板与普通函数同名，优先调用普通函数</p></li><li><p>同名时，可用空模板参数列表强制调用函数模板</p></li><li><p>函数模板可以发生重载</p></li><li><p>如果函数模板可以产生更好的匹配，优先调用函数模板</p></li><li><p>函数模板与普通函数尽量不要同名</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment">void mprint1(int a,int b);</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token comment"></span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token comment">template&lt;class T></span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token comment">void mprint1(T a,T b) &#123; cout &lt;&lt; "函数模板调用" &lt;&lt; endl; &#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token comment">*/</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token keyword">void</span> <span class="token function">mprint</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"普通函数"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=12></td><td><pre></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token keyword">void</span> <span class="token function">mprint</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span>T b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"函数模板调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=15></td><td><pre></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token keyword">void</span> <span class="token function">mprint</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span>T b<span class="token punctuation">,</span>T c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"重载函数模板调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=18></td><td><pre></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token comment">// 声明和模板实现冲突，既可以匹配普通函数的声明，也可以匹配函数模板的实现</span></pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token comment">//mprintf1(a,b);// Err</span></pre></td></tr><tr><td data-num=24></td><td><pre>    <span class="token function">mprintf</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 优先调用普通函数</span></pre></td></tr><tr><td data-num=25></td><td><pre>    </pre></td></tr><tr><td data-num=26></td><td><pre>    <span class="token generic-function"><span class="token function">mprintf</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 利用空模板强制调用模板函数</span></pre></td></tr><tr><td data-num=27></td><td><pre>    <span class="token function">mprintf</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 函数模板重载，函数调用</span></pre></td></tr><tr><td data-num=28></td><td><pre>    </pre></td></tr><tr><td data-num=29></td><td><pre>    <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token char">'a'</span><span class="token punctuation">,</span>d <span class="token operator">=</span> <span class="token char">'b'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=30></td><td><pre>    <span class="token function">mprintf</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 不用发生隐式类型推导，更好的匹配</span></pre></td></tr><tr><td data-num=31></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=32></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ul><p><strong>局限性</strong></p><p>有些特定数据类型，需要用具体化方式做特殊实现。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token keyword">int</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    string name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span>string y<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">a</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">name</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token keyword">bool</span> <span class="token function">comp</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span>T b<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=19></td><td><pre></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token comment">// 具体化模板，可以解决自定义类型的通用性</span></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">></span> <span class="token keyword">bool</span> <span class="token function">comp</span><span class="token punctuation">(</span>Person <span class="token operator">&amp;</span>a<span class="token punctuation">,</span>Person <span class="token operator">&amp;</span>b<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>name <span class="token operator">==</span> p2<span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> p1<span class="token punctuation">.</span>age <span class="token operator">==</span> p2<span class="token punctuation">.</span>age<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=24></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=26></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=27></td><td><pre></pre></td></tr><tr><td data-num=28></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=29></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=30></td><td><pre>    Person <span class="token function">p1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"xx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=31></td><td><pre>    Person <span class="token function">p2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"xxx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=32></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">comp</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=33></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"true"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=34></td><td><pre>   	<span class="token keyword">else</span></pre></td></tr><tr><td data-num=35></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"false"</span> <span class="token operator">&lt;&lt;</span> end<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=36></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=37></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><details class=info><summary>为什么模板成员函数不能是虚函数？</summary><div><p>虚函数需要在类定义时就确定下来，以便构建虚函数表。但是，模板成员函数的具体类型和实现直到模板被实例化时才能确定。这种不确定性与虚函数需要预先确定的要求相冲突。</p><p>如果允许模板成员函数是虚的，那么理论上每个模板实例化都可能产生一个不同的函数。这将要求虚函数表动态地适应所有可能的模板实例化，这在技术上是不可行的，因为虚函数表的结构在编译时就已固定。</p></div></details><h3 id=类模板><a class=anchor href=#类模板>#</a> 类模板</h3><p>类模板用于创建能够操作任何类型数据的泛型类。允许在编写类定义时使用类型参数，这些参数在实例化类时被具体的类型所替代。类模板提供了一种创建可重用、类型无关的类的方法。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">NameType</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">AgeType</span><span class="token operator">></span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=9></td><td><pre>    NameType name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    AgeType age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span>NameTyep name<span class="token punctuation">,</span>AgeType age<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=13></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">=</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=17></td><td><pre></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=20></td><td><pre>    Person<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token string">"xxx"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><details class=info><summary>类模板中成员函数创建时间是怎样的？</summary><div><p>在类模板中，成员函数不会在模板本身被定义时实例化。相反，它们是在首次使用时才实例化的。这意味着如果某个成员函数从未被使用，那么它将永远不会被实例化。</p><p>当创建类模板的一个实例，并且调用其中的某个成员函数时，这个成员函数才会被实例化。实例化是针对特定的模板参数进行的。例如，如果有一个模板类 <code>MyTemplate&lt;T&gt;</code>，当创建 <code>MyTemplate&lt;int&gt;</code> 的实例并调用它的成员函数时，那个成员函数会以 <code>int</code> 作为 <code>T</code> 被实例化。</p></div></details><details class=info><summary>类模板中成员函数实例化的具体过程？</summary><div><p>当编译器遇到对类模板成员函数的首次调用时，它会生成该函数的实例。这包括用实际的模板参数替换模板参数，并生成相应的机器代码。</p><p>如果同一个类模板的成员函数被多种不同的模板参数调用，编译器会为每种类型的参数生成一个单独的函数实例。</p></div></details><h4 id=类模板与函数模板的区别><a class=anchor href=#类模板与函数模板的区别>#</a> 类模板与函数模板的区别</h4><ul><li>类模板没有自动类型推导</li><li>类模板可以有默认参数，不支持函数的默认模板参数</li></ul><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment">// 默认参数</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">NameType</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">AgeType</span> <span class="token operator">=</span> <span class="token keyword">int</span><span class="token operator">></span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=10></td><td><pre>    NameType name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    AgeType age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span>NameType name<span class="token punctuation">,</span>AgeType age<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=14></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=15></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">=</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=18></td><td><pre></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token comment">//Person p("xxx",10);// 类模板没有自动类型推导</span></pre></td></tr><tr><td data-num=22></td><td><pre>    Person<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token string">"xxx"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id=类模板中成员函数的调用时机><a class=anchor href=#类模板中成员函数的调用时机>#</a> 类模板中成员函数的调用时机</h4><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person1</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token keyword">void</span> <span class="token function">showperson1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"person1"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=9></td><td><pre></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person2</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token keyword">void</span> <span class="token function">showperson2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"person2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=15></td><td><pre></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token keyword">class</span> <span class="token class-name">myclass</span></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=19></td><td><pre>    T obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token keyword">void</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> obj<span class="token punctuation">.</span><span class="token function">showperson1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token keyword">void</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> obj<span class="token punctuation">.</span><span class="token function">showperson2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=23></td><td><pre></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=26></td><td><pre>    myclass<span class="token operator">&lt;</span>Person1<span class="token operator">></span> m1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=27></td><td><pre>    m1<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token comment">//m1.func2();// Err</span></pre></td></tr><tr><td data-num=29></td><td><pre>    </pre></td></tr><tr><td data-num=30></td><td><pre>    myclass<span class="token operator">&lt;</span>Person2<span class="token operator">></span> m2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=31></td><td><pre>    <span class="token comment">//m1.func1();// Err</span></pre></td></tr><tr><td data-num=32></td><td><pre>    m1<span class="token punctuation">.</span><span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=33></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=34></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id=类模板对象做函数参数><a class=anchor href=#类模板对象做函数参数>#</a> 类模板对象做函数参数</h4><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=9></td><td><pre>    T2 age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    T1 name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span>T1 a<span class="token punctuation">,</span>T2 b<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">age</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">name</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token keyword">void</span> show<span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-></span>name <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token comment">// 指定传入类型</span></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token keyword">void</span> <span class="token function">printp1</span><span class="token punctuation">(</span>Person<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> p<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=17></td><td><pre></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token comment">// 参数模板化</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token keyword">void</span> <span class="token function">printp2</span><span class="token punctuation">(</span>Person<span class="token operator">&lt;</span>T1<span class="token punctuation">,</span>T2<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=22></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token comment">// 查看模板参数类型</span></pre></td></tr><tr><td data-num=24></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"T1的类型："</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>T1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=26></td><td><pre></pre></td></tr><tr><td data-num=27></td><td><pre><span class="token comment">// 整个类，模板化</span></pre></td></tr><tr><td data-num=28></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num=29></td><td><pre><span class="token keyword">void</span> <span class="token function">printp3</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>p<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=30></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=31></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=32></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"T1的类型："</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=33></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=34></td><td><pre></pre></td></tr><tr><td data-num=35></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=36></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=37></td><td><pre>    Person<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p1</span><span class="token punctuation">(</span><span class="token string">"xx1"</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=38></td><td><pre>    <span class="token function">printp1</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=39></td><td><pre>    </pre></td></tr><tr><td data-num=40></td><td><pre>    Person<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p2</span><span class="token punctuation">(</span><span class="token string">"xx2"</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=41></td><td><pre>    <span class="token function">printp2</span><span class="token punctuation">(</span>P2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=42></td><td><pre>    </pre></td></tr><tr><td data-num=43></td><td><pre>    Person<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p2</span><span class="token punctuation">(</span><span class="token string">"xx3"</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=44></td><td><pre>    <span class="token function">printp3</span><span class="token punctuation">(</span>P3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=45></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=46></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id=类模板与继承><a class=anchor href=#类模板与继承>#</a> 类模板与继承</h4><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    T m<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=9></td><td><pre></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token comment">// Err，子类继承父类时，</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token comment">// 当父类为类模板，要指定出父类中T的类型</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token comment">class Son: public Base</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token comment">&#123;</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token comment">&#125;;</span></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token comment">*/</span></pre></td></tr><tr><td data-num=17></td><td><pre></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num=20></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=21></td><td><pre></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token comment">// 灵活指定父类中T的类型，子类也需变为类模板</span></pre></td></tr><tr><td data-num=23></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span>  <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son2</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span><span class="token operator">&lt;</span><span class="token class-name">T2</span><span class="token operator">></span></span></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=26></td><td><pre>    T1 obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=27></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=28></td><td><pre></pre></td></tr><tr><td data-num=29></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=30></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=31></td><td><pre>    Son2<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">></span> s2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=32></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=33></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id=成员函数的类外实现><a class=anchor href=#成员函数的类外实现>#</a> 成员函数的类外实现</h4><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=9></td><td><pre>    T1 name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    T2 age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span>T1 a<span class="token punctuation">,</span>T2 b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token class-name">Person</span><span class="token operator">&lt;</span>T1<span class="token punctuation">,</span>T2<span class="token operator">></span><span class="token double-colon punctuation">::</span><span class="token function">Person</span><span class="token punctuation">(</span>T1 a<span class="token punctuation">,</span>T2 b<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token keyword">this</span><span class="token operator">-></span>name <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">=</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=22></td><td><pre></pre></td></tr><tr><td data-num=23></td><td><pre><span class="token comment">// 成员函数</span></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token keyword">void</span> <span class="token class-name">Person</span><span class="token operator">&lt;</span>T1<span class="token punctuation">,</span>T2<span class="token operator">></span><span class="token double-colon punctuation">::</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=26></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=27></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-></span>name <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=28></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id=类模板的分文件编写><a class=anchor href=#类模板的分文件编写>#</a> 类模板的分文件编写</h4><p>由于模板的特性，编译器必须在编译时了解模板的完整定义才能生成模板的实例。这就意味着通常情况下，模板类的声明和实现都需要放在同一个文件中，通常是一个头文件。</p><p><code>.hpp</code>指包含类模板和类模板函数实现。</p><details class=info><summary>Person.hpp</summary><div><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=10></td><td><pre>    T1 name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    T2 age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span>T1 a<span class="token punctuation">,</span>T2 b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=15></td><td><pre></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token class-name">Person</span><span class="token operator">&lt;</span>T1<span class="token punctuation">,</span>T2<span class="token operator">></span><span class="token double-colon punctuation">::</span><span class="token function">Person</span><span class="token punctuation">(</span>T1 a<span class="token punctuation">,</span>T2 b<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token keyword">this</span><span class="token operator">-></span>name <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">=</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=23></td><td><pre></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token comment">// 成员函数</span></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=26></td><td><pre><span class="token keyword">void</span> <span class="token class-name">Person</span><span class="token operator">&lt;</span>T1<span class="token punctuation">,</span>T2<span class="token operator">></span><span class="token double-colon punctuation">::</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=27></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=28></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-></span>name <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=29></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></div></details><details class=info><summary>Person.cpp</summary><div><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Person.hpp"</span></span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    Person<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token string">"xx"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=6></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></div></details><details class=info><summary>模板类为什么不能像非模板类那样分开？</summary><div><p><strong>模板实例化的需求</strong> - 当编译器遇到模板实例化的代码(例如，创建一个模板类的对象)时，它需要知道模板的完整定义，以便生成相应的代码。如果实现在另一个文件中，编译器在处理包含模板实例化的源文件时可能无法访问到这些实现。</p><p><strong>模板是编译时实体</strong> - 模板不是像常规函数和类那样的链接时实体，它们是在编译时根据使用情况进行实例化的。</p></div></details><h4 id=类模板与友元><a class=anchor href=#类模板与友元>#</a> 类模板与友元</h4><p>推荐使用类内实现。</p><figure class="highlight cpp"><figcaption data-lang=C++><span>友元</span><span class=exturl data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWV0NDExYjczWi8/cD0xODImc3BtX2lkX2Zyb209cGFnZURyaXZlciZ2ZF9zb3VyY2U9MTg0NWFmNThkZTJkN2VlOWY4OGZkMmEzZWFmMjhkNGI=">案例</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment">// 全局函数的类外实现声明前置条件，类声明</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=8></td><td><pre></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token comment">// 全局函数的类外的实现</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token keyword">void</span> <span class="token function">printPerson2</span><span class="token punctuation">(</span>Person<span class="token operator">&lt;</span>T1<span class="token punctuation">,</span>T2<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>name <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=12></td><td><pre></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token comment">// 全局函数的类内实现</span></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token keyword">friend</span> <span class="token keyword">void</span> <span class="token function">printPerson</span><span class="token punctuation">(</span>Person<span class="token operator">&lt;</span>T1<span class="token punctuation">,</span>T2<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>name <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=18></td><td><pre></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token comment">// 全局函数的类外实现声明，加入空模板参数列表</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token keyword">friend</span> <span class="token keyword">void</span> <span class="token generic-function"><span class="token function">printPerson2</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>Person<span class="token operator">&lt;</span>T1<span class="token punctuation">,</span>T2<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=22></td><td><pre>    T1 name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=23></td><td><pre>    T2 age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=24></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span>T1 a<span class="token punctuation">,</span>T2 b<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">name</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">age</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  </pre></td></tr><tr><td data-num=25></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=26></td><td><pre></pre></td></tr><tr><td data-num=27></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=28></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=29></td><td><pre>    Person<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token string">"xxx"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=30></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=31></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id=标准模板库standard-template-library-stl><a class=anchor href=#标准模板库standard-template-library-stl>#</a> 标准模板库(standard Template Library - STL)</h2><p>STL从广义上分为 - 容器，算法，迭代器</p><p>容器和算法之间通过迭代器无缝链接。</p><h3 id=stl六大组件><a class=anchor href=#stl六大组件>#</a> STL六大组件</h3><p><strong>容器(Containers)</strong></p><p>各种数据结构，例如，序列式容器vector、list、deque、关联式容器set、map、multiset、multimap。用来存放数据。从实现的角度来看，STL容器是一种<code>class template</code>。</p><p><strong>算法(algorithms)</strong></p><p>各种常用算法，例如，sort、search、copy、erase。从实现的角度来看，STL算法是一种<code>function template</code>。任何一个STL算法，都需要获得由一对迭代器所标识的区间，用来表示操作范围。这一对迭代器所标识的区间都是前闭后开区间，例如<code>[first, last)</code>。</p><p><strong>迭代器(iterators)</strong></p><p>容器与算法之间的胶合剂，是所谓的<strong>泛型指针</strong>。共有五种类型，以及其他衍生变化。从实现的角度来看，迭代器是一种将<code>operator *</code>、<code>operator-&gt;</code>、<code>operator++</code>、<code>operator--</code>等指针相关操作进行重载的<code>class template</code>。所有STL容器都有自己专属的迭代器，只有容器本身才知道如何遍历自己的元素。</p><p>原生指针<code>native pointer</code>也是一种迭代器。</p><p><strong>仿函数(functors)</strong></p><p>行为类似函数，可作为算法的某种策略(policy)。从实现的角度来看，仿函数是一种重载了<code>operator()</code>的<code>class或class template</code>。一般的函数指针也可视为狭义的仿函数。</p><p><strong>适配器(adapters)</strong></p><p>也称配接器，一种用来修饰容器、仿函数、迭代器接口的东西。例如，STL提供的queue和stack，虽然看似容器，但其实只能算是一种容器配接器，因为它们的底部完全借助deque，所有操作都由底层的deque提供。改变 functors接口的，称为<code>function adapter</code>；改变container接口的，称为<code>container adapter</code>；改变iterator接口的，称为<code>iterator adapter</code>。</p><p><strong>空间配置器(allocators)</strong></p><p>负责空间配置与管理。从实现的角度来看，空间配置器是一个实现了动态空间配置、空间管理、空间释放的<code>class template</code>。</p><p><strong>六大组件的交互关系</strong></p><ul><li><strong>容器</strong>通过<strong>空间配置器</strong>取得数据储存空间</li><li><strong>算法</strong>通过<strong>迭代器</strong>存取<strong>容器</strong>内容</li><li><strong>仿函数</strong>可以协助<strong>算法</strong>完成不同的策略变化</li><li><strong>配接器</strong>可以修饰或套接<strong>仿函数</strong></li></ul><details class=info><summary>迭代器与普通指针有什么区别？</summary><div><ul><li><p>服务对象不同 - 迭代器主要面对STL容器提供服务，为STL容器提供遍历，删除等功能，而指针主要面向内存底层进行服务</p></li><li><p>安全性 - 迭代器可以提供更高级的安全性，因为它们可以对越界和空指针进行检查，并且可以被设计为只读或者只写。而普通指针则需要程序员自行管理边界和空指针的情况</p></li><li><p>可移植性 - 迭代器在不同容器和数据结构之间具有更好的可移植性，因为它们隐藏了底层的实现细节，使得代码更易于重用。普通指针则依赖于具体的数据结构和内存布局</p></li><li><p>功能扩展 - 标准库定义了多种类型的迭代器，这些迭代器具有不同的特性和功能，如输入迭代器、输出迭代器、前向迭代器、双向迭代器和随机访问迭代器等。这些迭代器提供了更丰富的功能和算法支持。普通指针则只能进行基本的指针运算</p></li></ul><p>总的来说，迭代器提供了更丰富的抽象和功能，使得它们在许多场景下比普通指针更加灵活和安全。</p></div></details><h3 id=容器><a class=anchor href=#容器>#</a> 容器</h3><h4 id=序列式容器><a class=anchor href=#序列式容器>#</a> 序列式容器</h4><p><strong><code>array&lt;T, N&gt;</code>静态数组</strong></p><p>需包含头文件 - <code>#include&lt;array&gt;</code></p><p>底层实现相对简单，它本质上是一个普通的C数组的封装，但提供了一些额外的功能和类型安全性。</p><p>大小在编译时确定，不可动态改变，使用时需要指定元素的类型和数组的大小。</p><p>不提供<code>empty()</code>函数，因为大小是在编译时确定的，总是非空的。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;array></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    std<span class="token double-colon punctuation">::</span>array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token operator">></span> arr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    std<span class="token double-colon punctuation">::</span>array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span> arr1 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 使用列表初始化</span></pre></td></tr><tr><td data-num=9></td><td><pre>    std<span class="token double-colon punctuation">::</span>array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span> arr2<span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 使用聚合语法初始化</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre>    arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span><span class="token comment">// 通过索引访问元素</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token keyword">int</span> value <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 使用at()时，是进行范围检查的访问</span></pre></td></tr><tr><td data-num=13></td><td><pre>    size_t size <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取数组的大小</span></pre></td></tr><tr><td data-num=14></td><td><pre></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> it <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> arr<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    	<span class="token comment">// 使用迭代器访问元素</span></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=18></td><td><pre></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token comment">// 支持比较操作符，可以比较两个std::array的大小关系。</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr1 <span class="token operator">&lt;</span> arr2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    	<span class="token comment">// arr1小于arr2</span></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=23></td><td><pre></pre></td></tr><tr><td data-num=24></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong><code>vector&lt;T&gt;</code>动态数组</strong></p><p>需包含头文件 - <code>#include&lt;vector&gt;</code></p><p>基于动态数组实现，它在内存中分配一块连续的内存空间，用于存储元素。能够自动调整大小以适应存储的元素数量。使用<code>new[]</code>和<code>delete[]</code>等操作符来进行内存的动态分配和释放。当<code>vector</code>的容量不足以存储新元素时，会分配更大的内存块，并将原有元素移动到新的内存中，然后释放旧的内存。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> container1<span class="token punctuation">;</span><span class="token comment">// 声明，创建一个空的整数类型的vector</span></pre></td></tr><tr><td data-num=8></td><td><pre>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> container2 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 声明并初始化</span></pre></td></tr><tr><td data-num=9></td><td><pre>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> container4 <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#123;</span><span class="token number">1</span>，<span class="token number">2</span><span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 创建一个二维的vector</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token comment">// 创建一个与另外一个vector一样的vector</span></pre></td></tr><tr><td data-num=12></td><td><pre>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">anotherVector</span><span class="token punctuation">(</span>container2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">container3</span><span class="token punctuation">(</span>container2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    container3 <span class="token operator">=</span> container1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=15></td><td><pre></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">int</span> frontElement <span class="token operator">=</span> container3<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取第一个元素</span></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token keyword">int</span> backElement <span class="token operator">=</span> container3<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取最后一个元素</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token keyword">int</span> _backElement <span class="token operator">=</span> container4<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 二维空间中一维其中一个</span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token keyword">int</span> element1 <span class="token operator">=</span> container3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 下标访问</span></pre></td></tr><tr><td data-num=20></td><td><pre></pre></td></tr><tr><td data-num=21></td><td><pre>    size_t size <span class="token operator">=</span> container3<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取容器中元素的个数</span></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token keyword">bool</span> isEmpty <span class="token operator">=</span> container3<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 判断容器是否为空</span></pre></td></tr><tr><td data-num=23></td><td><pre></pre></td></tr><tr><td data-num=24></td><td><pre>    container3<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 在末尾插入元素</span></pre></td></tr><tr><td data-num=25></td><td><pre>    container3<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 移除末尾元素</span></pre></td></tr><tr><td data-num=26></td><td><pre></pre></td></tr><tr><td data-num=27></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>element <span class="token operator">:</span> myVector<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=28></td><td><pre>        <span class="token comment">// 对每个元素进行操作</span></pre></td></tr><tr><td data-num=29></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=30></td><td><pre></pre></td></tr><tr><td data-num=31></td><td><pre>    container3<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>container3<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 在指定位置插入元素</span></pre></td></tr><tr><td data-num=32></td><td><pre>    container3<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>container3<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 移除指定位置的元素</span></pre></td></tr><tr><td data-num=33></td><td><pre></pre></td></tr><tr><td data-num=34></td><td><pre>    <span class="token function">reverse</span><span class="token punctuation">(</span>container3<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>container3<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 反转内容</span></pre></td></tr><tr><td data-num=35></td><td><pre>    container3<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 清空容器中的所有元素</span></pre></td></tr><tr><td data-num=36></td><td><pre></pre></td></tr><tr><td data-num=37></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=38></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><ins><strong>剩下的</strong></ins></p><ul><li><p><code>deque&lt;T&gt;</code></p></li><li><p><code>list&lt;T&gt;</code></p></li><li><p><code>forward_list&lt;T&gt;</code></p></li></ul><h4 id=关联式容器><a class=anchor href=#关联式容器>#</a> 关联式容器</h4><p><font size=3><ins><strong>Map(映射)容器</strong></ins></font></p><p><code>map&lt;K,T&gt;</code></p><p>需包含头文件 - <code>#include&lt;map&gt;</code></p><p>基于红黑树(Red-Black Tree)实现，保持键值对的有序性，提供了一种键值对的存储方式，元素是添加的顺序排列的。红黑树是一种自平衡的二叉搜索树，通过一些规则来确保树的深度不会过深，从而保持基本的平衡，提供了较快的查找、插入和删除操作。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;map></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    map<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> map1<span class="token punctuation">;</span><span class="token comment">// 创建map</span></pre></td></tr><tr><td data-num=8></td><td><pre></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// 添加元素</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token operator">++</span>map1<span class="token punctuation">[</span><span class="token char">'d'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 'd'不存在，它会创建一个新的键值对，值为1</span></pre></td></tr><tr><td data-num=11></td><td><pre>    map1<span class="token punctuation">[</span><span class="token char">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    map1<span class="token punctuation">[</span><span class="token char">'b'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre>    map1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token char">'c'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 插入元素</span></pre></td></tr><tr><td data-num=14></td><td><pre></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token keyword">int</span> _size <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// map的元素个数</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">bool</span> _empty <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// map是否为空</span></pre></td></tr><tr><td data-num=17></td><td><pre></pre></td></tr><tr><td data-num=18></td><td><pre>    map1<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 删除元素</span></pre></td></tr><tr><td data-num=19></td><td><pre></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token comment">// 查找元素</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token keyword">auto</span> it <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> map1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=23></td><td><pre>        <span class="token comment">// 找到了元素</span></pre></td></tr><tr><td data-num=24></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=25></td><td><pre>        <span class="token comment">// 未找到元素</span></pre></td></tr><tr><td data-num=26></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=27></td><td><pre></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token comment">// 查找元素并统计个数</span></pre></td></tr><tr><td data-num=29></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>map1<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token char">'c'</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=30></td><td><pre>        <span class="token comment">// 处理</span></pre></td></tr><tr><td data-num=31></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=32></td><td><pre>    </pre></td></tr><tr><td data-num=33></td><td><pre>    <span class="token comment">// 遍历元素</span></pre></td></tr><tr><td data-num=34></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> it <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> map1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=35></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> it<span class="token operator">-></span>first <span class="token operator">&lt;&lt;</span> <span class="token string">": "</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-></span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=36></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=37></td><td><pre>    </pre></td></tr><tr><td data-num=38></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> pair <span class="token operator">:</span> map1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=39></td><td><pre>        <span class="token comment">// 对每个键值对进行操作</span></pre></td></tr><tr><td data-num=40></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=41></td><td><pre>    </pre></td></tr><tr><td data-num=42></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=43></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>unordered_map&lt;K,T&gt;</code></p><p>需包含头文件 - <code>#include&lt;unordered_map&gt;</code></p><p>基于哈希表实现，因此元素的存储顺序并不是按键的大小排序的。提供了常数时间的平均复杂度的查找、插入和删除操作。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unordered_map></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    unordered_map<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> map1<span class="token punctuation">;</span><span class="token comment">// 创建map</span></pre></td></tr><tr><td data-num=8></td><td><pre></pre></td></tr><tr><td data-num=9></td><td><pre></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token comment">// 添加元素</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token operator">++</span>map1<span class="token punctuation">[</span><span class="token char">'d'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 'd'不存在，它会创建一个新的键值对，值为1</span></pre></td></tr><tr><td data-num=12></td><td><pre>    map1<span class="token punctuation">[</span><span class="token char">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre>    map1<span class="token punctuation">[</span><span class="token char">'b'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    map1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token char">'c'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 插入元素</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token comment">/************************************************/</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token comment">// 带副作用添加元素方法</span></pre></td></tr><tr><td data-num=17></td><td><pre>    map1<span class="token punctuation">[</span><span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 当元素不存在时，默认创建一个新的元素</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>map1<span class="token punctuation">[</span><span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token comment">/************************************************/</span></pre></td></tr><tr><td data-num=20></td><td><pre>    </pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token keyword">int</span> _size <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// map的元素个数</span></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token keyword">bool</span> _empty <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// map是否为空</span></pre></td></tr><tr><td data-num=23></td><td><pre></pre></td></tr><tr><td data-num=24></td><td><pre>    map1<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 删除元素</span></pre></td></tr><tr><td data-num=25></td><td><pre></pre></td></tr><tr><td data-num=26></td><td><pre>    <span class="token comment">// 查找元素</span></pre></td></tr><tr><td data-num=27></td><td><pre>    <span class="token keyword">auto</span> it <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> map1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=29></td><td><pre>        <span class="token comment">// 找到了元素</span></pre></td></tr><tr><td data-num=30></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=31></td><td><pre>        <span class="token comment">// 未找到元素</span></pre></td></tr><tr><td data-num=32></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=33></td><td><pre></pre></td></tr><tr><td data-num=34></td><td><pre>    <span class="token comment">// 查找元素并统计个数</span></pre></td></tr><tr><td data-num=35></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>map1<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token char">'c'</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=36></td><td><pre>        <span class="token comment">// 处理</span></pre></td></tr><tr><td data-num=37></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=38></td><td><pre>    </pre></td></tr><tr><td data-num=39></td><td><pre>    <span class="token comment">// 遍历元素</span></pre></td></tr><tr><td data-num=40></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> it <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> map1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=41></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> it<span class="token operator">-></span>first <span class="token operator">&lt;&lt;</span> <span class="token string">": "</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-></span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=42></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=43></td><td><pre>    </pre></td></tr><tr><td data-num=44></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> pair <span class="token operator">:</span> map1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=45></td><td><pre>        <span class="token comment">// 对每个键值对进行操作</span></pre></td></tr><tr><td data-num=46></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=47></td><td><pre></pre></td></tr><tr><td data-num=48></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=49></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><p><code>multimap&lt;K, T&gt;</code></p></li><li><p><code>unordered_multimap&lt;K, T&gt;</code></p></li></ul><p><font size=3><ins><strong>Set(集合)容器</strong></ins></font></p><p><code>set&lt;T&gt;</code></p><p>需头文件 - <code>#include&lt;set&gt;</code></p><p>基于红黑树，是一个有序的关联容器，它存储唯一的值，并根据元素的值自动进行排序，默认为升序。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;set></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> set1<span class="token punctuation">;</span><span class="token comment">// 声明</span></pre></td></tr><tr><td data-num=8></td><td><pre></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// 插入值，不允许插入相同的元素</span></pre></td></tr><tr><td data-num=10></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 重复的值被自动屏蔽</span></pre></td></tr><tr><td data-num=13></td><td><pre></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token comment">// 查找特定元素</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token keyword">auto</span> it <span class="token operator">=</span> set1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> set1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=17></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Element found: "</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=19></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Element not found."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    </pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token comment">// 遍历元素</span></pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> it <span class="token operator">=</span> set1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> set1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=24></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=26></td><td><pre>    </pre></td></tr><tr><td data-num=27></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 删除元素</span></pre></td></tr><tr><td data-num=28></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 清空multiset</span></pre></td></tr><tr><td data-num=29></td><td><pre>    </pre></td></tr><tr><td data-num=30></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=31></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>multiset&lt;T&gt;</code></p><p>需头文件 - <code>#include&lt;set&gt;</code></p><p>基于红黑树，是一个有序的关联容器，它允许存储相同的值，并根据元素的值自动进行排序，默认为升序。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;set></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    multiset<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> set1<span class="token punctuation">;</span><span class="token comment">// 声明</span></pre></td></tr><tr><td data-num=8></td><td><pre></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// 插入值，允许插入相同的元素</span></pre></td></tr><tr><td data-num=10></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token comment">// 查找特定元素</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token keyword">auto</span> it <span class="token operator">=</span> set1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> set1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=17></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Element found: "</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=19></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Element not found."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    </pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token comment">// 遍历元素</span></pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> it <span class="token operator">=</span> set1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> set1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=24></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=26></td><td><pre>    </pre></td></tr><tr><td data-num=27></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 删除元素</span></pre></td></tr><tr><td data-num=28></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 清空multiset</span></pre></td></tr><tr><td data-num=29></td><td><pre>    </pre></td></tr><tr><td data-num=30></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=31></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>unordered_set&lt;T&gt;</code></p><p>需头文件 - <code>#include&lt;unordered_set&gt;</code></p><p>基于哈希表实现，这意味着元素的存储顺序是不确定的，但在平均情况下，插入、删除和查找操作的时间复杂度都是O(1)。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unordered_set></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    unordered_set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> set1<span class="token punctuation">;</span><span class="token comment">// 声明</span></pre></td></tr><tr><td data-num=8></td><td><pre></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// 插入值，允许插入相同的元素</span></pre></td></tr><tr><td data-num=10></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token comment">// 查找特定元素</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token keyword">auto</span> it <span class="token operator">=</span> set1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> set1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=17></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Element found: "</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=19></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Element not found."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    </pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token comment">// 遍历元素</span></pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> it <span class="token operator">=</span> set1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> set1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=24></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=26></td><td><pre>    </pre></td></tr><tr><td data-num=27></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 删除元素</span></pre></td></tr><tr><td data-num=28></td><td><pre>    set1<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 清空multiset</span></pre></td></tr><tr><td data-num=29></td><td><pre>    </pre></td></tr><tr><td data-num=30></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=31></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><code>unordered_multimap&lt;K, T&gt;</code></li></ul><h4 id=容器适配器><a class=anchor href=#容器适配器>#</a> 容器适配器</h4><p><font size=3><ins><strong>Stack</strong></ins></font></p><p><code>stack&lt;T&gt;</code></p><p>需包含头文件 - <code>#include&lt;stack&gt;</code></p><p>使用<code>std::deque</code>(双端队列)作为底层容器，提供了一个后进先出(LIFO)的数据结构，即栈。栈不提供迭代器，因此无法像使用容器那样使用迭代器进行遍历。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stack></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    stack<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> stack1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=8></td><td><pre></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// 压入元素 - 压栈</span></pre></td></tr><tr><td data-num=10></td><td><pre>    stack1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    stack1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    stack1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token comment">// 弹出元素 - 出栈</span></pre></td></tr><tr><td data-num=15></td><td><pre>    stack1<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=16></td><td><pre></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token keyword">int</span> topElement <span class="token operator">=</span> stack1<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 访问栈顶元素</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token keyword">bool</span> empty <span class="token operator">=</span> stack1<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 检查栈是否为空</span></pre></td></tr><tr><td data-num=19></td><td><pre>    size_t stackSize <span class="token operator">=</span> stack1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取栈内元素个数</span></pre></td></tr><tr><td data-num=20></td><td><pre></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><font size=3><ins><strong>Queue(队列)</strong></ins></font></p><p><code>queue&lt;T&gt;</code></p><p>需头文件 - <code>#include&lt;queue&gt;</code></p><p>可以使用<code>std::deque</code>作为底层容器队列，也可以使用<code>std::list</code>作为底层容器。是一种先进先出(FIFO)的数据结构，即最先进入队列的元素最先被取出，不提供迭代器，因此不能直接通过迭代访问队列中的元素。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;queue></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> queue1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    </pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// 插入元素 - 入队</span></pre></td></tr><tr><td data-num=10></td><td><pre>    queue1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    queue1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    queue1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token comment">// 弹出元素 - 出队</span></pre></td></tr><tr><td data-num=15></td><td><pre>    queue1<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 移除队首元素</span></pre></td></tr><tr><td data-num=16></td><td><pre></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token keyword">int</span> front <span class="token operator">=</span> queue1<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 访问队首元素</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token keyword">bool</span> empty <span class="token operator">=</span> queue1<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 检查队是否为空</span></pre></td></tr><tr><td data-num=19></td><td><pre>    size_t stackSize <span class="token operator">=</span> queue1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取队内元素个数</span></pre></td></tr><tr><td data-num=20></td><td><pre>    </pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>priority_queue&lt;T&gt;</code></p><p>需包含头文件 - <code>#include&lt;queue&gt;</code></p><p>优先级队列，基于堆(heap)数据结构实现，属于队列(queue)的一种特殊形式，其中的元素按照一定的优先级进行排序，默认情况下是按照元素的大小进行排序，即大的元素具有更高的优先级。</p><p>需注意，<code>priority_queue</code>不提供迭代器，因此不能直接遍历。修改队列中的元素可能会破坏堆的性质。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;queue></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment">// 包含函数对象头文件</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;functional></span></span></pre></td></tr><tr><td data-num=5></td><td><pre></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> pq<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token comment">// 使用Lambda表达式定义比较函数，小顶堆</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token keyword">auto</span> cmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> left <span class="token operator">></span> right<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre>    priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token keyword">decltype</span><span class="token punctuation">(</span>cmp<span class="token punctuation">)</span><span class="token operator">></span> <span class="token function">minHeap</span><span class="token punctuation">(</span>cmp<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token keyword">bool</span> _empty <span class="token operator">=</span> pq<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 判断队列是否为空</span></pre></td></tr><tr><td data-num=15></td><td><pre></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token comment">// 将元素插入队列</span></pre></td></tr><tr><td data-num=17></td><td><pre>    pq<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=18></td><td><pre>    pq<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=19></td><td><pre>    pq<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=20></td><td><pre></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token comment">// 获取队列中优先级最高的元素，但不移除它，输出：4</span></pre></td></tr><tr><td data-num=22></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Top element: "</span> <span class="token operator">&lt;&lt;</span> pq<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=23></td><td><pre></pre></td></tr><tr><td data-num=24></td><td><pre>    pq<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 弹出队列中优先级最高的元素</span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token comment">// 返回队列中元素的数量</span></pre></td></tr><tr><td data-num=26></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Size: "</span> <span class="token operator">&lt;&lt;</span> pq<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=27></td><td><pre></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=29></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=算法库><a class=anchor href=#算法库>#</a> 算法库</h3><p><font size=4><ins><strong>std::accumulate - 累加求和</strong></ins></font></p><p>需头文件 - <code>#include&lt;numeric&gt;</code></p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> numbers <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment">// 使用std::accumulate对数组元素求和</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">int</span> sum <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">accumulate</span><span class="token punctuation">(</span>numbers<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> numbers<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id=函数对象仿函数><a class=anchor href=#函数对象仿函数>#</a> 函数对象(仿函数)</h3><ul><li>函数对象在使用时，可以像普通函数一样被调用，可以有参数，可以有返回值</li><li>函数对象可以有自己的状态</li><li>函数对象可以作为参数传递</li></ul><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stirng></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token keyword">int</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span>    </pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token keyword">int</span> count<span class="token punctuation">;</span> <span class="token comment">// 内部状态</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token function">MyPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">this</span><span class="token operator">-></span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    </pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token keyword">int</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>string str<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=19></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> str <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=20></td><td><pre>        <span class="token operator">++</span><span class="token keyword">this</span><span class="token operator">-></span>count<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=23></td><td><pre></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token keyword">void</span> <span class="token function">doPrint</span><span class="token punctuation">(</span>MyPrint<span class="token operator">&amp;</span> mp<span class="token punctuation">,</span>string test<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">mp</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=25></td><td><pre></pre></td></tr><tr><td data-num=26></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=27></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token comment">// 像普通函数一样被调用</span></pre></td></tr><tr><td data-num=29></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token function">MyAdd</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=30></td><td><pre>    </pre></td></tr><tr><td data-num=31></td><td><pre>    <span class="token comment">// 有自己的状态，统计调用次数</span></pre></td></tr><tr><td data-num=32></td><td><pre>    MyPrint mp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=33></td><td><pre>    <span class="token function">mp</span><span class="token punctuation">(</span><span class="token string">"xx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=34></td><td><pre>    <span class="token function">mp</span><span class="token punctuation">(</span><span class="token string">"xx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=35></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> mp<span class="token punctuation">.</span>count <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=36></td><td><pre>    </pre></td></tr><tr><td data-num=37></td><td><pre>    <span class="token comment">// 作为参数传递</span></pre></td></tr><tr><td data-num=38></td><td><pre>    <span class="token function">doPrint</span><span class="token punctuation">(</span>mp<span class="token punctuation">,</span><span class="token string">"xx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=39></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=40></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id=谓词><a class=anchor href=#谓词>#</a> 谓词</h4><p>返回值是bool数据类型的仿函数，称为谓词。</p><p>如果<code>operator()</code>接受一个参数，叫做一元谓词。</p><p>如果<code>operator()</code>接受两个参数，叫做二元谓词。</p><figure class="highlight cpp"><figcaption data-lang=C++><span>一元谓词</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">class</span> <span class="token class-name">GreaterFive</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> val <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=13></td><td><pre>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> cache<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cache<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=15></td><td><pre>    </pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token comment">// GreaterFive()表示匿名函数对象</span></pre></td></tr><tr><td data-num=17></td><td><pre>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> <span class="token function">find_if</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cache<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">GreaterFive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>it <span class="token operator">==</span> cache<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=19></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Not Found"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token keyword">else</span></pre></td></tr><tr><td data-num=21></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Found"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=22></td><td><pre>    </pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang=C++><span>二元谓词</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">class</span> <span class="token class-name">comp</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> a <span class="token operator">></span> b<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=13></td><td><pre>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> cache<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">--</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cache<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token function">sort</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cache<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">comp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id=内建函数对象><a class=anchor href=#内建函数对象>#</a> 内建函数对象</h4><p>需引入头文件 - <code>#include&lt;functional&gt;</code></p><figure class="highlight cpp"><figcaption data-lang=C++><span>算数仿函数</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;functional></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token comment">// 二元运算，加法</span></pre></td></tr><tr><td data-num=8></td><td><pre>    plus<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    </pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token comment">// 一元运算，取反</span></pre></td></tr><tr><td data-num=12></td><td><pre>    negate<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=13></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang=C++><span>关系仿函数</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;functional></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> cache<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">--</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> cache<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// 关系仿函数，大于</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token function">sort</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cache<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token generic-function"><span class="token function">greater</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang=C++><span>逻辑仿函数</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;functional></span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm></span></span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=5></td><td><pre></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">></span> cache<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    cache<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    cache<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    cache<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    </pre></td></tr><tr><td data-num=13></td><td><pre>    vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">></span> <span class="token function">cache2</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token comment">// 逻辑仿函数，非</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token function">transform</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cache<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cache2<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token generic-function"><span class="token function">logical_not</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=模板类函数模板相关工具库><a class=anchor href=#模板类函数模板相关工具库>#</a> 模板类/函数模板相关工具库</h3><p><font size=4><ins><strong>std::pair</strong></ins></font></p><p><code>std::pair</code>是<code>C++</code>标准库中定义的模板类，用于表示一个有序对(pair)，即两个值的组合。<code>std::pair</code>可以存储两个不同类型的元素，并提供了成员函数和操作符来访问这两个元素。</p><p>需头文件 - <code>#include&lt;utility&gt;</code></p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;utility></span></span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token comment">// 创建一个pair对象</span></pre></td></tr><tr><td data-num=7></td><td><pre>    std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">></span> <span class="token function">myPair</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">>></span> container<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=9></td><td><pre></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token comment">// 访问pair的元素</span></pre></td></tr><tr><td data-num=11></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"First: "</span> <span class="token operator">&lt;&lt;</span> myPair<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">", Second: "</span> <span class="token operator">&lt;&lt;</span> myPair<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id=相关补充项><a class=anchor href=#相关补充项>#</a> 相关补充项</h2><h3 id=volatile关键字><a class=anchor href=#volatile关键字>#</a> volatile关键字</h3><p>访问寄存器比访问内存要快，所以CPU会优先访问该数据在寄存器中的存储结果，但内存中的数据可能已经被意想不到地改变，而寄存器中还保留着原来的结果，所以为了避免这种情况，可以将变量声明为<code>volatile</code>，不进行编译优化，使得CPU每次都从内存中读取数据。</p><p><code>C/C++</code>的volatile变量，与非volatile变量之间的操作，是可能被编译器交换顺序的，而volatile变量间的操作，是不会被编译器交换顺序的。哪怕将所有的变量全部都声明为volatile，哪怕杜绝了编译器的乱序优化，但是针对生成的汇编代码，CPU有可能仍旧会乱序执行指令，导致程序依赖的逻辑出错，volatile对此也无能为力。针对这个多线程的应用，正确的做法是构建一个<code>happens-before</code>语义。</p><details class=info><summary>volatile关键字的特性？</summary><div><ul><li>易变性 - 所谓的易变性，在汇编层面反映出来，就是两条语句，下一条语句不会直接使用上一条语句对应的volatile变量的寄存器内容，而是重新从内存中读取</li><li>不可优化 - volatile告诉编译器，不要对这个变量进行各种激进的优化，甚至将变量直接消除，保证写在代码中的指令，一定会被执行</li><li>顺序性 - 能够保证volatile变量间的顺序性，编译器不会进行乱序优化</li></ul></div></details><details class=info><summary>volatile的作用？是否具有原子性？对编译器有什么影响？</summary><div><p>作用包括</p><ul><li><p><strong>防止编译器优化</strong> - 编译器在进行优化时可能会对变量的读取和写入进行一些重排序或者消除似乎没有实际效果的读取写入操作。使用 <code>volatile</code> 告诉编译器不要进行这样的优化，因为这些操作可能对程序的正确性产生影响。</p></li><li><p><strong>确保变量的每次读写都从内存中进行</strong> - 编译器有时候会将变量的值缓存在寄存器中，而不是直接从内存中读取。对于 <code>volatile</code> 变量，编译器会确保每次都从内存中读取或写入值，而不使用寄存器中的缓存。</p></li></ul><p><code>volatile</code>并不提供原子性。它仅仅告诉编译器不要对变量的读写进行优化，而不涉及多线程或并发操作。如果在多线程环境下有多个线程同时访问同一个<code>volatile</code>变量，仍然需要使用其他手段(如互斥锁或原子操作)来确保线程安全。</p><p>对于<strong>编译器</strong>的影响，使用<code>volatile</code>可能会阻止一些特定的优化，因为编译器不能假设<code>volatile</code>变量的值不会在程序的其他地方被修改。</p></div></details><details class=info><summary>多线程编程中什么情况下需要加volatile？</summary><div><p><code>C/C++</code>多线程编程中不要使用volatile。<code>volatile</code>通常不是最好的线程同步手段，<code>C++11</code>标准中明确指出解决多线程的数据竞争问题应该使用原子操作或者互斥锁。因为<code>C/C++</code>中的volatile并不是用来解决多线程竞争问题的，而是用来修饰一些因为程序不可控因素导致变化的变量，比如访问底层硬件设备的变量，以提醒编译器不要对该变量的访问擅自进行优化。</p><p>倘若真的要，需要考虑使用<code>volatile</code>的主要是在以下场景</p><ul><li><p><strong>中断处理程序中的共享变量</strong> - 当多线程程序中存在中断处理程序，且这些中断处理程序会修改某个共享变量的值时，可以考虑使用<code>volatile</code>来确保对该变量的读写操作不被编译器优化，从而保证在中断处理程序和主程序之间的正确通信</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">volatile</span> <span class="token keyword">int</span> sharedVariable<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment">// 在中断处理程序中修改 sharedVariable</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">void</span> <span class="token function">interruptHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    sharedVariable <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token comment">// 在主程序中读取 sharedVariable</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token keyword">int</span> value <span class="token operator">=</span> sharedVariable<span class="token punctuation">;</span><span class="token comment">// 不会被优化</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p><strong>与信号处理相关的变量</strong> - 在使用信号处理时，<code>volatile</code>也可以用来确保信号处理程序与主程序之间的正确通信</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">volatile</span> sig_atomic_t flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment">// 信号处理程序中修改 flag</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">void</span> <span class="token function">signalHandler</span><span class="token punctuation">(</span><span class="token keyword">int</span> signo<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token comment">// 在主程序中检查 flag</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num=10></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=12></td><td><pre>        <span class="token comment">// 处理信号</span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ul></div></details><details class=info><summary>volatile是否可以和const一起使用？</summary><div><p>在<code>C++</code>中，<code>volatile</code>和<code>const</code>可以同时用在变量声明中，但它们的语义有些冲突。当<code>volatile</code>和<code>const</code>一起使用时，<code>volatile</code>通常会覆盖<code>const</code>的影响，即使一个变量被声明为<code>const volatile</code>，编译器仍然会认为它是<code>volatile</code>的。</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">const</span> <span class="token keyword">volatile</span> <span class="token keyword">int</span> myVar <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>在这个例子中，<code>myVar</code>被声明为一个同时具有<code>const</code>和<code>volatile</code>属性的整数。这表示编译器将考虑到<code>myVar</code>可能会在程序的其他地方被修改，并且它的值不应该被缓存，但这并不影响其常量性。</p></div></details><h3 id=内存管理><a class=anchor href=#内存管理>#</a> 内存管理</h3><details class=info><summary>C++中内存分配情况是怎样的？</summary><div><p><code>C++</code>中的内存分配主要涉及两个方面 - 栈内存分配和堆内存分配。</p><ul><li><p>栈内存分配(Stack Allocation)</p><ul><li><p>栈内存是由编译器自动管理的，用于存储局部变量、函数参数、返回地址等信息</p></li><li><p>栈内存的分配和释放是自动进行的，遵循先进后出的原则</p></li><li><p>每个函数调用都会在栈上分配一块区域，称为栈帧，用于存储该函数的局部变量和其他信息</p></li><li><p>当函数调用结束时，对应的栈帧会被弹出，释放相关的栈内存</p></li></ul></li><li><p>堆内存分配(Heap Allocation)</p><ul><li>堆内存是由程序员手动管理的，用于存储动态分配的对象，例如使用<code>new</code>和<code>malloc</code>进行分配</li><li>堆内存的生命周期由程序员控制，需要手动释放以防止内存泄漏</li><li><code>new</code>和<code>delete</code>关键字用于在堆上分配和释放单个对象，而<code>malloc</code>和<code>free</code>函数用于分配和释放一块指定大小的内存</li></ul></li></ul></div></details><details class=info><summary>内存泄漏的定义是什么？内存泄漏的场景有哪些？如何判断内存泄漏？</summary><div><p>内存泄漏是指在程序运行过程中，由于一些原因导致申请的内存空间无法被正常释放，最终导致程序耗尽可用内存而出现性能问题或崩溃。内存泄漏可能是由于未正确释放动态分配的内存、循环引用、不合理的缓存管理等原因引起的。</p><p><strong>内存泄漏的场景有</strong></p><ul><li><p><code>malloc</code>和<code>free</code>未成对出现或<code>new/new []</code>和<code>delete/delete []</code>未成对出现</p><ul><li><p>在堆中创建对象分配内存，但未显式释放内存；比如，通过局部分配的内存，未在调用者函数体内释放</p></li><li><p>在构造函数中动态分配内存，但未在析构函数中正确释放内存</p></li></ul></li><li><p>未定义拷贝构造函数或未重载赋值运算符，从而造成两次释放相同内存的做法。比如，类中包含指针成员变量，在未定义拷贝构造函数或未重载赋值运算符的情况下，编译器会调用默认的拷贝构造函数或赋值运算符，以逐个成员拷贝的方式来复制指针成员变量，使得两个对象包含指向同一内存空间的指针，那么在释放第一个对象时，析构函数释放该指针指向的内存空间，在释放第二个对象时，析构函数就会释放同一内存空间，这样的行为是错误的</p></li><li><p>没有将基类的析构函数定义为虚函数</p></li></ul></div></details><details class=info><summary>高危函数是什么？</summary><div><ul><li>一般来说，任何可以导致缓冲区溢出、整数溢出、空指针引用或其他形式的未定义行为的函数都可能是高风险的。在<code>C/C++</code>语言中，一些常见的例子包括<code>gets()</code>, <code>scanf()</code>, <code>strcpy()</code>, <code>strcat()</code>, <code>sprintf()</code>等，这些函数在使用不当时可能会导致安全问题</li><li>对于<code>C++</code>中的STL中来说，使用iterator可能会导致不安全的行为，这个通常会在进行循环的时候用到，一般情况下可以用<code>at()</code>函数或者使用类似于<code>for(auto element : elements)</code>，以及特定的STL自带的库函数</li></ul></div></details><details class=info><summary>new、operator new、placement new的区别？</summary><div><p><code>new</code>、<code>operator new</code>和<code>placement new</code>是<code>C++</code>中与内存分配和对象构造相关的三个概念，它们有不同的作用和用法。</p><p><strong>new</strong></p><ul><li><p>语法 - <code>new Type;</code>或者<code>new Type(initializer);</code></p></li><li><p>作用 - 动态分配内存并在分配的内存上调用对象的构造函数。返回指向分配内存的指针</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">;</span><span class="token comment">// 分配int大小的内存，并调用int的构造函数</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment">// 分配MyClass大小的内存，并调用MyClass的构造函数</span></pre></td></tr><tr><td data-num=3></td><td><pre>MyClass <span class="token operator">*</span>obj <span class="token operator">=</span> <span class="token keyword">new</span> MyClass<span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul><p><strong>operator new</strong></p><ul><li><p>语法 - <code>void* operator new(size_t size);</code>或者<code>void* operator new(size_t size, void* ptr);</code></p></li><li><p>作用 - <code>operator new</code>是一个用于动态内存分配的全局函数，它负责分配一块指定大小的内存，并返回一个指向这块内存的指针。<code>operator new</code>只负责分配内存，不调用构造函数。当在类中重载<code>operator new</code>时，通常需要同时重载<code>operator delete</code></p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">void</span> <span class="token operator">*</span>mem <span class="token operator">=</span> <span class="token keyword">operator</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 分配int大小的内存</span></pre></td></tr></table></figure></li></ul><p><strong>placement new</strong></p><ul><li><p>语法 - <code>new (ptr) Type;</code>或者<code>new (ptr) Type(initializer);</code></p></li><li><p>作用 - <code>placement new</code>是通过在指定的内存地址上调用构造函数来创建对象的。它允许在预分配的内存块上构造对象，而不需要额外的内存分配操作。placement new不负责内存分配，只负责调用构造函数</p><figure class="highlight cpp"><figcaption data-lang=C++></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">char</span> buffer<span class="token punctuation">[</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 预分配内存</span></pre></td></tr><tr><td data-num=2></td><td><pre>MyClass <span class="token operator">*</span>obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>buffer<span class="token punctuation">)</span> MyClass<span class="token punctuation">;</span><span class="token comment">// 在预分配的内存上调用构造函数</span></pre></td></tr></table></figure></li></ul><p>在使用<code>new</code>时，首先会调用<code>operator new</code>分配内存，然后调用对象的构造函数。而在使用<code>placement new</code>时，需要提供已经分配好的内存地址，<code>placement new</code>只负责在指定的内存上调用构造函数。</p><p>对于每一个<code>new</code>，应该有一个相应的<code>delete</code>，对于每一个<code>placement new</code>，应该有相应的显式调用析构函数和适当的内存释放操作。</p></div></details><details class=info><summary>C++函数调用的压栈过程?</summary><div><ul><li><p><strong>保存返回地址</strong> - 当一个函数被调用时，调用指令会将下一条指令的地址(返回地址)压入栈中，以便在函数执行完毕后返回到正确的位置</p></li><li><p><strong>保存当前函数的基指针</strong> - 如果当前函数是另一个函数的子函数，那么当前函数会保存父函数的基指针(通常是栈指针的值)，以确保在返回时能够正确恢复调用者的栈帧</p></li><li><p><strong>为局部变量分配空间</strong> - 分配一段内存用于存储函数的局部变量。这些局部变量通常存储在栈上，并在函数调用结束时自动释放</p></li><li><p><strong>将实际参数压栈</strong> - 将调用函数时传递的实际参数压入栈中。通常，参数是从右往左依次压栈</p></li><li><p><strong>跳转到被调用函数的入口点</strong> - 使用跳转指令(如<code>call</code>指令)将控制权转移给被调用函数的入口点。这个入口点通常是函数的第一条指令</p></li></ul><p>在函数执行完毕后，会执行以下步骤</p><ul><li><p><strong>恢复栈指针</strong> - 将栈指针恢复到调用函数时的状态，从而释放局部变量的空间</p></li><li><p><strong>恢复基指针</strong> - 如果有保存基指针的需要，将基指针恢复到调用函数时的状态</p></li><li><p><strong>弹出实际参数</strong> - 从栈中弹出函数调用时压入的实际参数</p></li><li><p><strong>恢复返回地址</strong> - 从栈中弹出保存的返回地址，并跳转到该地址，使控制权返回到调用函数的下一条指令</p></li></ul></div></details><details class=info><summary>如何定位内存泄漏？出现内存泄漏如何调试？</summary><div><p>在Linux系统下，可以使用valgrind, mtrace, GDB等内存泄漏检测工具。</p><ul><li>Valgrind - 编译时添加<code>-g</code>命令后，<code>valgrind --leak-check=full ./your_program</code></li><li>GDB - 编译时添加<code>-g</code>命令后，启动GDB调试，崩溃后执行<code>info leaks</code>命令</li></ul></div></details><div class=tags><a href=/tags/programming-language/ rel=tag><i class="ic i-tag"></i> 编程语言</a></div></div><footer><div class=meta><span class=item><span class=icon><i class="ic i-calendar-check"></i></span> <span class=text>更新于</span> <time title="修改时间：2024-07-21 12:06:40" itemprop=dateModified datetime=2024-07-21T12:06:40+08:00>2024-07-21</time></span><span class=item data-path=/computer-science/programming/c-language/basis/c++/cpppart2/ title=阅读次数><span class=icon><i class="ic i-eye"></i></span> <span class=text>阅读次数</span><span class=waline-pageview-count></span> <span class=text>次</span></span></div><div id=copyright><ul><li class=author><strong>本文作者：</strong> ReverseSacle <i class="ic i-at"><em>@</em></i>逆转天平</li><li class=link><strong>本文链接：</strong> <a href=https://www.reversesacle.com/computer-science/programming/c-language/basis/c++/cpppart2/ title=C++基础知识-第二部分-C++98&#x2F;03标准>https://www.reversesacle.com/computer-science/programming/c-language/basis/c++/cpppart2/</a></li><li class=license><strong>版权声明：</strong> 本站所有文章除特别声明外，均采用 <span class=exturl data-url=aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class=post-nav><div class="item left"><a href=/computer-science/programming/c-language/basis/c++/cpppart1/ itemprop=url rel=prev data-background-image=https:&#x2F;&#x2F;resa-imgs.oss-accelerate.aliyuncs.com&#x2F;img&#x2F;acg21.webp title=C++基础知识-第一部分-C++98&#x2F;03标准><span class=type>上一篇</span><span class=category><i class="ic i-flag"></i> C++基础</span><h3>C++基础知识-第一部分-C++98/03标准</h3></a></div><div class="item right"><a href=/computer-science/programming/c-language/basis/c++/cpppart3/ itemprop=url rel=next data-background-image=https:&#x2F;&#x2F;resa-imgs.oss-accelerate.aliyuncs.com&#x2F;img&#x2F;acg5.webp title=C++基础知识-第三部分-C++11标准><span class=type>下一篇</span><span class=category><i class="ic i-flag"></i> C++基础</span><h3>C++基础知识-第三部分-C++11标准</h3></a></div></div><div class=wrap id=comments><div id=waline-comment></div></div></div><div id=sidebar><div class=inner><div class=panels><div class=inner><div class="contents panel pjax" data-title=文章目录><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6><span class=toc-number>1.</span> <span class=toc-text>异常处理机制</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%A2%84%E5%A4%84%E7%90%86%E6%A6%82%E8%BF%B0><span class=toc-number>2.</span> <span class=toc-text>预处理概述</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4><span class=toc-number>3.</span> <span class=toc-text>命名空间</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2><span class=toc-number>4.</span> <span class=toc-text>强制类型转换</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%A8%A1%E6%9D%BF%E6%B3%9B%E5%9E%8B><span class=toc-number>5.</span> <span class=toc-text>模板(泛型)</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E5%BF%B5><span class=toc-number>5.1.</span> <span class=toc-text>概念</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF><span class=toc-number>5.2.</span> <span class=toc-text>函数模板</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%B1%BB%E6%A8%A1%E6%9D%BF><span class=toc-number>5.3.</span> <span class=toc-text>类模板</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%8E%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%8C%BA%E5%88%AB><span class=toc-number>5.3.1.</span> <span class=toc-text>类模板与函数模板的区别</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%AD%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E7%9A%84%E8%B0%83%E7%94%A8%E6%97%B6%E6%9C%BA><span class=toc-number>5.3.2.</span> <span class=toc-text>类模板中成员函数的调用时机</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E5%AF%B9%E8%B1%A1%E5%81%9A%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0><span class=toc-number>5.3.3.</span> <span class=toc-text>类模板对象做函数参数</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%8E%E7%BB%A7%E6%89%BF><span class=toc-number>5.3.4.</span> <span class=toc-text>类模板与继承</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E7%9A%84%E7%B1%BB%E5%A4%96%E5%AE%9E%E7%8E%B0><span class=toc-number>5.3.5.</span> <span class=toc-text>成员函数的类外实现</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%88%86%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99><span class=toc-number>5.3.6.</span> <span class=toc-text>类模板的分文件编写</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%8E%E5%8F%8B%E5%85%83><span class=toc-number>5.3.7.</span> <span class=toc-text>类模板与友元</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93standard-template-library-stl><span class=toc-number>6.</span> <span class=toc-text>标准模板库(standard Template Library - STL)</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#stl%E5%85%AD%E5%A4%A7%E7%BB%84%E4%BB%B6><span class=toc-number>6.1.</span> <span class=toc-text>STL六大组件</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AE%B9%E5%99%A8><span class=toc-number>6.2.</span> <span class=toc-text>容器</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%BA%8F%E5%88%97%E5%BC%8F%E5%AE%B9%E5%99%A8><span class=toc-number>6.2.1.</span> <span class=toc-text>序列式容器</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%85%B3%E8%81%94%E5%BC%8F%E5%AE%B9%E5%99%A8><span class=toc-number>6.2.2.</span> <span class=toc-text>关联式容器</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%AE%B9%E5%99%A8%E9%80%82%E9%85%8D%E5%99%A8><span class=toc-number>6.2.3.</span> <span class=toc-text>容器适配器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%AE%97%E6%B3%95%E5%BA%93><span class=toc-number>6.3.</span> <span class=toc-text>算法库</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%E4%BB%BF%E5%87%BD%E6%95%B0><span class=toc-number>6.4.</span> <span class=toc-text>函数对象(仿函数)</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E8%B0%93%E8%AF%8D><span class=toc-number>6.4.1.</span> <span class=toc-text>谓词</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1><span class=toc-number>6.4.2.</span> <span class=toc-text>内建函数对象</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A8%A1%E6%9D%BF%E7%B1%BB%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%E5%BA%93><span class=toc-number>6.5.</span> <span class=toc-text>模板类&#x2F;函数模板相关工具库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%9B%B8%E5%85%B3%E8%A1%A5%E5%85%85%E9%A1%B9><span class=toc-number>7.</span> <span class=toc-text>相关补充项</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#volatile%E5%85%B3%E9%94%AE%E5%AD%97><span class=toc-number>7.1.</span> <span class=toc-text>volatile关键字</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86><span class=toc-number>7.2.</span> <span class=toc-text>内存管理</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title=系列文章><ul><li><a href=/computer-science/programming/c-language/basis/c++/cpppart1/ rel=bookmark title=C++基础知识-第一部分-C++98/03标准>C++基础知识-第一部分-C++98/03标准</a></li><li class=active><a href=/computer-science/programming/c-language/basis/c++/cpppart2/ rel=bookmark title=C++基础知识-第二部分-C++98/03标准>C++基础知识-第二部分-C++98/03标准</a></li><li><a href=/computer-science/programming/c-language/basis/c++/cpppart3/ rel=bookmark title=C++基础知识-第三部分-C++11标准>C++基础知识-第三部分-C++11标准</a></li></ul></div><div class="overview panel" data-title=站点概览><div class=author itemprop=author itemscope itemtype=http://schema.org/Person><img class=image itemprop=image alt=ReverseSacle data-src=/images/avatar.webp><p class=name itemprop=name>ReverseSacle</p><div class=description itemprop=description>知识书库 & 学习点滴</div></div><nav class=state><div class="item posts"><a href=/archives/ ><span class=count>186</span> <span class=name>文章</span></a></div><div class="item categories"><a href=/categories/ ><span class=count>52</span> <span class=name>分类</span></a></div><div class="item tags"><a href=/tags/ ><span class=count>18</span> <span class=name>标签</span></a></div></nav><div class=social><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1JldmVyc2VTYWNsZQ==" title=https:&#x2F;&#x2F;github.com&#x2F;ReverseSacle><i class="ic i-github"></i></span><span class="exturl item email" data-url="bWFpbHRvOnByaXZhdGVAcmV2ZXJzZXNhY2xlLmNvbQ==" title=mailto:private@reversesacle.com><i class="ic i-envelope"></i></span></div><ul class=menu><li class=item><a href=/ rel=section><i class="ic i-home"></i> 首页</a></li><li class="item dropdown"><a href=javascript:void(0);><i class="ic i-feather"></i> 文章</a><ul class=submenu><li class=item><a href=/archives/ rel=section><i class="ic i-list-alt"></i> 归档</a></li><li class=item><a href=/categories/ rel=section><i class="ic i-th"></i> 分类</a></li><li class=item><a href=/tags/ rel=section><i class="ic i-tags"></i> 标签</a></li></ul></li><li class=item><a href=/about/ rel=section><i class="ic i-user"></i> 关于</a></li><li class=item><a href=/friend-links/ rel=section><i class="ic i-heart"></i> 友链</a></li></ul></div></div></div><ul id=quick><li class="prev pjax"><a href=/computer-science/programming/c-language/basis/c++/cpppart1/ rel=prev title=上一篇><i class="ic i-chevron-left"></i></a></li><li class=up><i class="ic i-arrow-up"></i></li><li class=down><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href=/computer-science/programming/c-language/basis/c++/cpppart3/ rel=next title=下一篇><i class="ic i-chevron-right"></i></a></li><li class=percent></li></ul></div></div><div class=dimmer></div></div></main><footer id=footer><div class=inner><div class=widgets><div class="rpost pjax"><h2>随机文章</h2><ul><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/c-algorithm/ title="分类于 C版算法">C版算法</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/two-pointer/ title=双指针>双指针</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/algorithm/ title="分类于 算法">算法</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/algorithm/sort/ title="分类于 序列重组">序列重组</a></div><span><a href=/computer-science/programming/algorithm/sort/selection-sort/ title=选择排序>选择排序</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a></div><span><a href=/computer-science/programming/c-language/c-data-structure/nonlinear-structure/tree-forest/ title=C语言-孩子兄弟树>C语言-孩子兄弟树</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/web/ title="分类于 web">web</a></div><span><a href=/computer-science/programming/web/jspart2/ title=JavaScript基础-第二部分>JavaScript基础-第二部分</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/dynamic-program/ title="分类于 动态规划">动态规划</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/dynamic-program/nums/pascals-triangle/ title=帕斯卡三角>帕斯卡三角</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/nums/ title="分类于 数理">数理</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/math/derivatives/ title=数理问题派生>数理问题派生</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a></div><span><a href=/computer-science/programming/c-language/c-data-structure/linear-structure/compressed-sparse-matrix/ title=C语言-稀疏矩阵的压缩>C语言-稀疏矩阵的压缩</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/network-programming/ title="分类于 网络编程">网络编程</a></div><span><a href=/computer-science/programming/network-programming/linux-environment/ title=虚拟机-Linux环境配置>虚拟机-Linux环境配置</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/android-development/ title="分类于 安卓开发">安卓开发</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/android-development/automation-testing/ title="分类于 自动化测试">自动化测试</a></div><span><a href=/computer-science/programming/android-development/automation-testing/adb-integration/ title="Android Debug Bridge(adb)教程">Android Debug Bridge(adb)教程</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/computer-basic/ title="分类于 计算机基础">计算机基础</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/computer-basic/computer-composition-principles/ title="分类于 计算机组成原理">计算机组成原理</a></div><span><a href=/computer-science/computer-basic/composition/ccppart1/ title=计算机组成原理-CSAPP-第一部分>计算机组成原理-CSAPP-第一部分</a></span></li></ul></div><div><h2>最新评论</h2><ul id=waline-recent></ul></div></div><div class=status><div class=copyright>&copy; 2021 – <span itemprop=copyrightYear>2025</span><span class=with-love><i class="ic i-sakura rotate"></i></span> <span class=author itemprop=copyrightHolder>ReverseSacle @ ReverseSacle-Blog</span></div><div class=count><i class="ic i-clock" aria-hidden=true></i> <span id=time align=center>载入时间中...<script defer>var now=new Date;function createtime(){var n=new Date("2021-11-16 22:30:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("time").innerHTML="已经过 "+dnum+" 天 "+hnum+" 小时 "+mnum+" 分 "+snum+" 秒 "}setInterval("createtime()",250)</script></span><span class=post-meta-item-icon>|&nbsp<i class="ic i-chart-area"></i></span> <span title=站点总字数>2.1m 字</span> <span class=post-meta-item-icon>|&nbsp<i class="ic i-coffee"></i></span> <span title=站点阅读时长>40:40</span></div></div></div></footer></div><script data-config>var LOCAL={path:"computer-science/programming/c-language/basis/c++/cpppart2/",favicon:{show:"ReverseSacle-Blog",hide:"ReverseSacle-Blog"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},waline:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src=https://polyfill.alicdn.com/v3/polyfill.min.js></script><script src=https://cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1.16.0/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js></script><script src=/js/app.js></script></body></html>