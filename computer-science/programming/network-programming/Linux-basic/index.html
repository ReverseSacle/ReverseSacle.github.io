<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content=#222><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=icon type=image/ico sizes=48x48 href=/images/favicon.ico><link rel=alternate type=application/rss+xml title=逆转天平 href=https://www.reversesacle.com/rss.xml><link rel=alternate type=application/atom+xml title=逆转天平 href=https://www.reversesacle.com/atom.xml><link rel=alternate type=application/json title=逆转天平 href=https://www.reversesacle.com/feed.json><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel=stylesheet href=/css/app.css><meta name=description content=网络编程><link rel=canonical href=https://www.reversesacle.com/computer-science/programming/network-programming/Linux-basic/ ><title>Linux基础(CentOS 7) - 网络编程 - 编程 - 计算机科学 | ReverseSacle-Blog</title><meta name=generator content="Hexo 6.3.0"></head><body itemscope itemtype=http://schema.org/WebPage><div id=loading><div class=dotloader><div class=dot></div><div class=dot></div><div class=dot></div><div class=dot></div><div class=dot></div></div></div><div id=container><header id=header itemscope itemtype=http://schema.org/WPHeader><div class=inner><div id=brand><div class=pjax><h1 itemprop="name headline">Linux基础(CentOS 7)</h1><div class=meta><span class=item title="创建时间：2023-07-22 19:03:33"><span class=icon><i class="ic i-calendar"></i></span> <span class=text>发表于</span> <time itemprop="dateCreated datePublished" datetime=2023-07-22T19:03:33+08:00>2023-07-22</time></span><span class=item title=本文字数><span class=icon><i class="ic i-pen"></i></span> <span class=text>本文字数</span> <span>27k</span> <span class=text>字</span></span><span class=item title=阅读时长><span class=icon><i class="ic i-clock"></i></span> <span class=text>阅读时长</span> <span>32 分钟</span></span></div></div></div><nav id=nav><div class=inner><div class=toggle><div class=lines role=navigation aria-label=切换导航栏><span class=line></span><span class=line></span><span class=line></span></div></div><ul class=menu><li class="item title"><a href=/ rel=start>ReverseSacle-Blog</a></li></ul><ul class=right><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id=imgs class=pjax><ul><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg4.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg20.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg18.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg10.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg11.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg5.webp></li></ul></div></header><div id=waves><svg class=waves xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewBox="0 24 150 28" preserveAspectRatio=none shape-rendering=auto><defs><path id=gentle-wave d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352z"/></defs><g class=parallax><use xlink:href=#gentle-wave x=48 y=0 /><use xlink:href=#gentle-wave x=48 y=3 /><use xlink:href=#gentle-wave x=48 y=5 /><use xlink:href=#gentle-wave x=48 y=7 /></g></svg></div><main><div class=inner><div id=main class=pjax><div class="article wrap"><div class=breadcrumb itemscope itemtype=https://schema.org/BreadcrumbList><i class="ic i-home"></i> <span><a href=/ >首页</a></span><i class="ic i-angle-right"></i> <span itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/ itemprop=item rel=index title="分类于 计算机科学"><span itemprop=name>计算机科学</span></a><meta itemprop=position content=1></span><i class="ic i-angle-right"></i> <span itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/programming/ itemprop=item rel=index title="分类于 编程"><span itemprop=name>编程</span></a><meta itemprop=position content=2></span><i class="ic i-angle-right"></i> <span class=current itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/programming/network-programming/ itemprop=item rel=index title="分类于 网络编程"><span itemprop=name>网络编程</span></a><meta itemprop=position content=3></span></div><article itemscope itemtype=http://schema.org/Article class="post block" lang=zh-CN><link itemprop=mainEntityOfPage href=https://www.reversesacle.com/computer-science/programming/network-programming/Linux-basic/ ><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content=/images/avatar.webp><meta itemprop=name content=ReverseSacle><meta itemprop=description content="所见即所得，所思即所行, 知识书库 & 学习点滴"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content=逆转天平></span><div class="body md" itemprop=articleBody><h2 id=linux常用命令><a class=anchor href=#linux常用命令>#</a> Linux常用命令</h2><p>默认处于系统管理员权限。</p><p><code>缺省</code>指应该有，但没有，为了补偿，提供一个结果，有最差的，只满足基本条件的意思。</p><p><span class=exturl data-url=aHR0cHM6Ly93YW5nY2h1amlhbmcuY29tL2xpbnV4LWNvbW1hbmQv>Linux命令快查网站</span></p><h3 id=基本><a class=anchor href=#基本>#</a> <strong>基本</strong></h3><ul><li>重启 - <code>init 6</code> 或 <code>reboot</code></li><li>关机 - <code>init 0</code>或<code>halt</code></li><li>命令行界面清屏 - <code>clear</code></li><li>切换用户 - <code>su 用户名</code></li><li>修改密码 - <code>passwd 用户名</code></li><li>锁定屏幕 - <code>Ctrl s</code></li><li>取消锁定屏幕 - <code>Ctrl q</code></li><li>查看系统手册页(文档) - <code>man command_name</code><ul><li>查看库函数文档 - <code>man 3 库函数名</code></li></ul></li></ul><h3 id=时间><a class=anchor href=#时间>#</a> <strong>时间</strong></h3><ul><li>查看时间 - <code>date</code></li><li>修改时区为中国上海时间 - <code>cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code></li><li>设置时间 - <code>date -s &quot;yyyy-mm-dd hh:mi:ss&quot;</code></li></ul><h3 id=文件与目录><a class=anchor href=#文件与目录>#</a> <strong>文件与目录</strong></h3><p>与windows的区别</p><ul><li><p>没有盘(C,D盘)的概念</p></li><li><p>文件系统像一颗树，根(<code>/</code>)是树干，子目录是树枝，文件是树叶</p></li><li><p>全路径文件名又叫<code>绝对路径</code>，由从根开始的目录组合和文件名组成</p></li><li><p><code>相对路径</code>，由当前目录组合和文件名组成</p></li><li><p><code>.</code>表示当前目录，<code>..</code>表示当前目录的上级目录</p></li></ul><p><strong>指令</strong></p><ul><li><p>查看当前工作目录 - <code>pwd</code></p></li><li><p>跳转到指定目录 - <code>cd 路径名</code></p><ul><li>切换到上一层目录 - <code>cd ..</code></li><li>切换到系统根目录 - <code>cd /</code></li><li>切换到用户主目录 - <code>cd ~</code></li><li>切换到上一个操作所在目录 - <code>cd -</code></li></ul></li><li><p>创建目录 - <code>mkdir 目录名</code></p></li><li><p>删除空目录 - <code>rmdir [选项] 目录名</code></p><ul><li>删除并且会递归删除目录的空父目录 - <code>rm -r 目录名</code></li></ul></li><li><p>取消当前行(指令写错或添加了特殊字符的取消方式) - <code>ctrl U</code></p></li><li><p>回退刚才执行的操作 - <code>ctrl R</code></p></li></ul><p><strong>ls</strong></p><ul><li>列出当前目录下的文件和目录 - <code>ls</code></li><li>列出当前目录下的文件和目录的详细信息 - <code>ls -l</code> - 或<code>ll</code></li><li>按时间列出当前目录下的文件和目录的详细信息 - <code>ls -lt</code></li><li>列出当前目录下的所有文件和目录，包括隐藏文件 - <code>ls -a</code></li><li>列出指定目录下的文件和目录 - <code>ls 路径</code></li></ul><p><strong>通配符</strong></p><ul><li>通配符 - <code>*</code> → 匹配所有符合条件的文件和目录，可出现几次(<code>ls _f*</code>，<code>ls _f*s*_.h</code>)</li><li>通配符 - <code>?</code> → 匹配一个符合条件的文件和目录(<code>ls ?freecp*</code>)</li></ul><p><strong>rm</strong></p><ul><li><p>删除目录或文件，可填写多个文件或目录名 - <code>rm 目录或文件名</code></p></li><li><p>递进制强制性删除目录(将目录里外一个一个的删除) - <code>rm -r 目录名</code></p></li><li><p>强制性删除目录 - <code>rm -rf 目录名</code></p></li><li><p>强制性删除文件 - <code>rm -f 文件名</code></p></li></ul><p><strong>mv</strong></p><ul><li><p>移动目录或文件(当移动目的路径不存在时，移动目标会被改名并移动到一个随机位置) - <code>mv 旧路径 新路径</code></p></li><li><p>重命名目录或文件 - <code>mv 旧名 新名</code></p></li></ul><p><strong>cp</strong></p><ul><li>复制文件 - <code>cp 被复制文件名 复制之后的新文件名</code></li><li>复制文件到指定路径 - <code>cp 文件名 路径</code></li><li>递归复制目录中的所有文件 - <code>cp -r 被复制目录 复制目的路径</code></li></ul><p><strong>tail</strong></p><ul><li>查看文本文件的末尾内容 - <code>tail [可选选项] 文件名</code></li><li>查看文本并指定显示第几行 - <code>tail -n 行数 文件名</code></li><li>实时跟踪文件的新增内容 - <code>tail -f 文件名</code></li><li>以字节数为单位指定要显示的字节数 - <code>tail -c 字节数 文件名</code></li><li>查看文本但不显示文件名 - <code>tail -q 文件名</code></li><li>查看文本并显示文件名 - <code>tail -v 文件名</code></li></ul><p><strong>find</strong></p><ul><li><p>命令 - <code>find [路径] [表达式]</code></p></li><li><p>在指定目录及其子目录中搜索文件或目录 - <code>find test.txt</code></p></li><li><p>列出当前目录及子目录下所有文件和文件夹 - <code>find .</code></p></li><li><p>在<code>/home</code>目录下查找以 <code>.txt</code> 结尾的文件名 - <code>find /home -name &quot;*.txt&quot;</code></p><ul><li>并忽略大小写 - <code>find /home -i name &quot;*.txt&quot;</code></li></ul></li><li><p>当前目录及子目录下查找所有以 <code>.txt</code> 和 <code>.pdf</code> 结尾的文件 <code>find . \( -name &quot;*.txt&quot; -o -name &quot;*.pdf&quot; \)</code></p></li></ul><p><strong>touch</strong></p><ul><li>创建新文件或更新已存在文件 - <code>touch [选项] 文件名..</code></li></ul><h3 id=压缩和解压><a class=anchor href=#压缩和解压>#</a> 压缩和解压</h3><p><strong>压缩(打包)</strong></p><ul><li><p>压缩tgz文件 - <code>tar zcvf 打包目的文件路径 需打包目录名或文件名1 需打包目录名或文件名2...</code></p><ul><li>z - 调用 gzip 压缩命令进行压缩</li><li>c - 打包文件</li><li>v - 显示运行过程</li><li>f - 指定文件名</li></ul></li><li><p>压缩zip文件 - <code>zip ...</code></p></li><li><p>压缩gzip文件 - <code>gzip ...</code></p></li></ul><p><strong>解压</strong></p><ul><li><p>解压tgz文件 - <code>tar xvf 解压目的路径</code></p><ul><li>x - 代表解压</li></ul></li><li><p>解压zip文件 - <code>zip ...</code></p></li><li><p>解压gzip文件 - <code>gzip ...</code></p></li></ul><h3 id=网络><a class=anchor href=#网络>#</a> 网络</h3><ul><li>查看ip地址 - <code>ip addr</code></li><li>判断网络是否连通或通讯质量 - <code>ping 域名或ip地址</code></li><li>查看指定端口占用情况 - <code>lfof -i:端口号</code></li></ul><h3 id=显示文件内容><a class=anchor href=#显示文件内容>#</a> 显示文件内容</h3><ul><li><p>显示一次完整的文件内容 - <code>cat 文件名</code></p><ul><li>并显示行数 - <code>cat -n 文件名</code></li></ul></li><li><p>分页显示一次完整的文件内容 - <code>more 文件名</code></p></li><li><p>统计文件的行数、单词数和字节数 - <code>wc 文件名</code></p></li><li><p>搜索(筛选)文件中的内容 - <code>grep 内容 文件名</code></p></li></ul><h3 id=磁盘><a class=anchor href=#磁盘>#</a> 磁盘</h3><ul><li>查看磁盘详细信息 - <code>df -h</code></li><li>查看磁盘详细信息并显示类型 - <code>df -h -T</code></li></ul><h3 id=文件权限><a class=anchor href=#文件权限>#</a> 文件权限</h3><p>操作系统中每个文件都拥有特定的权限、所属用户和所属组。权限是操作系统用来限制资源访问的机制，在 Linux 中权限一般分为读(readable)、写(writable)和执行(excutable)，分为三组。分别对应文件的属主(owner)，属组(group)和其他用户(other)，通过这样的机制来限制哪些用户、哪些组可以对特定的文件进行什么样的操作。</p><p>超级用户可以无视普通用户的权限，即使文件目录权限是000，依旧可以访问。</p><p>通过 <strong><code>ls -l</code></strong> 命令可以 查看某个目录下的文件或目录的权限</p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/network-programming/linux/2.webp alt=""></p><p><strong>文件的类型</strong></p><ul><li>d - 代表目录</li><li>— - 代表文件</li><li>l - 代表软链接(可以认为是 window 中的快捷方式)</li></ul><p><strong>Linux 中权限分为以下几种</strong></p><ul><li>r - 代表权限是可读，r也可以用数字4表示</li><li>w - 代表权限是可写，w也可以用数字2表示</li><li>x - 代表权限是可执行，x也可以用数字1表示</li></ul><p><strong>文件和目录权限的区别</strong></p><p>对文件和目录而言，读写执行表示不同的意义</p><table><thead><tr><th style=text-align:left>- 对于文件 -</th><th style=text-align:left></th></tr></thead><tbody><tr><td style=text-align:left><strong>权限名称</strong></td><td style=text-align:left><strong>可执行操作</strong></td></tr><tr><td style=text-align:left>r</td><td style=text-align:left>可以使用 cat 查看文件的内容</td></tr><tr><td style=text-align:left>w</td><td style=text-align:left>可以修改文件的内容</td></tr><tr><td style=text-align:left>x</td><td style=text-align:left>可以将其运行为二进制文件</td></tr><tr><td style=text-align:left>- <strong>对于目录</strong> -</td><td style=text-align:left></td></tr><tr><td style=text-align:left><strong>权限名称</strong></td><td style=text-align:left><strong>可执行操作</strong></td></tr><tr><td style=text-align:left>r</td><td style=text-align:left>可以查看目录下列表</td></tr><tr><td style=text-align:left>w</td><td style=text-align:left>可以创建和删除目录下文件</td></tr><tr><td style=text-align:left>x</td><td style=text-align:left>可以使用 cd 进入目录</td></tr></tbody></table><p>在linux中的每个用户必须属于一个组，不能独立于组外，每个文件有所有者、所在组、其它组的概念。</p><ul><li><strong>所有者(u)</strong> - 一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者，用 <code>ls ‐ahl</code> 命令可以看到文件的所有者 也可以使用 chown 用户名 文件名来修改文件的所有者</li><li><strong>文件所在组(g)</strong> - 当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组用 <code>ls ‐ahl</code>命令可以看到文件的所有组也可以使用 chgrp 组名 文件名来修改文件所在的组</li><li><strong>其它组(o)</strong> - 除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组</li></ul><p><strong>修改文件/目录的权限的<code>chmod</code>命令</strong></p><p>修改<code>/test</code>下的<code>aaa.txt</code>的权限为文件所有者有全部权限，文件所有者所在的组有读写权限，其他用户只有读的权限 - <code>chmod u=rwx,g=rw,o=r aaa.txt</code>或者<code>chmod 764 aaa.txt</code></p><p><strong>假如装了一个 zookeeper，每次开机到要求其自动启动该怎么办？</strong></p><ol><li>新建一个脚本zookeeper</li><li>为新建的脚本zookeeper添加可执行权限，命令 - <code>chmod +x zookeeper</code></li><li>把zookeeper这个脚本添加到开机启动项里面，命令 - <code>chkconfig --add zookeeper</code></li><li>如果想看看是否添加成功，命令 - <code>chkconfig --list</code></li></ol><h3 id=用户管理><a class=anchor href=#用户管理>#</a> 用户管理</h3><p>Linux系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。用户的账号一方面可以帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。</p><p><strong>Linux用户管理相关命令</strong></p><ul><li><code>useradd [选项] 用户名</code> - 创建用户账号。该指令所建立的帐号保存在<code>/etc/passwd</code>文本文件中</li><li><code>userdel [选项] 用户名</code> - 删除用户帐号</li><li><code>usermod [选项] 用户名</code> - 修改用户账号的属性和配置比如用户名、用户ID、HOME目录</li><li><code>passwd [选项] 用户名</code> - 设置用户的认证信息，包括用户密码、密码过期时间等<ul><li><code>passwd -S 用户名</code> - 显示用户账号密码信息</li><li><code>passwd -d 用户名</code> - 清除用户密码，会导致用户无法登录</li><li><code>passwd 用户名</code> - 修改用户密码，随后系统会提示输入新密码并确认密码</li></ul></li><li><code>su [选项] 用户名</code>(Switch User - su) - 在当前登录的用户和其他用户之间切换身份</li></ul><p><strong>用户组管理</strong></p><p>每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同Linux系统对用户组的规定有所不同，如Linux下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。</p><p>用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对<code>/etc/group</code>文件的更新。</p><p><strong>Linux系统用户组的管理相关命令</strong></p><ul><li><code>groupadd [选项] 用户组</code> - 增加一个新的用户组</li><li><code>groupdel 用户组</code> - 要删除一个已有的用户组</li><li><code>groupmod [选项] 用户组</code> - 修改用户组的属性</li></ul><p><strong>系统状态</strong></p><ul><li><p><code>top [选项]</code> - 用于实时查看系统的CPU使用率、内存使用率、进程信息等</p></li><li><p><code>htop [选项]</code> - 类似于<code>top</code>，但提供了更加交互式和友好的界面，可让用户交互式操作，支持颜色主题，可横向或纵向滚动浏览进程列表，并支持鼠标操作</p></li><li><p><code>uptime [选项]</code> - 用于查看系统总共运行了多长时间、系统的平均负载等信息</p></li><li><p><code>vmstat [间隔时间] [重复次数]</code> - vmstat(Virtual Memory Statistics) 的含义为显示虚拟内存状态，但是它可以报告关于进程、内存、I/O 等系统整体运行状态</p></li><li><p><code>free [选项]</code> - 用于查看系统的内存使用情况，包括已用内存、可用内存、缓冲区和缓存等</p></li><li><p><code>df [选项] [文件系统]</code> - 用于查看系统的磁盘空间使用情况，包括磁盘空间的总量、已使用量和可用量等，可以指定文件系统上</p><ul><li><code>df -a</code> - 查看全部文件系统</li></ul></li><li><p><code>du [选项] [文件]</code> - 用于查看指定目录或文件的磁盘空间使用情况，可以指定不同的选项来控制输出格式和单位</p></li><li><p><code>sar [选项] [时间间隔] [重复次数]</code> - 用于收集、报告和分析系统的性能统计信息，包括系统的CPU使用、内存使用、磁盘I/O、网络活动等详细信息。它的特点是可以连续对系统取样，获得大量的取样数据。取样数据和分析的结果都可以存入文件，使用它时消耗的系统资源很小</p></li><li><p><code>ps [选项]</code> - 用于查看系统中的进程信息，包括进程的 ID、状态、资源使用情况等</p><ul><li><code>ps -ef</code>/<code>ps -aux</code> - 这两个命令都是查看当前系统正在运行进程，两者的区别是展示格式不同</li><li>查看特定的进程 - <code>ps aux|grep redis</code>(查看包括redis字符串的进程)，也可使用<code>pgrep redis -a</code></li></ul></li><li><p><code>systemctl [命令] [服务名称]</code> - 管理系统的服务和单元，可查看系统服务的状态、启动、停止、重启等</p></li></ul><p><strong>网络通信</strong></p><ul><li><p><code>ping [选项] 目标主机</code> - 测试与目标主机的网络连接</p></li><li><p><code>ifconfig</code>或<code>ip</code> - 用于查看系统的网络接口信息，包括网络接口的IP地址、MAC 地址、状态等</p></li><li><p><code>netstat [选项]</code> - 用于查看系统的网络连接状态和网络统计信息，可以查看当前的网络连接情况、监听端口、网络协议等</p></li><li><p><code>ss [选项]</code> - 比<code>netstat</code>更好用，提供了更快速、更详细的网络连接信息</p></li></ul><p><strong>其他</strong></p><ul><li><p><code>sudo + 其他命令</code> - 以系统管理者的身份执行指令，也就是说，经由sudo所执行的指令就好像是root亲自执行</p></li><li><p><code>grep 要搜索的字符串 要搜索的文件 --color</code> - 搜索命令，<code>--color</code>代表高亮显示</p></li><li><p><code>kill -9 进程的pid</code> - 杀死进程(-9 表示强制终止)先用ps查找进程，然后用kill杀掉</p></li><li><p><code>shutdown -h now</code> - 指定现在立即关机</p><ul><li><code>shutdown +5 &quot;System will shutdown after 5 minutes&quot;</code> - 指定5分钟后关机，同时发出警告信息给登入用户</li></ul></li><li><p><code>reboot</code> - 重开机</p><ul><li><code>reboot -w</code> - 做个重开机的模拟(只有纪录并不会真的重开机)</li></ul></li></ul><h2 id=vivim-文本编辑><a class=anchor href=#vivim-文本编辑>#</a> vi/vim-文本编辑</h2><h3 id=基本-2><a class=anchor href=#基本-2>#</a> 基本</h3><ul><li><code>vi 文件路径</code> - 打开文件，不存在则自行创建</li><li><code>Esc</code> - 切换模式</li></ul><h3 id=命令行模式><a class=anchor href=#命令行模式>#</a> 命令行模式</h3><p><strong>光标移动</strong></p><ul><li><code>k</code> - 方向键上</li><li><code>j</code> - 方向键下</li><li><code>h</code> - 方向键左</li><li><code>l</code> - 方向键右</li></ul><p><strong>查找</strong></p><ul><li><code>/查找的内容</code> - 在文件内容中查找内容</li><li><code>n</code> - 在查找状态中，查找下一个</li><li><code>N</code> - 在查找状态中，查找上一个</li><li><code>/需查找的内容</code> 回车 - 按模式查找文件内容<ul><li><code>/\&lt;需查找的内容\&gt;</code> - 完全匹配查找</li></ul></li></ul><p><strong>插入</strong></p><ul><li><code>i</code> - 在光标所在位置<strong>前面</strong>开始插入</li><li><code>a</code> - 在光标所在位置<strong>后面</strong>开始插入</li><li><code>o</code> - 在光标所在位置<strong>下面</strong>插入空白行</li><li><code>O</code> - 在光标所在位置<strong>上面</strong>插入空白行</li><li><code>I</code> - 在光标所在位置的<strong>行首</strong>开始插入</li><li><code>A</code> - 在光标所在位置的<strong>行尾</strong>开始插入</li></ul><p><strong>删除</strong></p><ul><li><p><code>x</code> - 删除光标所在位置的一个字符</p><ul><li><code>nx</code> - 删除光标所在位置开始的n个字符</li></ul></li><li><p><code>dw</code> - 删除光标所在位置到本单词结尾的所有字符</p></li><li><p><code>D</code> - 删除光标所在行当前位置到行尾的所有字符</p></li><li><p><code>dd</code> - 删除光标所在位置的当前行</p><ul><li><code>ndd</code> - 从光标所在位置的当前行开始，删除n行</li></ul></li></ul><p><strong>替换</strong></p><ul><li><code>r 替换字符</code> - 替换光标所在位置的一个字符</li><li><code>R 所需替换的所有字符</code> - 从光标所在位置开始替换字符，直到按下<code>Esc</code>键</li><li><code>j</code> - 把当前行的下一行插入到光标所在当前行的尾部</li><li><code>~</code> - 对当前所在位置的字符进行大小写替换</li><li><code>Ctrl v 鼠标选取列</code> 接着按<code>I 输入内容</code> - 将选取列替换成所输入的内容</li><li><code>:%s/old_string/new_string/g</code> - 替换文件中的字符<ul><li><code>%</code> - 表示在整个文件中执行替换操作</li><li><code>s</code> - 表示替换的命令</li><li><code>/old_string/</code> - 要被替换的旧字符串</li><li><code>new_string</code> - 要替换成的新字符串</li><li><code>/g</code> - 表示全局替换，即一行中的所有匹配都会被替换。如果不使用<code>/g</code>，则只会替换每行中第一个匹配</li><li>存在特殊字符时(例如$)，使用<code>\(\&amp;\)</code>捕获，<code>\1</code>使用捕获(<code>:%s/auto\(\&amp;\)/spdlog::logger\1/g</code>)</li></ul></li></ul><p><strong>复制粘贴</strong></p><ul><li><p><code>yy</code> - 将光标所在行复制到缓冲区(类似于复制到剪贴板)</p><ul><li><code>nyy</code> - 从光标所在位置开始，复制n行到缓冲区</li></ul></li><li><p><code>光标选取内容，Ctrl Shift C</code> - 复制光标选中的内容(Ctrl c)</p></li><li><p><code>按i键，Ctrl Shift V</code> - 输出光标之前复制的内容(Ctrl V)</p></li><li><p><code>p</code> - 将缓冲区里的内容粘贴到光标所在位置</p></li><li><p>复制N个字母 - 按下<code>v</code>键进入Visual模式，通过键盘方向键选择，按下<code>y</code>键来复制，按下<code>p</code>键来粘贴</p></li></ul><p><strong>位置跳转</strong></p><ul><li><p><code>Ctrl + g</code> - 显示光标所在位置的行号和总行数</p></li><li><p><code>Ctrl + u</code> - 向上翻半页</p></li><li><p><code>Ctrl + d</code> - 向下翻页</p></li><li><p><code>nG</code> - 光标跳转到光标所在行的行首</p></li><li><p><code>:行数</code> - 指定光标跳转到第几行</p></li><li><p><code>G</code> - 光标跳转到文件最后一行</p></li><li><p><code>0</code>(数字零) - 光标跳转到当前行行首</p></li><li><p><code>$</code> - 光标跳转到当前行行尾</p></li><li><p><code>w</code> - 光标跳转到下个单词开头</p></li><li><p><code>b</code> - 光标跳转到上个单词的开头</p></li><li><p><code>e</code> - 光标跳转到本单词的尾部</p></li></ul><p><strong>文件操作</strong></p><ul><li><code>:w</code>回车 - 保存</li><li><code>:w!</code>回车 - 强制保存</li><li><code>:wq</code>回车 - 保存并退出</li><li><code>:x</code>回车 - 保存并退出</li><li><code>:q</code>回车 - 不保存并退出(有警告)</li><li><code>:q!</code>回车 - 不保存并退出(无警告)</li><li><code>u</code> - 撤销命令，可多次撤销至文件刚打开的状态</li><li><code>.</code> - 重复执行上一次执行的vi命令</li><li><code>Ctrl R</code> - 回到上一步操作(类似Ctrl Z)</li></ul><h2 id=环境变量><a class=anchor href=#环境变量>#</a> 环境变量</h2><p>程序(操作系统命令和应用程序)的执行环境，由多个环境变量组成。</p><h3 id=分类><a class=anchor href=#分类>#</a> 分类</h3><p><strong>按生效范围</strong></p><ul><li>系统环境变量 - 公共的，对全部用户都生效</li><li>用户环境变量 - 用户私有的，自定义的设置，只对该用户生效</li></ul><p><strong>按生存周期</strong></p><ul><li>永久环境变量 - 需要用户修改相关的配置文件，在环境变量脚本文件中配置，用户每次登录时会自动执行这些脚本，变量永久生效</li><li>临时环境变量 - 用户利用<code>export</code>命令，在当前终端下声明环境变量，关闭shell终端失效</li></ul><h3 id=linux环境变量shell环境变量><a class=anchor href=#linux环境变量shell环境变量>#</a> Linux环境变量(Shell环境变量)</h3><p>按编程变量规则组成，习惯用大写字母(如PATH、HOSTNAME、LANG等)。</p><h3 id=常用命令><a class=anchor href=#常用命令>#</a> 常用命令</h3><ul><li><p><code>env</code> - 查看当前用户全部的环境变量</p></li><li><p><code>env | grep 环境变量名</code> - 查看当前用户指定的环境变量</p></li><li><p><code>echo $环境变量名</code> - 查看当前用户指定的环境变量的值</p></li><li><p><code>export -p</code> - 输出当前系统定义的所有环境变量，此外<code>env</code>命令也可以列出所有环境变量</p></li><li><p>输出指定环境变量的值</p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment"># 输出当前的PATH环境变量的值</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment"># 输出当前的HOME环境变量的值</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token builtin class-name">echo</span> <span class="token environment constant">$HOME</span></pre></td></tr></table></figure></li></ul><h3 id=常用环境变量><a class=anchor href=#常用环境变量>#</a> 常用环境变量</h3><ul><li><p><code>LANG</code> - Linux系统的语言、地区、字符集</p></li><li><p><code>HOSTNAME</code> - 服务器的主机名</p></li><li><p><code>SHELL</code> - 用户当前使用的Shell解析器</p></li><li><p><code>HISTSIZE</code> - 保存历史命令(命令行之前已执行的命令)的数目</p></li><li><p><code>USER</code> - 当前登录用户的用户名</p></li><li><p><code>HOME</code> - 当前登录用户的主目录</p></li><li><p><code>PWD</code> - 当前工作目录</p></li><li><p><code>LD_LIBRARY_PATH</code> - <code>C/C++</code>语言动态链接库文件的搜索目录</p></li><li><p><code>CLASSPATH</code> - Java语言库文件的搜索目录</p></li></ul><p><strong>PATH</strong></p><ul><li>可执行程序的搜索目录，包括Linux系统命令和用户的应用程序。当执行程序的目录不在PATH指定的目录中，执行时需指定目录</li><li>PATH环境变量中存放的是目录列表，目录之间用冒号<code>:</code>分隔，最后的圆点<code>.</code>表示当前目录 - <code>export PATH=目录1:目录2:目录3:.</code>，包含<code>.</code>时可执行当前工作目录的程序否则写为<code>./程序名</code></li><li>用户的<code>.bash_profile</code>文件中，会对PATH进行扩充，如<code>export PATH=$PATH:$HOME/bin</code>，表示接上原来的PATH变量并额外添加了<code>HOME/bin</code></li></ul><h3 id=设置环境变量><a class=anchor href=#设置环境变量>#</a> 设置环境变量</h3><p><strong>临时环境变量</strong></p><ul><li><code>export 环境变量名=环境变量值</code> - 添加环境变量</li><li>环境变量的值，有空格之类的要加单引号</li><li>export设置的环境变量，退出Shell后会失效</li><li><code>source /etc/profile</code> - 修改完成之后，需要<code>source</code>命令让其生效或者关闭shell终端重新登录</li></ul><p><strong>系统环境变量</strong></p><ul><li>(Linux下<strong>不建议</strong>该方法)在<code>/etc/profile</code>文件中设置，用户登录时会执行该文件中设置的系统环境变量</li><li>(<strong>推荐方法</strong>)在<code>/etc/profile.d</code>目录中增加环境变量脚本文件</li><li>(Linux下<strong>不建议</strong>该方法)在<code>etc/bashrc</code>文件中设置，该配置会影响全部用户使用的<code>bash shell</code></li></ul><p><strong>用户环境变量</strong></p><ul><li>(<strong>推荐</strong>方法)在<code>.bash_profile</code>文件中设置</li><li>(<strong>不推荐</strong>)在<code>.bashrc</code>文件中设置，设置后每次打开Shell时都会读取一次该文件</li><li>在<code>.bash_logout</code>文件中设置，退出系统时执行该文件</li><li>在<code>.bash_history</code>文件中设置，该文件保存了当前用户使用过的历史命令</li></ul><h3 id=环境变量脚本文件的执行顺序><a class=anchor href=#环境变量脚本文件的执行顺序>#</a> 环境变量脚本文件的执行顺序</h3><p><code>/etc/profile</code> → <code>/etc/profile.d</code> → <code>/etc/bashrc</code> → <code>用户的.bash_profile</code> → <code>用户的.bashrc</code></p><ul><li>存在同名环境变量并且多个脚本中有该变量，以最后执行的脚本中的配置为准</li><li>当设置完环境变量时，可通过<code>source 脚本名</code>使该其立即生效</li></ul><h2 id=字符集和字符编码><a class=anchor href=#字符集和字符编码>#</a> 字符集和字符编码</h2><h3 id=基本-3><a class=anchor href=#基本-3>#</a> 基本</h3><ul><li><code>编码</code> - 计算机用二进制并按照某种规则将字符存储在计算机中</li><li><code>解码</code> - 计算机按某种规则将二进制解析并显示出来</li><li><code>乱码</code> - 解码过程中使用了错误的解码规则</li></ul><p>字符编码指数字与字符之间建立的对应关系，常见字符编码有ASCII，GBK，GB18030，Unicode等</p><ul><li><code>GBK字符编码</code> - 采用双字节表示，用于表示汉字和图形符号。</li><li><code>Unicode国际编码</code> - 将全世界所有的字符统一编码，不存在字符集不兼容和字符转换的问题</li><li><code>UTF-8</code> - 编码兼容ASCII码，拉丁文、希腊文等使用两个字节，汉字使用三个字节</li><li>UTF-16</li><li>UTF-32</li></ul><h3 id=汉字的编码><a class=anchor href=#汉字的编码>#</a> 汉字的编码</h3><p><strong>支持汉字(简中)的编码</strong></p><p>有GB2312、GB13000、GBK、GB18030和Unicode(UTF-8，UTF-16，UTF-32)</p><ul><li><code>GB2312</code> - 支持大部分常用的简体汉字，但无法满足现在的需求</li><li><code>GB13000</code> - 由国家标准化委员会制定，后来没有被广泛应用</li><li><code>GBK</code> - 由国家标准化委员会制定并兼容<code>GB2312</code>，再额外扩展了汉字，受微软的支持，得到广泛应用</li><li><code>GB18030</code> - 比GBK额外增加了汉字，使用了2byte与4byte混合编码模式</li><li><code>Unicode</code> - 国际编码，通用性强</li></ul><p><strong>汉字编码的选择</strong></p><ul><li>在操作系统和数据库中，常用汉字编码有GBK、GB18030和Unicode</li><li>GBK和GB18030编码的优势是占用空间小</li><li>Unicode编码的优势是全球化的支持</li><li>GBK和GB18030与Unicode编码之间需要转换，否则会出现汉字乱码</li></ul><h2 id=设置linux的字符集><a class=anchor href=#设置linux的字符集>#</a> 设置Linux的字符集</h2><h3 id=常用命令-2><a class=anchor href=#常用命令-2>#</a> 常用命令</h3><p><strong>查看</strong></p><ul><li><code>locale -a</code> - 查看当前系统全部已安装的字符集</li><li><code>locale -a | grep 字符集名称</code> - 查看当前系统已安装的指定的字符集</li></ul><p><strong>安装中文字符集</strong></p><ul><li><code>yum -y install chinese-support</code></li><li><code>yum -y groupinstall chinese-support</code></li></ul><p><strong>修改字符集配置</strong></p><ul><li>配置文件在<code>/etc/locale.conf</code>文件中，修改后系统会自动配置，无需设置</li><li>客户端的字符编码需要与服务器的字符编码一致，否则会乱码</li></ul><h3 id=编码转换命令><a class=anchor href=#编码转换命令>#</a> 编码转换命令</h3><p><code>iconv</code> - 把文件内容从一种编码转换成另一种编码，可选命令参数有</p><ul><li><code>--list</code> - 列出iconv支持的编码列表</li><li><code>-f 字符编码名</code> - 源文件内容的编码</li><li><code>-t 字符编码名</code> - 目标文件内容的编码</li><li><code>-o 文件路径</code> - 指定输出文件</li><li><code>-c</code> - 忽略输出的非法字符</li><li><code>-I</code> - 列出已知的编码字符集</li><li><code>-s</code> - 禁止警告信息，但不是错误信息</li><li><code>--verbose</code> - 显示进度信息</li></ul><p>例如 - <code>iconv -f gbk -t utf-8 book1.c -o /tmp/book1_utf8.c</code></p><h3 id=应用经验><a class=anchor href=#应用经验>#</a> 应用经验</h3><ul><li>Linux系统做业务之前，就应该确定字符集并不在改变，系统业务化后，修改字符集非常麻烦</li><li>虽然GB18030字符集很丰富，但由于有些汉字是4个字节，所以汉字集更推荐使用GBK字符集</li><li>设置Linux字符集时，还要考虑WEB系统和数据库系统采用的字符集，最好保持一致</li></ul><h2 id=软件包的安装><a class=anchor href=#软件包的安装>#</a> 软件包的安装</h2><h3 id=基本-4><a class=anchor href=#基本-4>#</a> 基本</h3><ul><li><code>yum -y install 软件包名</code> - 在线安装或升级软件包</li><li><code>yum -y remove 软件包</code> - 删除软件包</li></ul><h3 id=rpm><a class=anchor href=#rpm>#</a> rpm</h3><p><strong>安装、升级和删除</strong></p><ul><li><code>rpm -ivh 软件安装包文件路径</code> - 安装软件包</li><li><code>rpm -ivh 软件安装包文件路径 --nodeps --force</code> - 强制安装软件包</li><li><code>rpm -Uvh 软件安装包文件路径</code> - 升级软件包</li><li><code>rpm -Uvh 软件安装包文件路径 --nodeps -- force</code> - 强制升级软件包</li><li><code>rpm -e 软件包名</code> - 删除软件包</li></ul><p><strong>已安装状态</strong></p><ul><li><code>rpm -q 软件包名</code> - 查看已安装的软件包</li><li><code>rpm -ql 软件包名</code> - 查看已安装软件包安装的目录和文件(包括可执行程序，配置文件和帮助文档)</li><li><code>rpm -ql ftp</code> - 查看ftp客户端</li><li><code>rpm -qi 软件包名</code> - 查看已安装软件包的详细信息</li><li><code>rpm -qc 软件包名</code> - 查看已安装软件包的配置</li><li><code>rpm -qR 软件包名</code> - 查看已安装软件包所依赖的软件包及文件</li></ul><p><strong>未安装状态</strong></p><ul><li><code>rpm -qpi 软件安装包的安装文件路径</code> - 查看一个软件安装包的安装文件的详细信息</li><li><code>rpm -qpR 软件安装包的安装文件路径</code> - 查看软件安装包的依赖关系</li></ul><h3 id=yum><a class=anchor href=#yum>#</a> yum</h3><p><strong>详情</strong></p><ul><li>yum是rpm的前端程序，可自动解决依赖关系</li><li>可对rpm进行分组，基于组进行安装操作</li><li>引入仓库概念，支持多个仓库</li></ul><p><strong>语法</strong></p><ul><li><code>yum [options][command][package...]</code><ul><li><p><code>options</code> - 可选参数 - <code>-h</code>帮助，<code>-y</code>安装过程中的提示选择全部默认选yes，<code>-q</code>不显示安装的过程</p></li><li><p><code>command</code> - 待操作的命令</p></li><li><p><code>package</code> - 待操作的软件包名，多个软件包名用空格分开，支持通配符<code>*</code></p></li></ul></li></ul><p><strong>常用命令</strong></p><ul><li><code>yum install 软件包名</code> - 安装或升级软件包</li><li><code>yum update 软件包</code> - 升级软件包</li><li><code>yum update</code> - 更新所有软件包</li><li><code>yum remove 软件包名</code> - 删除软件包</li><li><code>yum search 软件包名</code> - 查找软件包</li><li><code>yum check-update</code> - 列出可更新的软件包清单</li><li><code>yum list</code> - 列出所有可安装软件包的清单</li><li><code>yum clean</code> - 清除缓存</li></ul><p><strong>应用经验</strong></p><ul><li>推荐使用yum命令</li><li>rpm的查看包的详细信息、安装目录、配置文件等命令也有很高的实用性</li></ul><h2 id=系统服务管理和配置><a class=anchor href=#系统服务管理和配置>#</a> 系统服务管理和配置</h2><h3 id=系统服务的管理><a class=anchor href=#系统服务的管理>#</a> 系统服务的管理</h3><p>主要有服务的启动、停止、查看、开机自启动等。</p><p><strong>systemctl服务命令</strong></p><ul><li><p><code>systemctl start 服务名</code> - 启动服务</p></li><li><p><code>systemctl start vsftpd</code> - 启动ftp服务</p></li><li><p><code>systemctl start vsftpd.service</code> - 启动ftp服务，<code>.service</code>可忽略</p></li><li><p><code>systemctl stop 服务名</code> - 停止服务</p></li><li><p><code>systemctl restart 服务名</code> - 如果服务没有启动就重启它</p></li><li><p><code>systemctl is -active 服务名</code> - 查看服务是否已启动</p></li><li><p><code>systemctl status 服务名</code> - 查看服务状态</p></li><li><p><code>systemctl enable 服务名</code> - 启用开机自启动服务</p></li><li><p><code>systemctl disable 服务名</code> - 停用开机自启动服务</p></li><li><p><code>systemctl is -enable 服务名</code> - 查看服务是否为开机自启动</p></li><li><p><code>systemctl try-restart 服务名</code> - 只重启正在运行中的服务</p></li><li><p><code>systemctl list -units --type service -all</code> - 显示所有服务状态，按空格显示下一页，按q退出</p></li><li><p><code>systemctl list -unit -files --type service</code> - 查看所有服务状态，按空格显示下一页，按q退出</p></li><li><p><code>systemctl list -unit -files | grep enabled</code> - 查看启动成功的服务列表</p></li><li><p><code>systemctl --failed</code> - 查看启动失败的服务列表</p></li><li><p><code>systemctl list -dependencies --after 服务名</code> - 列出在指定服务之前启动的服务(依赖)</p></li><li><p><code>systemctl list -dependencies --before 服务名</code> - 列出在指定服务之后启动的服务(被依赖)</p></li></ul><h3 id=添加自定义的系统服务><a class=anchor href=#添加自定义的系统服务>#</a> 添加自定义的系统服务</h3><ul><li>把需要启动或关闭的程序制作成系统服务，在开机或关机时系统会自动运行脚本</li><li><code>chmod +x 脚本决定路径</code> - 修改脚本的权限为可执行</li></ul><p><strong>Unit部分</strong></p><p>Unit部分包含启动顺序与依赖关系。</p><figure class="highlight shell"><figcaption data-lang=Bash></figcaption><table><tr><td data-num=1></td><td><pre><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span></pre></td></tr><tr><td data-num=2></td><td><pre>Description <span class="token operator">=</span> Oracle RDBMS</pre></td></tr><tr><td data-num=3></td><td><pre>After <span class="token operator">=</span> network.target</pre></td></tr></table></figure><ul><li><code>Description</code>字段 - 给出当前服务的简单描述</li><li><code>Documentation</code>字段 - 给出文档位置</li><li><code>After</code>字段 - 表示本服务应该在某服务之后启动</li><li><code>Before</code>字段 - 表示本服务应该在某服务之前启动</li><li><code>After</code>字段 与<code>Before</code>字段只涉及启动顺序，不涉及依赖关系</li><li><code>Wants</code>字段 - 表示本服务与某服务之间存在依赖关系，如果被依赖的服务启动失败或停止运行，不影响本服务的继续运行</li><li><code>Requires</code>字段 - 表示本服务与某服务之间存在强依赖关系，如果被依赖的服务启动失败或停止运行，本服务也必须停止</li></ul><p><strong>Service部分</strong></p><p>Service部分定义如何启动/重启/停止服务。</p><figure class="highlight shell"><figcaption data-lang=Bash></figcaption><table><tr><td data-num=1></td><td><pre><span class="token punctuation">[</span>Service<span class="token punctuation">]</span></pre></td></tr><tr><td data-num=2></td><td><pre>Type <span class="token operator">=</span> simple</pre></td></tr><tr><td data-num=3></td><td><pre>ExecStart <span class="token operator">=</span> /usr/bin/su <span class="token parameter variable">-oracle</span> <span class="token parameter variable">-c</span> <span class="token string">"/oracle/home/bin/dbstart >> /tmp/oracle.log"</span></pre></td></tr><tr><td data-num=4></td><td><pre>ExecReload <span class="token operator">=</span> /usr/bin/su <span class="token parameter variable">-oracle</span> <span class="token parameter variable">-c</span> <span class="token string">"/oracle/home/bin/dbrestart >> /tmp/oracle.log"</span></pre></td></tr><tr><td data-num=5></td><td><pre>ExecStop <span class="token operator">=</span> /usr/bin/su <span class="token parameter variable">-oracle</span> <span class="token parameter variable">-c</span> <span class="token string">"/oracle/home/bin/dbshut >> /tmp/oracle.log"</span></pre></td></tr><tr><td data-num=6></td><td><pre>RemainAfterExit <span class="token operator">=</span> <span class="token function">yes</span></pre></td></tr></table></figure><ul><li><p><code>Type</code>字段 - 启动类型，它可以设置以下值</p><ul><li><p><code>simple</code>(默认值) - ExecStart字段启动的进程为主进程</p></li><li><p><code>oneshot</code> - 类似simple，但只执行一次，Systemd会等待它执行完，才启动其他服务</p></li><li><p><code>dbus</code> - 类似simple，但会等待D-Bus信号后启动</p></li><li><p><code>notify</code> - 类型simple，启动结束后会发出通知信号，然后Systemd再启动其他服务</p></li><li><p><code>forking</code> - ExecStart字段将以fork()方式启动，此时父进程将会退出，子进程成为主进程</p></li></ul></li><li><p><code>ExecStart</code>字段 - 启动服务时执行的命令，可以是可执行程序、系统命令或shell脚本</p></li><li><p><code>ExecReload</code>字段 - 停止服务时执行的命令，可以是可执行程序、系统命令或shell脚本</p></li><li><p><code>RemainAfterExit</code>字段 - 设为yes表示进程退出后服务仍然保持运行</p></li><li><p><code>KillMode</code>字段 - 定义Systemd如何停止sshd服务，可设置以下值</p><ul><li><code>control-group</code>(默认值) - 当前控制组里的所有子进程都会被杀掉</li><li><code>process</code> - 只杀主进程</li><li><code>mixed</code> - 主进程将收到SIGTERM信号，子进程收到SIGKILL信号</li><li><code>none</code> - 没有进程会被杀掉，只执行stop命令</li></ul></li><li><p><code>Restart</code>字段 - 定义了服务程序退出后，System的的启动方式，可设置以下值</p><ul><li><code>no</code>(默认值) - 退出后不会重启</li><li><code>on-success</code> - 只有正常退出时(退出状态码为0)，才会重启</li><li><code>on-failure</code> - 非正常退出时(退出状态码为非0)，包括信号终止和超时，才会重启</li><li><code>on-abnormal</code> - 只有信号终止和超时，才会重启</li><li><code>on-abort</code> - 只有在收到没有捕捉到的信号终止时，才会重启</li><li><code>on-watchdog</code> - 超时退出，才会重启</li><li><code>always</code> - 不管什么退出原因都重启</li></ul></li><li><p><code>RestartSec</code>字段 - 表示Systemd重启服务之前，需要等待的秒数</p></li></ul><p><strong>Install部分</strong></p><p>Install部分定义如何安装这个配置文件，即怎样做到开机启动。</p><figure class="highlight shell"><figcaption data-lang=Bash></figcaption><table><tr><td data-num=1></td><td><pre><span class="token punctuation">[</span>Install<span class="token punctuation">]</span></pre></td></tr><tr><td data-num=2></td><td><pre>WantedBy <span class="token operator">=</span> multi-user.target</pre></td></tr></table></figure><ul><li><code>WantedBy</code>字段，表示该服务所在的Target。Target的含义是服务组，表示一组服务。</li></ul><p>上面<code>multi-user.target</code>指oracle所在的Target是<code>multi-user.target</code>(多用户模式)。执行<code>systemctl enable oracle.service</code>命令是，oracle.service会被链接到<code>/etc/systemd/system/multi-user.target.wants</code>目录中，实现开机启动的功能。</p><h2 id=防火墙的管理和配置><a class=anchor href=#防火墙的管理和配置>#</a> 防火墙的管理和配置</h2><h3 id=概念><a class=anchor href=#概念>#</a> 概念</h3><ul><li>防火墙技术用于安全管理的软件和硬件设备，是计算机内网与外网之间构建的一道相对隔绝的保护屏障</li><li>分为网络防火墙和主机防火墙</li><li>网络防火墙有软件和硬件组成，很贵，包括入侵检测、网络地址转换、网络操作的审计监控等</li><li>主机防火墙只有软件部分，用于保护本操作系统，只能防范简单的攻击</li><li>云服务器需要同时配置网络防火墙和主机防火墙</li></ul><h3 id=防火墙的配置><a class=anchor href=#防火墙的配置>#</a> 防火墙的配置</h3><p><strong>查看命令</strong></p><ul><li><code>firewall-cmd --version</code> - 查看防火墙的版本</li><li><code>firewall-cmd --state</code> - 查看防火墙的状态</li><li><code>systemctl status firewalld</code> - 查看防火墙的服务状态(普通用户可执行)</li><li><code>firewall-cmd --list -all</code> - 查看防火墙的全部信息</li><li><code>firewall-cmd --list port</code> - 查看防火墙已开通的端口</li><li><code>firewall-cmd --list service</code> - 查看防火墙已开通的服务</li><li><code>firewall-cmd --get -services</code> - 查看全部的服务列表(普通用户可执行)</li><li><code>systemctl is-enabled firewalld</code> - 查看服务器是否应用开机启动</li></ul><p><strong>配置命令</strong></p><ul><li><code>systemctl start firewalld</code> - 启动防火墙</li><li><code>systemctl restart firewalld</code> - 重启防火墙</li><li><code>systemctl stop firewalld</code> - 关闭防火墙</li><li><code>firewall-cmd --zone=public --add-port=端口号/tcp --permanent</code> - 开放某个端口</li><li><code>firewall-cmd --zone=public --remove-port=端口号/tcp --permanent</code> - 移除某个端口</li><li><code>firewall-cmd --zone=public --add-port=端口号起始-端口号结束/tcp --permanent</code> - 开放某个范围的端口</li><li><code>firewall-cmd --zone=public --add-port=端口号起始-端口号结束/tcp --permanent</code> - 移除某个范围的端口</li><li><code>firewall-cmd --zone=public --add-service=服务名 --permanent</code> - 开放某个服务</li><li><code>firewall-cmd --zone=public --remove-service=服务名 --permanent</code> - 移除某个服务</li><li><code>firewall-cmd --reload</code> - 重新加载防火墙配置(修改后需重新加载或重启防火墙)</li><li><code>systemctl enable firewalld</code> - 启用防火墙服务</li><li><code>systemctl disable firewalld</code> - 禁用防火墙服务</li></ul><h2 id=客户端sftp命令><a class=anchor href=#客户端sftp命令>#</a> 客户端(SFTP)命令</h2><p><strong>服务器</strong></p><ul><li>查看服务器当前目录 - <code>pwd</code></li><li>查看服务器文件列表 - <code>ls</code></li><li>改变服务器路径 - <code>cd 路径</code></li><li>传入文件到服务器当前路径 - <code>put 文件路径</code></li><li>从服务器当前路径获取文件 - <code>get 文件路径</code></li></ul><p><strong>本地</strong></p><ul><li>查看本地当前目录 - <code>lpwd</code></li><li>查看本地文件列表 - <code>lls</code></li><li>改变本地路径 - <code>lcd 路径</code></li></ul><h2 id=文件传输服务file-transfer-protocol-ftp><a class=anchor href=#文件传输服务file-transfer-protocol-ftp>#</a> 文件传输服务(File Transfer Protocol - ftp)</h2><h3 id=基本-5><a class=anchor href=#基本-5>#</a> 基本</h3><p>ftp(文件传输协议)，基于TCP/IP协议的应用层协议，用于文件的传输，包括ftp服务器和ftp客户端。</p><p>ftp协议古老，不安全，但被广泛应用，有<strong>port模式</strong>(主动模式)和<strong>pasv模式</strong>(被动模式)，共享上网环境下只有被动模式(请求被主路由接受了)。</p><p><strong>主动模式</strong></p><figure class="highlight tex"><figcaption data-lang=TeX></figcaption><table><tr><td data-num=1></td><td><pre>ftp	  发送ftp命令(发起TCP连接) (21)——————> 接收ftp命令    ftp </pre></td></tr><tr><td data-num=2></td><td><pre>客户端	传输数据          &lt;——————(20) 传输数据 (发起TCP连接)服务器</pre></td></tr></table></figure><p><strong>被动模式</strong></p><figure class="highlight tex"><figcaption data-lang=TeX></figcaption><table><tr><td data-num=1></td><td><pre>ftp	  发送ftp命令(发起TCP连接) (21)——————> 接收ftp命令 ftp </pre></td></tr><tr><td data-num=2></td><td><pre>客户端	传输数据(发起TCP连接)    (高端口)——————>传输数据  服务器</pre></td></tr></table></figure><h3 id=安装ftp软件包><a class=anchor href=#安装ftp软件包>#</a> 安装ftp软件包</h3><ul><li><code>yum -y install vsftpd</code> - 安装ftp服务器</li><li><code>yum -y install ftp</code> - 安装ftp客户端</li></ul><h3 id=配置ftp服务器><a class=anchor href=#配置ftp服务器>#</a> 配置ftp服务器</h3><ul><li><strong>关闭SELINUX</strong>，修改<code>/etc/selinux/config</code>文件，把SELINUX参数值设为disabled(重启或执行<code>setenforce 0</code>使其生效)</li><li><strong>配置ftp数据端口</strong>(也称高端口)参数，在<code>/etc/vsftpd/vsftpd.conf</code>文件中配置，由下面两个参数指定<ul><li><code>pasv_min_port=5000</code> - 高端口范围的最小值</li><li><code>pasv_max_port=5500</code> - 高端口范围的最大值</li></ul></li><li><strong>开通防火墙</strong><ul><li><code>firewall-cmd --zone=public --add-service=ftp --permanent</code> - 开通ftp服务</li><li><code>firewall-cmd --zone=public --add-port=21/tcp --permanent</code></li><li><code>firewall-cmd --zone=public --add-port=5000-5500/tcp --permanent</code></li><li><code>systemctl resatrt firewalld.service</code> - 重启防火墙</li></ul></li><li><strong>启动vsftpd服务</strong><ul><li><code>systemctl start vsftpd</code> - 启动vsftpd服务</li><li><code>systemctl stop vsftpd</code> - 停止vsftpd服务</li><li><code>systemctl restart vsftpd</code> - 重启vsftpd服务</li><li><code>systemctl status vsftpd</code> - 查看vsftpd服务状态</li><li><code>systemctl enable vsftpd</code> - 启动开机自启动vsftpd服务</li><li><code>systemctl disable vsftpd</code> - 禁用开机自启动vsftpd服务</li></ul></li></ul><h3 id=常用命令-3><a class=anchor href=#常用命令-3>#</a> 常用命令</h3><p><strong>登录服务器</strong></p><ul><li><code>ftp 服务器ip地址</code></li><li>输入<code>ftp</code>后再输入<code>open 服务器ip地址</code></li><li><code>ftp -n 服务器ip地址</code></li></ul><p><strong>目录操作</strong></p><ul><li><code>pwd</code> - 查看服务器工作目录</li><li><code>cd 目录名</code> - 切换服务器工作目录</li><li><code>lcd 目录名</code> - 切换本地工作目录</li><li>列出目录或文件名的详细信息<ul><li><code>ls 目录或文件名</code></li><li><code>dir 目录或文件名</code></li></ul></li><li><code>nlist 目录名或文件名 [本地文件路径]</code> - 列出目录下匹配的文件，[本地文件路径]可选指结果输出到该文件中</li></ul><p><strong>下载和上传文件</strong></p><ul><li><strong>传输模式</strong> - ftp传输模式分为二进制和ASCII码两种模式，二进制模式可以传输任何文件，ASCII码模式只能传输<code>.txt</code>，<code>.htm</code>等ascii码文件，实际开发中，都用二进制<ul><li><code>type</code> - 查看当前传输模式</li><li><code>bin</code> - 设定传输模式为二进制</li><li><code>ascii</code> - 设定传输模式为ASCII</li></ul></li><li><strong>下载</strong><ul><li><code>get | recv 服务器文件路径 [本地文件路径]</code> - 下载单个文件，不允许使用通配符，路径不是绝对路径情况下默认是当前工作目录，[本地文件路径]可选指把服务器文件下载为指定文件</li><li><code>mget 服务器文件1 服务器文件2...</code> - 下载多个文件，用空格分开，下载的文件在当前工作目录，可使用通配符</li></ul></li><li><strong>上传</strong><ul><li><code>put 本地文件名 [服务器文件名]</code>或<code>send 本地文件名 [服务器文件名]</code> - 上传单个文件，不允许通配符，其他与下载的基本相通</li><li><code>mput 本地文件1 本地文件2...</code> - 上传多个文件，用空格分开，可以使用通配符，下载的文件在当前工作目录</li></ul></li></ul><p><strong>其他</strong></p><ul><li><code>rename 旧文件名 新文件名</code> - 重命名ftp服务器上的文件</li><li><code>delete 文件</code> - 删除ftp服务器上的文件</li><li><code>mdelete 文件1 文件2...</code> - 删除ftp服务器上的多个文件</li><li><code>mkdir 创建目录名</code> - 在ftp服务器当前工作目录上创建目录</li><li><code>rmdir 创建目录名</code> - 在ftp服务器当前工作目录上删除目录</li><li><code>passive</code> - 切换传输模式</li><li><code>help [命令名]</code> - 显示相关命令的帮助信息</li><li><code>bye</code> - 退出ftp</li></ul><h2 id=linux计划任务crontab><a class=anchor href=#linux计划任务crontab>#</a> Linux计划任务(crontab)</h2><h3 id=概念-2><a class=anchor href=#概念-2>#</a> 概念</h3><ul><li>Linux系统采用crond守护进程控制系统和用户的计划任务，实现周期性的执行某种任务或除了某些事件</li><li>Linux系统本身有很多计划任务，crond是默认安装和启动的，它会每分钟都检查是否有需要执行的任务，可通过<code>systemctl status crond</code>命令查看crond服务的运行情况</li></ul><h3 id=用户计划任务><a class=anchor href=#用户计划任务>#</a> 用户计划任务</h3><p>Linux的每个用户都可以定义自己的计划任务，周期性的执行脚本或程序。计划任务的内容存放在crontab文件中，每个用户都有自己的crontab文件。</p><p><strong>常用命令</strong></p><ul><li><code>crontab -I [-u 用户名]</code> - root用户可以用<code>-u</code>指令查看指定用户的计划任务，没有<code>-u</code>指令则表示查看自己的计划任务。普通用户只能查看自己的计划任务，无法使用<code>-u</code>指令</li><li><code>crontab -e [-u 用户名]</code> - root用户可以用<code>-u</code>指令编辑指定用户的计划任务，没有<code>-u</code>指令则表示编辑自己的计划任务。普通用户只能编辑自己的计划任务，无法使用<code>-u</code>指令。通过vi编辑</li><li><code>crontab -r [-u 用户名]</code> - root用户可以用<code>-u</code>指令删除指定用户的计划任务，没有<code>-u</code>指令则表示删除自己的计划任务。普通用户只能删除自己的计划任务，无法使用<code>-u</code>指令</li></ul><h2 id=推荐工具><a class=anchor href=#推荐工具>#</a> 推荐工具</h2><h3 id=gnu-wget下载工具><a class=anchor href=#gnu-wget下载工具>#</a> GNU Wget下载工具</h3><p>GUN Wget简称wget，是一个用于从互联网上下载文件的自由开源命令行工具。GNU Wget的名称中的GNU意味着它是GNU计划的一部分，是一个自由软件项目，旨在为用户提供自由的软件工具。</p><p><strong>支持的功能</strong></p><ul><li>下载文件和网页</li><li>递归下载，断点续传，后台下载</li><li>自定义选项，脚本和自动化</li></ul><p>安装命令 - <code>yum install wget</code></p><figure class="highlight shell"><figcaption data-lang=Bash></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment"># 基本使用形式为</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment"># 下载单个文件</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token function">wget</span> URL</pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment"># 下载单个文件并指定保存文件的名称</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token function">wget</span> <span class="token parameter variable">-O</span> file_name.xxx URL</pre></td></tr><tr><td data-num=7></td><td><pre></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token comment"># 下载单个文件并限制下载速度</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token function">wget</span> --limit-rate<span class="token operator">=</span>200k URL</pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token comment"># 后台下载</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token function">wget</span> <span class="token parameter variable">-b</span> URL</pre></td></tr></table></figure><h3 id=yum-utils工具集><a class=anchor href=#yum-utils工具集>#</a> yum-utils工具集</h3><p>安装命令 - <code>yum install yum-utils</code></p><p><code>yum-utils</code>是一个实用工具集，用于增强和扩展在基于RPM的Linux发行版上使用yum包管理器的功能。<code>yum-utils</code>提供了各种命令行工具，用于执行不同的系统管理任务，如管理软件包存储库、清理系统、查找软件包信息等。</p><h3 id=tree软件><a class=anchor href=#tree软件>#</a> Tree软件</h3><p>安装命令<code>yum -y install tree</code></p><p>用于生成目录结构，例如</p><figure class="highlight tex"><figcaption data-lang=TeX></figcaption><table><tr><td data-num=1></td><td><pre>httpserver</pre></td></tr><tr><td data-num=2></td><td><pre>├── _database</pre></td></tr><tr><td data-num=3></td><td><pre>│   ├── db.c</pre></td></tr><tr><td data-num=4></td><td><pre>│   └── db.h</pre></td></tr><tr><td data-num=5></td><td><pre>├── docs</pre></td></tr><tr><td data-num=6></td><td><pre>│   ├── css</pre></td></tr><tr><td data-num=7></td><td><pre>│   │   └── comments.css</pre></td></tr><tr><td data-num=8></td><td><pre>│   ├── img</pre></td></tr><tr><td data-num=9></td><td><pre>│   │   └── img.png</pre></td></tr><tr><td data-num=10></td><td><pre>│   ├── index.html</pre></td></tr><tr><td data-num=11></td><td><pre>│   └── js</pre></td></tr><tr><td data-num=12></td><td><pre>│       └── comments.js</pre></td></tr></table></figure><h3 id=fail2ban><a class=anchor href=#fail2ban>#</a> Fail2ban</h3><p>Fail2ban是一个用于防范暴力破解攻击的开源软件，它可以监视系统日志文件，检测到恶意登录尝试或其他类型的恶意行为后，自动地采取预先配置的防御措施来保护服务器或计算机系统。</p><figure class="highlight bash"><figcaption data-lang=bash></figcaption><table><tr><td data-num=1></td><td><pre>yum update</pre></td></tr><tr><td data-num=2></td><td><pre>yum <span class="token function">install</span> epel-release</pre></td></tr><tr><td data-num=3></td><td><pre>yum <span class="token function">install</span> fail2ban</pre></td></tr><tr><td data-num=4></td><td><pre><span class="token function">cp</span> /etc/fail2ban/jail.conf /etc/fail2ban/jail.local</pre></td></tr><tr><td data-num=5></td><td><pre><span class="token function">vi</span> /etc/fail2ban/jail.local</pre></td></tr></table></figure><figure class="highlight ini"><figcaption data-lang=ini></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment"># 默认10分钟内</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">sshd</span><span class="token punctuation">]</span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token key attr-name">enabled</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token key attr-name">port</span>    <span class="token punctuation">=</span> <span class="token value attr-value">ssh</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token key attr-name">filter</span>  <span class="token punctuation">=</span> <span class="token value attr-value">sshd</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token key attr-name">logpath</span> <span class="token punctuation">=</span> <span class="token value attr-value">/var/log/secure</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token key attr-name">maxretry</span> <span class="token punctuation">=</span> <span class="token value attr-value">5</span></pre></td></tr></table></figure><figure class="highlight bash"><figcaption data-lang=bash></figcaption><table><tr><td data-num=1></td><td><pre>systemctl start fail2ban</pre></td></tr><tr><td data-num=2></td><td><pre>systemctl <span class="token builtin class-name">enable</span> fail2ban</pre></td></tr><tr><td data-num=3></td><td><pre>systemctl status fail2ban</pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment"># 修改配置后重新加载</span></pre></td></tr><tr><td data-num=6></td><td><pre>systemctl restart fail2ban</pre></td></tr><tr><td data-num=7></td><td><pre></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token comment"># 查看当前监控状态</span></pre></td></tr><tr><td data-num=9></td><td><pre>fail2ban-client status</pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token comment"># 查看监控的详细信息</span></pre></td></tr><tr><td data-num=12></td><td><pre>fail2ban-client status sshd</pre></td></tr><tr><td data-num=13></td><td><pre></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token comment"># 解禁IP</span></pre></td></tr><tr><td data-num=15></td><td><pre>fail2ban-client <span class="token builtin class-name">set</span> sshd unbanip <span class="token number">192.168</span>.1.100</pre></td></tr><tr><td data-num=16></td><td><pre></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token comment"># 主动禁止IP</span></pre></td></tr><tr><td data-num=18></td><td><pre>fail2ban-client <span class="token builtin class-name">set</span> sshd banip <span class="token number">192.168</span>.1.100</pre></td></tr></table></figure><h2 id=shell编程><a class=anchor href=#shell编程>#</a> Shell编程</h2><h3 id=概述><a class=anchor href=#概述>#</a> 概述</h3><p>简单来说Shell编程就是对一堆Linux命令的逻辑化处理。</p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/network-programming/linux/3.webp alt=""></p><p>Shell文件以<code>.sh</code>结尾，sh即Shell(扩展名并不影响脚本执行，如果用php写shell脚本，扩展名就用php即可)</p><figure class="highlight sh"><figcaption data-lang=sh><span>hellowworld.sh</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment"># echo是linux中的输出命令，`#`表示注释</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"helloworld!"</span></pre></td></tr></table></figure><p>第一行比较特殊，一般都会以<code>#!</code>开始来指定使用的shell类型。在linux中，除了<code>bash shell</code>以外，还有很多版本的shell，例如zsh、dash等等，不过bash shell还是使用最多的。</p><p><code>./helloworld.sh</code> - 运行脚本，一定要写成<code>./helloworld.sh</code>，而不是<code>helloworld.sh</code>，运行其它二进制的程序也一样。假如直接写 <code>helloworld.sh</code>，linux系统会去PATH里寻找有没有叫<code>helloworld.shopen in new window</code>的，而只有<code>/bin</code>, <code>/sbin</code>, <code>/usr/bin</code>，<code>/usr/sbin</code>等在PATH里，当前目录通常不在PATH里，所以写成<code>helloworld.sh</code>是会找不到命令的，要用<code>./helloworld.sh</code>形式表示就在当前目录找。</p><h3 id=shell变量><a class=anchor href=#shell变量>#</a> Shell变量</h3><p><strong>Shell编程中一般分为三种变量</strong></p><ul><li><strong>自定义变量</strong> - 仅在当前Shell实例中有效，其他Shell启动的程序不能访问局部变量</li><li><strong>Linux已定义的环境变量</strong> - 环境变量，例如<code>PATH</code>, <code>HOME</code>等这类变量可以直接使用)，使用 <code>env</code> 命令可以查看所有的环境变量，而set命令既可以查看环境变量也可以查看自定义变量</li><li><strong>Shell变量</strong> - Shell变量是由Shell程序设置的特殊变量。Shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了 Shell 的正常运行</li></ul><p><strong>常用的环境变量</strong></p><table><thead><tr><th>环境变量名</th><th>描述</th></tr></thead><tbody><tr><td>PATH</td><td>决定了shell将到哪些目录中寻找命令或程序</td></tr><tr><td>HOME</td><td>当前用户主目录</td></tr><tr><td>HISTSIZE</td><td>历史记录数</td></tr><tr><td>LOGNAME</td><td>当前用户的登录名</td></tr><tr><td>HOSTNAME</td><td>指主机的名称</td></tr><tr><td>SHELL</td><td>当前用户Shell类型</td></tr><tr><td>LANGUAGE</td><td>语言相关的环境变量，多语言可以修改此环境变量</td></tr><tr><td>MAIL</td><td>当前用户的邮件存放目录</td></tr><tr><td>PS1</td><td>基本提示符，对于root用户是<code>#</code>，对于普通用户是<code>$</code></td></tr></tbody></table><p><strong>Linux已定义的环境变量</strong></p><p><code>echo $HOME</code> - 查看当前用户目录</p><p><code>echo $SHELL</code> - 查看当前用户Shell类型</p><p><strong>自定义变量</strong></p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment"># 自定义变量hello</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token assign-left variable">hello</span><span class="token operator">=</span><span class="token string">"hello world"</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$hello</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"helloworld!"</span></pre></td></tr></table></figure><p><strong>Shell编程中的变量名的命名的注意事项</strong></p><ul><li><p>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头，但是可以使用下划线(_)开头</p></li><li><p>中间不能有空格，可以使用下划线(_)</p></li><li><p>不能使用标点符号</p></li><li><p>不能使用 bash 里的关键字(可用 help 命令查看保留关键字)</p></li></ul><h3 id=shell字符串><a class=anchor href=#shell字符串>#</a> Shell字符串</h3><p>字符串是shell编程中最常用最有用的数据类型，字符串可以用单引号，也可以用双引号。</p><p>在<strong>单引号</strong>中，所有的字符都会被视为普通字符，不会被解释为特殊字符。这意味着，单引号内的内容会被原样输出，不会发生变量替换、通配符扩展或转义字符解释。</p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">'SnailClimb'</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token assign-left variable">hello</span><span class="token operator">=</span><span class="token string">'Hello, I am $name!'</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$hello</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment"># 输出内容> Hello, I am $name!</span></pre></td></tr></table></figure><p>在<strong>双引号</strong>中，除了<code>&quot;&quot;</code>、<code>&quot;\&quot;</code>、反引号和感叹号(需开启<code>history expansion</code>)，其他的字符没有特殊含义。</p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">'SnailClimb'</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token assign-left variable">hello</span><span class="token operator">=</span><span class="token string">"Hello, I am <span class="token variable">$name</span>!"</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$hello</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment"># 输出内容> Hello, I am SnailClimb!</span></pre></td></tr></table></figure><p><strong>拼接字符串</strong></p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">"SnailClimb"</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token comment"># 使用双引号拼接</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token assign-left variable">greeting</span><span class="token operator">=</span><span class="token string">"hello, "</span><span class="token variable">$name</span><span class="token string">" !"</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token assign-left variable">greeting_1</span><span class="token operator">=</span><span class="token string">"hello, <span class="token variable">$&#123;name&#125;</span> !"</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$greeting</span>  <span class="token variable">$greeting_1</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token comment"># 输出内容> hello,SnailClimb !hello, SnailClimb !</span></pre></td></tr><tr><td data-num=9></td><td><pre></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token comment"># 使用单引号拼接</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token assign-left variable">greeting_2</span><span class="token operator">=</span><span class="token string">'hello, '</span><span class="token variable">$name</span><span class="token string">' !'</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token assign-left variable">greeting_3</span><span class="token operator">=</span><span class="token string">'hello, $&#123;name&#125; !'</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$greeting_2</span>  <span class="token variable">$greeting_3</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token comment"># 输出内容> hello,SnailClimb !hello, $&#123;name&#125; !</span></pre></td></tr></table></figure><p><strong>获取字符串长度</strong></p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment">#获取字符串长度</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">"SnailClimb"</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$&#123; <span class="token operator">#</span>name &#125;</span> <span class="token comment"># 第一种方式，输出10</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token function">expr</span> length <span class="token string">"<span class="token variable">$name</span>"</span><span class="token punctuation">;</span><span class="token comment"># 第二种方式，输出10</span></pre></td></tr><tr><td data-num=7></td><td><pre></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token comment"># 使用expr命令时，表达式中的运算符左右必须包含空格，如果不包含空格，将会输出表达式本身</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token function">expr</span> <span class="token number">5</span>+6 <span class="token comment"># 直接输出5+6</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token function">expr</span> <span class="token number">5</span> + <span class="token number">6</span> <span class="token comment"># 输出11</span></pre></td></tr><tr><td data-num=11></td><td><pre></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token comment"># 对于某些运算符，还需要使用符号\进行转义，否则就会提示语法错误</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token function">expr</span> <span class="token number">5</span> * <span class="token number">6</span> <span class="token comment"># 输出错误</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token function">expr</span> <span class="token number">5</span> <span class="token punctuation">\</span>* <span class="token number">6</span> <span class="token comment"># 输出30</span></pre></td></tr></table></figure><p><strong>截取子字符串</strong></p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment"># 简单的字符串截取，从字符串第1个字符开始往后截取10个字符</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token assign-left variable">str</span><span class="token operator">=</span><span class="token string">"SnailClimb is a great man"</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$&#123;str<span class="token operator">:</span>0<span class="token operator">:</span>10&#125;</span> <span class="token comment"># 输出内容> SnailClimb</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment"># 根据表达式截取</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token comment">#!bin/bash</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token comment"># author:amau</span></pre></td></tr><tr><td data-num=8></td><td><pre></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token assign-left variable">var</span><span class="token operator">=</span><span class="token string">"https://www.runoob.com/linux/linux-shell-variable.html"</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token comment"># %表示删除从后匹配, 最短结果</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token comment"># %%表示删除从后匹配, 最长匹配结果</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token comment"># #表示删除从头匹配, 最短结果</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token comment"># ##表示删除从头匹配, 最长匹配结果</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token comment"># 注: *为通配符, 意为匹配任意数量的任意字符</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token assign-left variable">s1</span><span class="token operator">=</span><span class="token variable">$&#123;var<span class="token operator">%%</span>t*&#125;</span> <span class="token comment"># h</span></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token assign-left variable">s2</span><span class="token operator">=</span><span class="token variable">$&#123;var<span class="token operator">%</span>t*&#125;</span>  <span class="token comment"># https://www.runoob.com/linux/linux-shell-variable.h</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token assign-left variable">s3</span><span class="token operator">=</span><span class="token variable">$&#123;var<span class="token operator">%%</span>.*&#125;</span> <span class="token comment"># http://www</span></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token assign-left variable">s4</span><span class="token operator">=</span><span class="token variable">$&#123;var<span class="token operator">#</span>*<span class="token operator">/</span>&#125;</span>  <span class="token comment"># /www.runoob.com/linux/linux-shell-variable.html</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token assign-left variable">s5</span><span class="token operator">=</span><span class="token variable">$&#123;var<span class="token operator">##</span>*<span class="token operator">/</span>&#125;</span> <span class="token comment"># linux-shell-variable.html</span></pre></td></tr></table></figure><h3 id=shell数组><a class=anchor href=#shell数组>#</a> Shell数组</h3><p>bash支持一维数组(不支持多维数组)，并且没有限定数组的大小。</p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment"># 获取数组长度</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token variable">$&#123; <span class="token operator">#</span>array<span class="token punctuation">[</span>@<span class="token punctuation">]</span> &#125;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment"># 或者</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token assign-left variable">length2</span><span class="token operator">=</span><span class="token variable">$&#123; <span class="token operator">#</span>array<span class="token punctuation">[</span>*<span class="token punctuation">]</span> &#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token comment"># 输出数组长度</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$length</span> <span class="token comment"># 输出：5</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$length2</span> <span class="token comment"># 输出：5</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token comment"># 输出数组第三个元素</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$&#123; array<span class="token punctuation">[</span>2<span class="token punctuation">]</span> &#125;</span> <span class="token comment"># 输出：3</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token builtin class-name">unset</span> array<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment"># 删除下标为1的元素也就是删除第二个元素</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">$&#123; array<span class="token punctuation">[</span>@<span class="token punctuation">]</span> &#125;</span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span> <span class="token punctuation">;</span><span class="token keyword">done</span> <span class="token comment"># 遍历数组，输出：1 3 4 5</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token builtin class-name">unset</span> array<span class="token punctuation">;</span> <span class="token comment"># 删除数组中的所有元素</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">$&#123; array<span class="token punctuation">[</span>@<span class="token punctuation">]</span> &#125;</span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span> <span class="token punctuation">;</span><span class="token keyword">done</span> <span class="token comment"># 遍历数组，数组元素为空，没有任何输出内容</span></pre></td></tr></table></figure><h3 id=shell基本运算符><a class=anchor href=#shell基本运算符>#</a> Shell基本运算符</h3><p><strong>基本运算符</strong></p><table><thead><tr><th>运算符</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>=</td><td>赋值</td><td><code>a=$b</code>，把变量b的值赋给a</td></tr><tr><td>==</td><td>判断是否相等。比较两个数字，相同则返回true</td><td><code>[$a == $b]</code>，返回布尔值</td></tr><tr><td>!=</td><td>判断是否不相等。比较两个数字，不相同则返回true</td><td><code>[$a != $b]</code>，返回布尔值</td></tr></tbody></table><p><strong>算数运算符</strong></p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $a + $b<span class="token variable">`</span></span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token comment"># 输出：Total value : 6</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"Total value : <span class="token variable">$val</span>"</span></pre></td></tr></table></figure><table><thead><tr><th>运算符</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>+</td><td>加</td><td><code>expr $a + $b</code>，结果为30</td></tr><tr><td>-</td><td>减</td><td><code>expr $a - $b</code>，结果为-10</td></tr><tr><td>*</td><td>乘</td><td><code>expr $a \* $b</code>，结果为200</td></tr><tr><td>/</td><td>除</td><td><code>expr $a / $b</code>，结果为2</td></tr><tr><td>%</td><td>取余/取模</td><td><code>expr $a % $b</code>，结果为0</td></tr></tbody></table><p><strong>关系运算符</strong></p><p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p><table><thead><tr><th>运算符</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>-eq</td><td>判断两个数是否<strong>相等</strong>，返回布尔类型</td><td><code>[$a -eq $b]</code></td></tr><tr><td>-ne</td><td>判断两个数是否<strong>不相等</strong>，返回布尔类型</td><td><code>[$a -ne $b]</code></td></tr><tr><td>-gt</td><td>判断左边的数是否<strong>大于</strong>右边的，返回布尔类型</td><td><code>[$a -gt $b]</code></td></tr><tr><td>-lt</td><td>判断左边的数是否<strong>小于</strong>右边的，返回布尔类型</td><td><code>[$a -lt $b]</code></td></tr><tr><td>-ge</td><td>判断左边的数是否<strong>大于等于</strong>右边的，返回布尔类型</td><td><code>[$a -ge $b]</code></td></tr><tr><td>-le</td><td>判断左边的数是否<strong>小于等于</strong>右边的，返回布尔类型</td><td><code>[$a -le $b]</code></td></tr></tbody></table><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token assign-left variable">score</span><span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token assign-left variable">maxscore</span><span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$score</span> <span class="token parameter variable">-eq</span> <span class="token variable">$maxscore</span> <span class="token punctuation">]</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">then</span></pre></td></tr><tr><td data-num=6></td><td><pre>   <span class="token builtin class-name">echo</span> <span class="token string">"A"</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">else</span></pre></td></tr><tr><td data-num=8></td><td><pre>   <span class="token builtin class-name">echo</span> <span class="token string">"B"</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">fi</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token comment"># 输出内容> B</span></pre></td></tr></table></figure><p><strong>逻辑运算符</strong></p><table><thead><tr><th>运算符</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>&amp;&amp;</td><td>逻辑与(AND)</td><td><code>(($a -lt 100 &amp;&amp; $b -gt 100))</code>，返回布尔类型</td></tr><tr><td>||</td><td>逻辑或(OR)</td><td><code>(($a -lt 100 || $b -gt 100))</code>，返回布尔类型</td></tr></tbody></table><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token number">0</span><span class="token variable">))</span></span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment"># 输出：0；逻辑与运算只有相与的两边都是1，与的结果才是1；否则与的结果是0</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$a</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>布尔运算符</strong></p><table><thead><tr><th>运算符</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>!</td><td>非运算，返回布尔类型</td><td><code>[!false]</code></td></tr><tr><td>-o</td><td>或运算，有一个表达式为true就返回true</td><td><code>[$a -lt 20 -o $b -gt 100]</code></td></tr><tr><td>-a</td><td>与运算，两个表达式都为true才返回true</td><td><code>[$a -lt 20 -a $b -gt 100]</code></td></tr></tbody></table><p><strong>字符串运算符</strong></p><table><thead><tr><th>运算符</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>=</td><td>判断两个字符串是否相等，返回布尔类型</td><td><code>[$a = $b]</code></td></tr><tr><td>!=</td><td>判断两个字符串是否不相等，返回布尔类型</td><td><code>[$a != $b]</code></td></tr><tr><td>-z</td><td>判断字符串长度是否为0，返回布尔类型</td><td><code>[-z $a]</code></td></tr><tr><td>-n</td><td>判读字符串长度是否不为0，返回布尔类型</td><td><code>[-n &quot;$a&quot;]</code></td></tr><tr><td>str</td><td>判断字符串是否为不为空，返回布尔类型</td><td><code>[$a]</code></td></tr></tbody></table><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token string">"abc"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token string">"efg"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token operator">=</span> <span class="token variable">$b</span> <span class="token punctuation">]</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">then</span></pre></td></tr><tr><td data-num=6></td><td><pre>   <span class="token builtin class-name">echo</span> <span class="token string">"a 等于 b"</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">else</span></pre></td></tr><tr><td data-num=8></td><td><pre>   <span class="token builtin class-name">echo</span> <span class="token string">"a 不等于 b"</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><p><strong>文件相关运算符</strong></p><table><thead><tr><th>运算符</th><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>-b file</td><td>判断文件是否是块设备文件，返回布尔类型</td><td><code>[-b $file]</code></td></tr><tr><td>-c file</td><td>判断文件是否是字符设备文件，返回布尔类型</td><td><code>[-c $file]</code></td></tr><tr><td>-d file</td><td>判断文件是否是目录，返回布尔类型</td><td><code>[-d $file]</code></td></tr><tr><td>-f file</td><td>判断文件是否是普通文件(即不是目录，也不是设备文件)，返回布尔类型</td><td><code>[-f $file]</code></td></tr><tr><td>-g file</td><td>判断文件是否设置了SGID位，返回布尔类型</td><td><code>[-g $file]</code></td></tr><tr><td>-k file</td><td>判断文件是否设置了粘着位(Sticky Bit)，返回布尔类型</td><td><code>[-k $file]</code></td></tr><tr><td>-p file</td><td>判断文件是否是有名管道，返回布尔类型</td><td><code>[-p $file]</code></td></tr><tr><td>-u file</td><td>判断文件是否设置了SUID位，返回布尔类型</td><td><code>[-u $file]</code></td></tr><tr><td>-r file</td><td>判断文件是否可读，返回布尔类型</td><td><code>[-r $file]</code></td></tr><tr><td>-w file</td><td>判断文件是否可写，返回布尔类型</td><td><code>[-w $file]</code></td></tr><tr><td>-x file</td><td>判断文件是否可执行，返回布尔类型</td><td><code>[-x $file]</code></td></tr><tr><td>-s file</td><td>判断文件是否为空(文件大小是否大于0)，返回布尔类型</td><td><code>[-s $file]</code></td></tr><tr><td>-e file</td><td>判断文件(包括目录)是否存在，返回布尔类型</td><td><code>[-e $file]</code></td></tr></tbody></table><p>例如定义一个文件路径<code>file=&quot;/usr/learnshell/test.sh&quot;</code> ，如果想判断这个文件是否可读，可以这样<code>if [ -r $file ]</code>； 如果想判断这个文件是否可写，可以这样<code>-w $file</code>。</p><h3 id=shell流程控制><a class=anchor href=#shell流程控制>#</a> Shell流程控制</h3><p><strong>if条件语句</strong></p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token parameter variable">-eq</span> <span class="token variable">$b</span> <span class="token punctuation">]</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">then</span></pre></td></tr><tr><td data-num=6></td><td><pre>   <span class="token builtin class-name">echo</span> <span class="token string">"a 等于 b"</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token parameter variable">-gt</span> <span class="token variable">$b</span> <span class="token punctuation">]</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token keyword">then</span></pre></td></tr><tr><td data-num=9></td><td><pre>   <span class="token builtin class-name">echo</span> <span class="token string">"a 大于 b"</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token keyword">else</span></pre></td></tr><tr><td data-num=11></td><td><pre>   <span class="token builtin class-name">echo</span> <span class="token string">"a 小于 b"</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><p><strong>for循环语句</strong></p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment"># 输出当前列表中的数据</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">for</span> <span class="token for-or-select variable">loop</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"The value is: <span class="token variable">$loop</span>"</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">done</span></pre></td></tr><tr><td data-num=7></td><td><pre></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token comment"># 产生10个随机数</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">9</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num=11></td><td><pre>   <span class="token builtin class-name">echo</span> <span class="token environment constant">$RANDOM</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token keyword">done</span></pre></td></tr><tr><td data-num=13></td><td><pre></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token comment"># 输出1到5</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token comment"># 通常情况下shell变量调用需要加$,但是在for的(())中不需要</span></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token number">5</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">do</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token keyword">done</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>while语句</strong></p><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment"># 基本的while循环语句</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token assign-left variable">int</span><span class="token operator">=</span><span class="token number">1</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">while</span><span class="token variable"><span class="token punctuation">((</span> $int<span class="token operator">&lt;=</span><span class="token number">5</span> <span class="token punctuation">))</span></span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token variable">$int</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token builtin class-name">let</span> <span class="token string">"int++"</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token keyword">done</span></pre></td></tr><tr><td data-num=9></td><td><pre></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token comment"># 用于读取键盘信息</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">'按下 &lt;CTRL-D> 退出'</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">'输入你最喜欢的电影: '</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token keyword">while</span> <span class="token builtin class-name">read</span> FILM</pre></td></tr><tr><td data-num=14></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"是的！<span class="token variable">$FILM</span> 是一个好电影"</span></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token keyword">done</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token comment"># 输出内容</span></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token comment"># 按下 &lt;CTRL-D> 退出</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token comment"># 输入你最喜欢的电影: 变形金刚</span></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token comment"># 是的！变形金刚 是一个好电影</span></pre></td></tr><tr><td data-num=21></td><td><pre></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token comment"># 无限循环</span></pre></td></tr><tr><td data-num=23></td><td><pre><span class="token keyword">while</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token builtin class-name">command</span></pre></td></tr><tr><td data-num=26></td><td><pre><span class="token keyword">done</span></pre></td></tr></table></figure><h3 id=shell函数><a class=anchor href=#shell函数>#</a> Shell函数</h3><figure class="highlight sh"><figcaption data-lang=sh></figcaption><table><tr><td data-num=1></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment">## 不带参数没有返回值的函数 ##</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment">##########################################################</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token function-name function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"这是我的第一个 shell 函数!"</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"-----函数开始执行-----"</span></pre></td></tr><tr><td data-num=8></td><td><pre>hello</pre></td></tr><tr><td data-num=9></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"-----函数执行完毕-----"</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token comment"># 输出结果</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token comment"># -----函数开始执行-----</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token comment"># 这是我的第一个 shell 函数!</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token comment"># -----函数执行完毕-----</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token comment">##########################################################</span></pre></td></tr><tr><td data-num=16></td><td><pre></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token comment">## 有返回值的函数 ##</span></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token comment">##########################################################</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token comment"># 输入两个数字之后相加并返回结果</span></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token function-name function">funWithReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"输入第一个数字: "</span></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token builtin class-name">read</span> aNum</pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"输入第二个数字: "</span></pre></td></tr><tr><td data-num=24></td><td><pre>    <span class="token builtin class-name">read</span> anotherNum</pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"两个数字分别为 <span class="token variable">$aNum</span> 和 <span class="token variable">$anotherNum</span> !"</span></pre></td></tr><tr><td data-num=26></td><td><pre>    <span class="token builtin class-name">return</span> <span class="token variable"><span class="token variable">$((</span>$aNum<span class="token operator">+</span>$anotherNum<span class="token variable">))</span></span></pre></td></tr><tr><td data-num=27></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=28></td><td><pre>funWithReturn</pre></td></tr><tr><td data-num=29></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"输入的两个数字之和为 <span class="token variable">$?</span>"</span></pre></td></tr><tr><td data-num=30></td><td><pre></pre></td></tr><tr><td data-num=31></td><td><pre><span class="token comment"># 输出结果</span></pre></td></tr><tr><td data-num=32></td><td><pre><span class="token comment"># 输入第一个数字:</span></pre></td></tr><tr><td data-num=33></td><td><pre><span class="token comment"># 1</span></pre></td></tr><tr><td data-num=34></td><td><pre><span class="token comment"># 输入第二个数字:</span></pre></td></tr><tr><td data-num=35></td><td><pre><span class="token comment"># 2</span></pre></td></tr><tr><td data-num=36></td><td><pre><span class="token comment"># 两个数字分别为 1 和 2 !</span></pre></td></tr><tr><td data-num=37></td><td><pre><span class="token comment"># 输入的两个数字之和为 3</span></pre></td></tr><tr><td data-num=38></td><td><pre><span class="token comment">##########################################################</span></pre></td></tr><tr><td data-num=39></td><td><pre></pre></td></tr><tr><td data-num=40></td><td><pre><span class="token comment">## 带参数的函数 ##</span></pre></td></tr><tr><td data-num=41></td><td><pre><span class="token comment">##########################################################</span></pre></td></tr><tr><td data-num=42></td><td><pre><span class="token function-name function">funWithParam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=43></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"第一个参数为 <span class="token variable">$1</span> !"</span></pre></td></tr><tr><td data-num=44></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"第二个参数为 <span class="token variable">$2</span> !"</span></pre></td></tr><tr><td data-num=45></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"第十个参数为 <span class="token variable">$10</span> !"</span></pre></td></tr><tr><td data-num=46></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"第十个参数为 <span class="token variable">$&#123;10&#125;</span> !"</span></pre></td></tr><tr><td data-num=47></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"第十一个参数为 <span class="token variable">$&#123;11&#125;</span> !"</span></pre></td></tr><tr><td data-num=48></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"参数总数有 <span class="token variable">$#</span> 个!"</span></pre></td></tr><tr><td data-num=49></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"作为一个字符串输出所有参数 <span class="token variable">$*</span> !"</span></pre></td></tr><tr><td data-num=50></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=51></td><td><pre>funWithParam <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span> <span class="token number">8</span> <span class="token number">9</span> <span class="token number">34</span> <span class="token number">73</span></pre></td></tr><tr><td data-num=52></td><td><pre></pre></td></tr><tr><td data-num=53></td><td><pre><span class="token comment"># 输出结果</span></pre></td></tr><tr><td data-num=54></td><td><pre><span class="token comment"># 第一个参数为 1 !</span></pre></td></tr><tr><td data-num=55></td><td><pre><span class="token comment"># 第二个参数为 2 !</span></pre></td></tr><tr><td data-num=56></td><td><pre><span class="token comment"># 第十个参数为 10 !</span></pre></td></tr><tr><td data-num=57></td><td><pre><span class="token comment"># 第十个参数为 34 !</span></pre></td></tr><tr><td data-num=58></td><td><pre><span class="token comment"># 第十一个参数为 73 !</span></pre></td></tr><tr><td data-num=59></td><td><pre><span class="token comment"># 参数总数有 11 个!</span></pre></td></tr><tr><td data-num=60></td><td><pre><span class="token comment"># 作为一个字符串输出所有参数 1 2 3 4 5 6 7 8 9 34 73 !</span></pre></td></tr><tr><td data-num=61></td><td><pre><span class="token comment">##########################################################</span></pre></td></tr></table></figure><h2 id=linux文件系统><a class=anchor href=#linux文件系统>#</a> Linux文件系统</h2><p>在Linux操作系统中，一切被操作系统管理的资源(如网络接口卡、磁盘驱动器、打印机、输入输出设备、普通文件或目录)都被视为文件，这就是Linux系统中的一个重要概念，即<strong>一切都是文件</strong>，这个概念源自UNIX哲学，即将所有资源都抽象为文件的方式来进行管理和访问。</p><p>Linux的文件系统也借鉴了UNIX文件系统的设计理念。这种设计使得Linux系统可以通过统一的文件接口来管理和操作不同类型的资源，从而实现了一种统一的文件操作方式。例如，可以使用类似于读写文件的方式来对待网络接口、磁盘驱动器、设备文件等，使得操作和管理这些资源更加统一和简便。</p><h3 id=inode概述><a class=anchor href=#inode概述>#</a> ! inode概述</h3><p>inode是Linux/Unix文件系统的基础。</p><p>硬盘的最小存储单位是扇区(Sector)，块(block)由多个扇区组成。文件数据存储在块中。块的最常见的大小是4kb，约为8个连续的扇区组成(每个扇区存储512字节)。一个文件可能会占用多个block，但是一个块只能存放一个文件。虽然，将文件存储在了块(block)中，但是还需要一个空间来存储文件的 <strong>元信息metadata</strong>，如某个文件被分成几块、每一块在的地址、文件拥有者，创建时间，权限，大小等。而，这种<strong>存储文件元信息的区域就叫inode</strong>，译为索引节点 - <strong>i(index) + node</strong>，每个文件都有一个唯一的inode与存储文件的元信息。</p><ul><li>inode是一种固定大小的数据结构，其大小在文件系统创建时就确定了，并且在文件的生命周期内保持不变</li><li>inode的访问速度非常快，因为系统可以直接通过inode号码定位到文件的元数据信息，无需遍历整个文件系统，这可以提供更高的文件系统性能</li><li>inode的数量是有限的，每个文件系统只能包含固定数量的inode。这意味着当文件系统中的inode用完时，无法再创建新的文件或目录，即使磁盘上还有可用空间。因此，在创建文件系统时，需要根据文件和目录的预期数量来合理分配inode的数量。可以使用<code>stat</code>命令查看文件的inode信息，包括文件的inode号、文件类型、权限、所有者、文件大小、修改时间</li></ul><p>简单来说，inode就是用来维护某个文件被分成几块、每一块在的地址、文件拥有者，创建时间，权限，大小等信息。</p><p>Linux/Unix操作系统使用inode区分不同的文件。这样做的好处是，即使文件名被修改或删除，文件的inode号码不会改变，从而可以避免一些因文件重命名、移动或删除导致的错误。不过，使用inode号码也使得文件系统在用户和应用程序层面更加抽象和复杂，需要通过系统命令或文件系统接口来访问和管理文件的inode信息。</p><p><strong>inode存储了哪些东西，目录名，文件名存在哪里？</strong></p><p>在Linux文件系统中，每个文件和目录都由一个称为inode的数据结构表示，inode存储了以下信息</p><ul><li><p><strong>文件的用户ID(所有者)</strong></p></li><li><p><strong>文件的组ID</strong></p></li><li><p><strong>文件的大小</strong></p></li><li><p>文件的创建，访问和修改时间戳</p></li><li><p>文件的权限(读，写，执行等)</p></li><li><p>文件的链接数(即有多少硬链接指向该文件)</p></li><li><p>文件的数据块位置(指向实际存储文件数据的磁盘块位置)</p></li><li><p>文件的类型(例如，它是常规文件、目录还是符号链接等)</p></li></ul><p>inode并不存储文件名或目录名。这些信息是存储在目录文件中的。**也就是说，他们是分开的！**在Linux中，目录实际上是一个特殊类型的文件，它包含一系列的目录项。每个目录项都包含一个文件或子目录的名称，以及指向相应inode的指针。所以，文件名和目录名实际上是存储在目录文件中的。</p><h3 id=硬链接和软链接><a class=anchor href=#硬链接和软链接>#</a> 硬链接和软链接</h3><p>在Linux类Unix系统上，文件链接(File Link)是一种特殊的文件类型，可以在文件系统中指向另一个文件。常见的文件链接类型有两种。</p><p><strong>硬链接(Hard Link)</strong></p><ul><li><p>在Linux类Unix文件系统中，每个文件和目录都有一个唯一的索引节点(inode)号，用来标识该文件或目录。硬链接通过inode节点号建立连接，硬链接和源文件的inode节点号相同，两者对文件系统来说是完全平等的(可以看作是互为硬链接，源头是同一份文件)，删除其中任何一个对另外一个是没有影响的，只有删除了源文件和所有对应的硬链接文件，该文件才会被真正删除，可以通过给文件设置硬链接文件来防止重要文件被误删</p></li><li><p>硬链接具有一些限制，不能对目录以及不存在的文件创建硬链接，并且，硬链接也不能跨越文件系统</p></li><li><p><code>ln</code> 命令用于创建硬链接</p></li></ul><p><strong>软链接(Symbolic Link或Symlink)</strong></p><ul><li><p>软链接和源文件的inode节点号不同，而是指向一个文件路径。源文件删除后，软链接依然存在，但是指向的是一个无效的文件路径。软连接类似于 Windows 系统中的快捷方式</p></li><li><p>不同于硬链接，可以对目录或者不存在的文件创建软链接，并且，软链接可以跨越文件系统</p></li><li><p><code>ln -s</code> 命令用于创建软链接</p></li></ul><p><strong>硬链接为什么不能跨文件系统？</strong></p><p>硬链接是通过inode节点号建立连接的，而硬链接和源文件共享相同的inode节点号。</p><p>然而，每个文件系统都有自己的独立inode表，且每个inode表只维护该文件系统内的inode。如果在不同的文件系统之间创建硬链接，可能会导致inode节点号冲突的问题，即目标文件的inode节点号已经在该文件系统中被使用。</p><h3 id=linux文件类型><a class=anchor href=#linux文件类型>#</a> Linux文件类型</h3><p>Linux支持很多文件类型，每种文件类型都有不同的用途和属性，其中非常重要的文件类型有</p><table><thead><tr><th>文件类型</th><th>描述</th></tr></thead><tbody><tr><td>普通文件<br>(-)</td><td>用于存储信息和数据，Linux用户可以根据访问权限对普通文件进行查看、更改和删除。比如 - 图片、声音、PDF、text、视频、源代码等等</td></tr><tr><td>目录文件<br>(directory file - d)</td><td>目录也是文件的一种，用于表示和管理系统中的文件，目录文件中包含一些文件名和子目录名。打开目录事实上就是打开目录文件</td></tr><tr><td>符号链接文件<br>(symbolic link - l)</td><td>保留了指向文件的地址而不是文件本身</td></tr><tr><td>字符设备<br>(char - c)</td><td>用来访问字符设备比如键盘</td></tr><tr><td>设备文件<br>(block - b)</td><td>用来访问块设备比如硬盘、软盘</td></tr><tr><td>管道文件<br>(pipe - p)</td><td>一种特殊类型的文件，用于进程之间的通信</td></tr><tr><td>套接字文件<br>(socket - s)</td><td>用于进程间的网络通信，也可以用于本机之间的非网络通信</td></tr></tbody></table><h3 id=linux目录树><a class=anchor href=#linux目录树>#</a> Linux目录树</h3><p>Linux使用一种称为目录树的层次结构来组织文件和目录。目录树的结构层次鲜明，就像一棵倒立的树，根目录(/)作为起始点，向下延伸，形成一系列的目录和子目录，每个目录可以包含文件和其他子目录。</p><p><img data-src=https://jd.reversesacle.com/gh/ReverseSacle/Gallery@latest/programming/network-programming/linux/1.webp alt=""></p><table><thead><tr><th style=text-align:left>文件目录</th><th style=text-align:left>描述</th></tr></thead><tbody><tr><td style=text-align:left>/bin</td><td style=text-align:left>存放二进制可执行文件(ls、cat、mkdir 等)，常用命令一般都在这里</td></tr><tr><td style=text-align:left>/etc</td><td style=text-align:left>存放系统管理和配置文件</td></tr><tr><td style=text-align:left>/home</td><td style=text-align:left>存放所有用户文件的根目录，是用户主目录的基点，比如用户user的主目录就是<code>/home/user</code>，可以用~user 表示</td></tr><tr><td style=text-align:left>/usr</td><td style=text-align:left>用于存放系统应用程序</td></tr><tr><td style=text-align:left>/opt</td><td style=text-align:left>额外安装的可选应用程序包所放置的位置。一般情况下，可以把tomcat等都安装到这里</td></tr><tr><td style=text-align:left>/proc</td><td style=text-align:left>虚拟文件系统目录，是系统内存的映射。可直接访问这个目录来获取系统信息</td></tr><tr><td style=text-align:left>/root</td><td style=text-align:left>超级用户(系统管理员)的主目录</td></tr><tr><td style=text-align:left>/sbin</td><td style=text-align:left>存放二进制可执行文件，只有root才能访问。这里存放的是系统管理员使用的系统级别的管理命令和程序。如ifconfig等</td></tr><tr><td style=text-align:left>/dev</td><td style=text-align:left>用于存放设备文件</td></tr><tr><td style=text-align:left>/mnt</td><td style=text-align:left>系统管理员安装临时文件系统的安装点，系统提供这个目录是让用户临时挂载其他的文件系统</td></tr><tr><td style=text-align:left>/boot</td><td style=text-align:left>存放用于系统引导时使用的各种文件</td></tr><tr><td style=text-align:left>/lib和/lib64</td><td style=text-align:left>存放着和系统运行相关的库文件</td></tr><tr><td style=text-align:left>/tmp</td><td style=text-align:left>用于存放各种临时文件，是公用的临时文件存储点</td></tr><tr><td style=text-align:left>/var</td><td style=text-align:left>用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，例如各种服务的日志文件(系统启动日志等)等</td></tr><tr><td style=text-align:left>/lost+found</td><td style=text-align:left>这个目录平时是空的，是一个用于存放文件系统中损坏的文件或者文件系统检查过程中找到的未分配的碎片文件的目录</td></tr></tbody></table><h2 id=内核空间与用户空间><a class=anchor href=#内核空间与用户空间>#</a> ! 内核空间与用户空间</h2><p>Linux操作系统分为<strong>用户空间</strong>与<strong>操作系统的系统内核空间</strong>两部分，操作系统为了保护系统的核心区域(内核)，使得用户无法直接修改系统底层，因此操作系统就开辟了两块虚拟内存空间。</p><p>Linux操作系统之上有硬件计算机。</p><p><strong>内核</strong> - 一个操作系统的核心组件，称为内核，其独立于普通的应用程序，可以直接操作底层硬件来处理系统受保护的区域。</p><p><strong>处理器的状态可以分为哪几种？</strong></p><ul><li>内核态，运行于进程上下文，内核代表进程运行于内核空间</li><li>内核态，运行于中断上下文，内核代表硬件运行于内核空间</li><li>用户态，运行于用户空间</li></ul><p><strong>用户态和内核态的区别？</strong></p><p><strong>权限</strong></p><ul><li>用户态(User Mode): 用户态是一种受限的状态，程序在这个状态下运行时，有很多敏感的指令不能执行，也不能直接访问系统硬件资源</li><li>内核态(Kernel Mode): 内核态也称为超级用户模式或系统模式，程序在内核态下运行时，没有任何限制，可以执行所有指令，可以直接访问和控制硬件</li></ul><p><strong>功能</strong></p><ul><li>用户态主要用于运行应用程序。当一个应用程序需要执行一个系统调用(比如读取文件、发送网络数据等)时，它会切换到内核态，然后由内核来完成这个操作</li><li>内核态主要用于运行操作系统的内核和驱动程序。内核提供系统服务、管理硬件资源等</li></ul><p><strong>资源访问</strong></p><ul><li>用户态无法直接访问硬件资源，只能通过系统调用来请求内核提供的服务</li><li>内核态可以直接访问硬件资源，例如内存、磁盘、网络等</li></ul><p><strong>切换</strong></p><ul><li>用户态到内核态的切换通常通过系统调用或者硬件中断来实现，这个过程需要一定的时间和资源，因此频繁切换会影响系统性能</li><li>内核态到用户态的切换通常在完成系统调用或者中断处理之后发生</li></ul><h2 id=linux内存管理><a class=anchor href=#linux内存管理>#</a> ! Linux内存管理</h2><p><strong>内存管理机制</strong></p><p>Linux使用分段和分页的混合方式进行内存管理。Linux将每个进程的虚拟地址空间划分为若干个段每个段下面有若干个大小固定的页面，而物理内存也被划分为若干个页。通过建立从虚拟页到物理页帧的映射，来实现对内存的管理。(<strong>物理内存并非段页式！而是纯分页进行管理</strong>)</p><p><strong>内存寻址方式</strong></p><p>Linux使用虚拟内存寻址方式，每个进程都有其独立的虚拟地址空间，这些地址用于指向该进程的代码、数据和堆栈等内容。操作系统通过维护一个页表来管理虚拟地址和物理地址之间的映射关系。</p><p><strong>虚拟内存</strong></p><p>虚拟内存是一种内存管理技术，它允许一个进程使用的地址空间能超过实际存在的物理内存。当进程要访问的内存不在物理内存中时(产生缺页中断)，就会从硬盘上的交换区载入所需的内存页。</p><p><strong>内存调页算法</strong></p><p>Linux使用的是二次机会算法(Second Chance Algorithm，也称为Clock置换算法)。该算法在FIFO算法的基础上增加了访问位，并采用了类似时钟的循环队列，降低了页面置换的频率，提高了性能。</p><p><strong>任务调度算法</strong></p><p>Linux主要有以下几种任务调度算法</p><ul><li><strong>完全公平调度器(CFS)</strong> - 它是Linux默认的进程调度器，使用红黑树来存储待调度的进程，保证每个进程得到公平的CPU时间片</li><li><strong>实时调度器</strong> - 包括FIFO调度策略和轮询(RR)调度策略，主要用于需要硬实时或者软实时的系统。</li><li><strong>Deadline调度器</strong> - 针对实时任务，采取动态优先级(越接近deadline，优先级越高)的方式，确保任务在deadline前完成</li></ul><div class=tags><a href=/tags/network-programming/ rel=tag><i class="ic i-tag"></i> 网络编程</a></div></div><footer><div class=meta><span class=item><span class=icon><i class="ic i-calendar-check"></i></span> <span class=text>更新于</span> <time title="修改时间：2025-01-09 17:58:14" itemprop=dateModified datetime=2025-01-09T17:58:14+08:00>2025-01-09</time></span><span class=item data-path=/computer-science/programming/network-programming/Linux-basic/ title=阅读次数><span class=icon><i class="ic i-eye"></i></span> <span class=text>阅读次数</span><span class=waline-pageview-count></span> <span class=text>次</span></span></div><div id=copyright><ul><li class=author><strong>本文作者：</strong> ReverseSacle <i class="ic i-at"><em>@</em></i>逆转天平</li><li class=link><strong>本文链接：</strong> <a href=https://www.reversesacle.com/computer-science/programming/network-programming/Linux-basic/ title="Linux基础(CentOS 7)">https://www.reversesacle.com/computer-science/programming/network-programming/Linux-basic/</a></li><li class=license><strong>版权声明：</strong> 本站所有文章除特别声明外，均采用 <span class=exturl data-url=aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class=post-nav><div class="item left"><a href=/computer-science/programming/network-programming/linux-environment/ itemprop=url rel=prev data-background-image=https:&#x2F;&#x2F;resa-imgs.oss-accelerate.aliyuncs.com&#x2F;img&#x2F;acg7.webp title=虚拟机-Linux环境配置><span class=type>上一篇</span><span class=category><i class="ic i-flag"></i> 网络编程</span><h3>虚拟机-Linux环境配置</h3></a></div><div class="item right"><a href=/computer-science/programming/network-programming/gcc-compiler/ itemprop=url rel=next data-background-image=https:&#x2F;&#x2F;resa-imgs.oss-accelerate.aliyuncs.com&#x2F;img&#x2F;acg8.webp title=GCC编译器><span class=type>下一篇</span><span class=category><i class="ic i-flag"></i> 网络编程</span><h3>GCC编译器</h3></a></div></div><div class=wrap id=comments><div id=waline-comment></div></div></div><div id=sidebar><div class=inner><div class=panels><div class=inner><div class="contents panel pjax" data-title=文章目录><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4><span class=toc-number>1.</span> <span class=toc-text>Linux常用命令</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%9F%BA%E6%9C%AC><span class=toc-number>1.1.</span> <span class=toc-text>基本</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%97%B6%E9%97%B4><span class=toc-number>1.2.</span> <span class=toc-text>时间</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95><span class=toc-number>1.3.</span> <span class=toc-text>文件与目录</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B><span class=toc-number>1.4.</span> <span class=toc-text>压缩和解压</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%BD%91%E7%BB%9C><span class=toc-number>1.5.</span> <span class=toc-text>网络</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%98%BE%E7%A4%BA%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9><span class=toc-number>1.6.</span> <span class=toc-text>显示文件内容</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%A3%81%E7%9B%98><span class=toc-number>1.7.</span> <span class=toc-text>磁盘</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90><span class=toc-number>1.8.</span> <span class=toc-text>文件权限</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86><span class=toc-number>1.9.</span> <span class=toc-text>用户管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#vivim-%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91><span class=toc-number>2.</span> <span class=toc-text>vi&#x2F;vim-文本编辑</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%9F%BA%E6%9C%AC-2><span class=toc-number>2.1.</span> <span class=toc-text>基本</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E5%BC%8F><span class=toc-number>2.2.</span> <span class=toc-text>命令行模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F><span class=toc-number>3.</span> <span class=toc-text>环境变量</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%88%86%E7%B1%BB><span class=toc-number>3.1.</span> <span class=toc-text>分类</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#linux%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8Fshell%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F><span class=toc-number>3.2.</span> <span class=toc-text>Linux环境变量(Shell环境变量)</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4><span class=toc-number>3.3.</span> <span class=toc-text>常用命令</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%B8%B8%E7%94%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F><span class=toc-number>3.4.</span> <span class=toc-text>常用环境变量</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F><span class=toc-number>3.5.</span> <span class=toc-text>设置环境变量</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F><span class=toc-number>3.6.</span> <span class=toc-text>环境变量脚本文件的执行顺序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81><span class=toc-number>4.</span> <span class=toc-text>字符集和字符编码</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%9F%BA%E6%9C%AC-3><span class=toc-number>4.1.</span> <span class=toc-text>基本</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%B1%89%E5%AD%97%E7%9A%84%E7%BC%96%E7%A0%81><span class=toc-number>4.2.</span> <span class=toc-text>汉字的编码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%AE%BE%E7%BD%AElinux%E7%9A%84%E5%AD%97%E7%AC%A6%E9%9B%86><span class=toc-number>5.</span> <span class=toc-text>设置Linux的字符集</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-2><span class=toc-number>5.1.</span> <span class=toc-text>常用命令</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2%E5%91%BD%E4%BB%A4><span class=toc-number>5.2.</span> <span class=toc-text>编码转换命令</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BA%94%E7%94%A8%E7%BB%8F%E9%AA%8C><span class=toc-number>5.3.</span> <span class=toc-text>应用经验</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%9A%84%E5%AE%89%E8%A3%85><span class=toc-number>6.</span> <span class=toc-text>软件包的安装</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%9F%BA%E6%9C%AC-4><span class=toc-number>6.1.</span> <span class=toc-text>基本</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#rpm><span class=toc-number>6.2.</span> <span class=toc-text>rpm</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#yum><span class=toc-number>6.3.</span> <span class=toc-text>yum</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E5%92%8C%E9%85%8D%E7%BD%AE><span class=toc-number>7.</span> <span class=toc-text>系统服务管理和配置</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%AE%A1%E7%90%86><span class=toc-number>7.1.</span> <span class=toc-text>系统服务的管理</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1><span class=toc-number>7.2.</span> <span class=toc-text>添加自定义的系统服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E7%AE%A1%E7%90%86%E5%92%8C%E9%85%8D%E7%BD%AE><span class=toc-number>8.</span> <span class=toc-text>防火墙的管理和配置</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E5%BF%B5><span class=toc-number>8.1.</span> <span class=toc-text>概念</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E9%85%8D%E7%BD%AE><span class=toc-number>8.2.</span> <span class=toc-text>防火墙的配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%AE%A2%E6%88%B7%E7%AB%AFsftp%E5%91%BD%E4%BB%A4><span class=toc-number>9.</span> <span class=toc-text>客户端(SFTP)命令</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E6%9C%8D%E5%8A%A1file-transfer-protocol-ftp><span class=toc-number>10.</span> <span class=toc-text>文件传输服务(File Transfer Protocol - ftp)</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%9F%BA%E6%9C%AC-5><span class=toc-number>10.1.</span> <span class=toc-text>基本</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AE%89%E8%A3%85ftp%E8%BD%AF%E4%BB%B6%E5%8C%85><span class=toc-number>10.2.</span> <span class=toc-text>安装ftp软件包</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%85%8D%E7%BD%AEftp%E6%9C%8D%E5%8A%A1%E5%99%A8><span class=toc-number>10.3.</span> <span class=toc-text>配置ftp服务器</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-3><span class=toc-number>10.4.</span> <span class=toc-text>常用命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1crontab><span class=toc-number>11.</span> <span class=toc-text>Linux计划任务(crontab)</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E5%BF%B5-2><span class=toc-number>11.1.</span> <span class=toc-text>概念</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%94%A8%E6%88%B7%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1><span class=toc-number>11.2.</span> <span class=toc-text>用户计划任务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%8E%A8%E8%8D%90%E5%B7%A5%E5%85%B7><span class=toc-number>12.</span> <span class=toc-text>推荐工具</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#gnu-wget%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7><span class=toc-number>12.1.</span> <span class=toc-text>GNU Wget下载工具</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#yum-utils%E5%B7%A5%E5%85%B7%E9%9B%86><span class=toc-number>12.2.</span> <span class=toc-text>yum-utils工具集</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#tree%E8%BD%AF%E4%BB%B6><span class=toc-number>12.3.</span> <span class=toc-text>Tree软件</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#fail2ban><span class=toc-number>12.4.</span> <span class=toc-text>Fail2ban</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#shell%E7%BC%96%E7%A8%8B><span class=toc-number>13.</span> <span class=toc-text>Shell编程</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E8%BF%B0><span class=toc-number>13.1.</span> <span class=toc-text>概述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#shell%E5%8F%98%E9%87%8F><span class=toc-number>13.2.</span> <span class=toc-text>Shell变量</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#shell%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=toc-number>13.3.</span> <span class=toc-text>Shell字符串</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#shell%E6%95%B0%E7%BB%84><span class=toc-number>13.4.</span> <span class=toc-text>Shell数组</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#shell%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6><span class=toc-number>13.5.</span> <span class=toc-text>Shell基本运算符</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#shell%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6><span class=toc-number>13.6.</span> <span class=toc-text>Shell流程控制</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#shell%E5%87%BD%E6%95%B0><span class=toc-number>13.7.</span> <span class=toc-text>Shell函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#linux%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F><span class=toc-number>14.</span> <span class=toc-text>Linux文件系统</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#inode%E6%A6%82%E8%BF%B0><span class=toc-number>14.1.</span> <span class=toc-text>! inode概述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%A1%AC%E9%93%BE%E6%8E%A5%E5%92%8C%E8%BD%AF%E9%93%BE%E6%8E%A5><span class=toc-number>14.2.</span> <span class=toc-text>硬链接和软链接</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#linux%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B><span class=toc-number>14.3.</span> <span class=toc-text>Linux文件类型</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#linux%E7%9B%AE%E5%BD%95%E6%A0%91><span class=toc-number>14.4.</span> <span class=toc-text>Linux目录树</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4%E4%B8%8E%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4><span class=toc-number>15.</span> <span class=toc-text>! 内核空间与用户空间</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#linux%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86><span class=toc-number>16.</span> <span class=toc-text>! Linux内存管理</span></a></li></ol></div><div class="related panel pjax" data-title=系列文章><ul><li><a href=/computer-science/programming/network-programming/linux-environment/ rel=bookmark title=虚拟机-Linux环境配置>虚拟机-Linux环境配置</a></li><li class=active><a href=/computer-science/programming/network-programming/Linux-basic/ rel=bookmark title="Linux基础(CentOS 7)">Linux基础(CentOS 7)</a></li><li><a href=/computer-science/programming/network-programming/gcc-compiler/ rel=bookmark title=GCC编译器>GCC编译器</a></li><li><a href=/computer-science/programming/network-programming/gdb-debugging-tool/ rel=bookmark title=GDB调试工具>GDB调试工具</a></li><li><a href=/computer-science/programming/network-programming/make-compiler-tool/ rel=bookmark title=make编译工具>make编译工具</a></li><li><a href=/computer-science/programming/network-programming/clibrary/ rel=bookmark title=C/C++静态库与动态库的制作和使用>C/C++静态库与动态库的制作和使用</a></li><li><a href=/computer-science/programming/network-programming/executable-program/ rel=bookmark title=在C/C++程序中调用可执行程序>在C/C++程序中调用可执行程序</a></li><li><a href=/computer-science/programming/network-programming/signal/ rel=bookmark title=Linux的信号(signal)>Linux的信号(signal)</a></li><li><a href=/computer-science/programming/network-programming/multiprocessing/ rel=bookmark title=Linux多进程>Linux多进程</a></li><li><a href=/computer-science/programming/network-programming/log/ rel=bookmark title=C/C++服务程序的运行日志>C/C++服务程序的运行日志</a></li><li><a href=/computer-science/programming/network-programming/multithreading/ rel=bookmark title=Linux多线程>Linux多线程</a></li><li><a href=/computer-science/programming/network-programming/thread-synchronization/ rel=bookmark title=Linux线程同步>Linux线程同步</a></li><li><a href=/computer-science/programming/network-programming/programming/ rel=bookmark title=C/C++网络编程>C/C++网络编程</a></li><li><a href=/computer-science/programming/network-programming/http/ rel=bookmark title=HTTP网络通信基础>HTTP网络通信基础</a></li><li><a href=/computer-science/programming/network-programming/ubuntu-obs-server/ rel=bookmark title="Ubuntu服务器OBS Studio配置">Ubuntu服务器OBS Studio配置</a></li></ul></div><div class="overview panel" data-title=站点概览><div class=author itemprop=author itemscope itemtype=http://schema.org/Person><img class=image itemprop=image alt=ReverseSacle data-src=/images/avatar.webp><p class=name itemprop=name>ReverseSacle</p><div class=description itemprop=description>知识书库 & 学习点滴</div></div><nav class=state><div class="item posts"><a href=/archives/ ><span class=count>186</span> <span class=name>文章</span></a></div><div class="item categories"><a href=/categories/ ><span class=count>52</span> <span class=name>分类</span></a></div><div class="item tags"><a href=/tags/ ><span class=count>18</span> <span class=name>标签</span></a></div></nav><div class=social><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1JldmVyc2VTYWNsZQ==" title=https:&#x2F;&#x2F;github.com&#x2F;ReverseSacle><i class="ic i-github"></i></span><span class="exturl item email" data-url="bWFpbHRvOnByaXZhdGVAcmV2ZXJzZXNhY2xlLmNvbQ==" title=mailto:private@reversesacle.com><i class="ic i-envelope"></i></span></div><ul class=menu><li class=item><a href=/ rel=section><i class="ic i-home"></i> 首页</a></li><li class="item dropdown"><a href=javascript:void(0);><i class="ic i-feather"></i> 文章</a><ul class=submenu><li class=item><a href=/archives/ rel=section><i class="ic i-list-alt"></i> 归档</a></li><li class=item><a href=/categories/ rel=section><i class="ic i-th"></i> 分类</a></li><li class=item><a href=/tags/ rel=section><i class="ic i-tags"></i> 标签</a></li></ul></li><li class=item><a href=/about/ rel=section><i class="ic i-user"></i> 关于</a></li><li class=item><a href=/friend-links/ rel=section><i class="ic i-heart"></i> 友链</a></li></ul></div></div></div><ul id=quick><li class="prev pjax"><a href=/computer-science/programming/network-programming/linux-environment/ rel=prev title=上一篇><i class="ic i-chevron-left"></i></a></li><li class=up><i class="ic i-arrow-up"></i></li><li class=down><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href=/computer-science/programming/network-programming/gcc-compiler/ rel=next title=下一篇><i class="ic i-chevron-right"></i></a></li><li class=percent></li></ul></div></div><div class=dimmer></div></div></main><footer id=footer><div class=inner><div class=widgets><div class="rpost pjax"><h2>随机文章</h2><ul><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a></div><span><a href=/computer-science/learning-address-navigation/ title=学习网址导航>学习网址导航</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/shoka-theme/ title="分类于 Shoka主题">Shoka主题</a></div><span><a href=/computer-science/shoka-theme/supplement-for-shoka-theme/ title=Hexo-Shoka主题功能介绍补充点>Hexo-Shoka主题功能介绍补充点</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/c-data-structure/ title="分类于 C语言数据结构">C语言数据结构</a></div><span><a href=/computer-science/programming/c-language/c-data-structure/seqlist/ title=线性表之顺序表>线性表之顺序表</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/rust/ title="分类于 Rust">Rust</a></div><span><a href=/computer-science/programming/rust/rust-data-structure/linear-structure/static-link-list/ title=Rust-静态链表>Rust-静态链表</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/backtracking/ title="分类于 回溯">回溯</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/backtracking/permutation/ title=回溯-排列>回溯-排列</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/c-basic/ title="分类于 C语言基础">C语言基础</a></div><span><a href=/computer-science/programming/c-language/basis/c/cpart1/ title=C语言基础-第一部分-C89&#x2F;C90标准>C语言基础-第一部分-C89/C90标准</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a></div><span><a href=/computer-science/programming/c-language/c-data-structure/linear-structure/seqqueue/ title=C语言-顺序队列>C语言-顺序队列</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/database/ title="分类于 数据库">数据库</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/database/mysql/ title="分类于 MySQL">MySQL</a></div><span><a href=/computer-science/programming/database/mysql/mspart2/ title=MySQL数据库基础-第二部分>MySQL数据库基础-第二部分</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/dynamic-program/ title="分类于 动态规划">动态规划</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/dynamic-program/subset/word-break/ title=单词拆分>单词拆分</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/seqlist/ title="分类于 顺序表">顺序表</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/seqlist/search/ title=顺序表-查找>顺序表-查找</a></span></li></ul></div><div><h2>最新评论</h2><ul id=waline-recent></ul></div></div><div class=status><div class=copyright>&copy; 2021 – <span itemprop=copyrightYear>2025</span><span class=with-love><i class="ic i-sakura rotate"></i></span> <span class=author itemprop=copyrightHolder>ReverseSacle @ ReverseSacle-Blog</span></div><div class=count><i class="ic i-clock" aria-hidden=true></i> <span id=time align=center>载入时间中...<script defer>var now=new Date;function createtime(){var n=new Date("2021-11-16 22:30:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("time").innerHTML="已经过 "+dnum+" 天 "+hnum+" 小时 "+mnum+" 分 "+snum+" 秒 "}setInterval("createtime()",250)</script></span><span class=post-meta-item-icon>|&nbsp<i class="ic i-chart-area"></i></span> <span title=站点总字数>2.1m 字</span> <span class=post-meta-item-icon>|&nbsp<i class="ic i-coffee"></i></span> <span title=站点阅读时长>40:40</span></div></div></div></footer></div><script data-config>var LOCAL={path:"computer-science/programming/network-programming/Linux-basic/",favicon:{show:"ReverseSacle-Blog",hide:"ReverseSacle-Blog"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},waline:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src=https://polyfill.alicdn.com/v3/polyfill.min.js></script><script src=https://jd.reversesacle.com/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1.16.0/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js></script><script src=/js/app.js></script></body></html>