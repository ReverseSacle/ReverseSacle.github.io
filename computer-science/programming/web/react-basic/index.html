<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content=#222><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=icon type=image/ico sizes=48x48 href=/images/favicon.ico><link rel=alternate type=application/rss+xml title=逆转天平 href=https://www.reversesacle.com/rss.xml><link rel=alternate type=application/atom+xml title=逆转天平 href=https://www.reversesacle.com/atom.xml><link rel=alternate type=application/json title=逆转天平 href=https://www.reversesacle.com/feed.json><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel=stylesheet href=/css/app.css><meta name=description content=web><link rel=canonical href=https://www.reversesacle.com/computer-science/programming/web/react-basic/ ><title>React框架基础 - web - 编程 - 计算机科学 | ReverseSacle-Blog</title><meta name=generator content="Hexo 6.3.0"></head><body itemscope itemtype=http://schema.org/WebPage><div id=loading><div class=dotloader><div class=dot></div><div class=dot></div><div class=dot></div><div class=dot></div><div class=dot></div></div></div><div id=container><header id=header itemscope itemtype=http://schema.org/WPHeader><div class=inner><div id=brand><div class=pjax><h1 itemprop="name headline">React框架基础</h1><div class=meta><span class=item title="创建时间：2024-07-09 15:20:29"><span class=icon><i class="ic i-calendar"></i></span> <span class=text>发表于</span> <time itemprop="dateCreated datePublished" datetime=2024-07-09T15:20:29+08:00>2024-07-09</time></span><span class=item title=本文字数><span class=icon><i class="ic i-pen"></i></span> <span class=text>本文字数</span> <span>21k</span> <span class=text>字</span></span><span class=item title=阅读时长><span class=icon><i class="ic i-clock"></i></span> <span class=text>阅读时长</span> <span>24 分钟</span></span></div></div></div><nav id=nav><div class=inner><div class=toggle><div class=lines role=navigation aria-label=切换导航栏><span class=line></span><span class=line></span><span class=line></span></div></div><ul class=menu><li class="item title"><a href=/ rel=start>ReverseSacle-Blog</a></li></ul><ul class=right><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id=imgs class=pjax><ul><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg15.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg19.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg14.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg21.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg16.webp></li><li class=item data-background-image=https://resa-imgs.oss-accelerate.aliyuncs.com/img/acg13.webp></li></ul></div></header><div id=waves><svg class=waves xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewBox="0 24 150 28" preserveAspectRatio=none shape-rendering=auto><defs><path id=gentle-wave d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352z"/></defs><g class=parallax><use xlink:href=#gentle-wave x=48 y=0 /><use xlink:href=#gentle-wave x=48 y=3 /><use xlink:href=#gentle-wave x=48 y=5 /><use xlink:href=#gentle-wave x=48 y=7 /></g></svg></div><main><div class=inner><div id=main class=pjax><div class="article wrap"><div class=breadcrumb itemscope itemtype=https://schema.org/BreadcrumbList><i class="ic i-home"></i> <span><a href=/ >首页</a></span><i class="ic i-angle-right"></i> <span itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/ itemprop=item rel=index title="分类于 计算机科学"><span itemprop=name>计算机科学</span></a><meta itemprop=position content=1></span><i class="ic i-angle-right"></i> <span itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/programming/ itemprop=item rel=index title="分类于 编程"><span itemprop=name>编程</span></a><meta itemprop=position content=2></span><i class="ic i-angle-right"></i> <span class=current itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/categories/computer-science/programming/web/ itemprop=item rel=index title="分类于 web"><span itemprop=name>web</span></a><meta itemprop=position content=3></span></div><article itemscope itemtype=http://schema.org/Article class="post block" lang=zh-CN><link itemprop=mainEntityOfPage href=https://www.reversesacle.com/computer-science/programming/web/react-basic/ ><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content=/images/avatar.webp><meta itemprop=name content=ReverseSacle><meta itemprop=description content="所见即所得，所思即所行, 知识书库 & 学习点滴"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content=逆转天平></span><div class="body md" itemprop=articleBody><h2 id=前言><a class=anchor href=#前言>#</a> 前言</h2><p>Node.js是一个Chrome v8引擎的JavaScript运行环境，让js运行在操作系统中。</p><p>安装Node.js后，会附带npm，npm是Node包管理工具。</p><p>React是一个用于构建Web和原生交互界面的库。</p><h2 id=创建项目框架><a class=anchor href=#创建项目框架>#</a> 创建项目框架</h2><p><code>npx create-react-app 项目名</code></p><ul><li><p><code>index.js</code> - 是整个项目的入口</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// React必要的两个核心包</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span></pre></td></tr></table></figure></li></ul><h2 id=jsxjavascript与xmlhtml><a class=anchor href=#jsxjavascript与xmlhtml>#</a> JSX(JavaScript与XML(HTML))</h2><h3 id=概述><a class=anchor href=#概述>#</a> 概述</h3><p>JSX是指在JS代码中编写HTML模板结构，是JS的语法扩展，浏览器本身不能识别，需要通过解析工具(BABEL)解析后才能在浏览器中运行。</p><p>通过语法<code>&#123;&#125;</code>识别JavaScript中的表达式，如变量，函数调用，方法调用，JavaScript对象等，不能填入语句。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">'test'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">function</span> <span class="token function">test_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">return</span> <span class="token string">'myname'</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=6></td><td><pre></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=10></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=11></td><td><pre>        	<span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token keyword">this</span> is test<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span></pre></td></tr><tr><td data-num=12></td><td><pre>        	<span class="token punctuation">&#123;</span><span class="token string">'this is test'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=13></td><td><pre>        	<span class="token punctuation">&#123;</span>message<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=14></td><td><pre>			<span class="token punctuation">&#123;</span><span class="token function">test_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=15></td><td><pre>			<span class="token punctuation">&#123;</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=16></td><td><pre>			<span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">0</span><span class="token operator">--</span><span class="token operator">>></span><span class="token keyword">this</span> is tset2<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=17></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=20></td><td><pre></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> App</pre></td></tr></table></figure><h3 id=渲染列表><a class=anchor href=#渲染列表>#</a> 渲染列表</h3><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'Vue'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1001</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'React'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1002</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'Angular'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">]</span></pre></td></tr><tr><td data-num=6></td><td><pre></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=10></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=11></td><td><pre>        	<span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token keyword">this</span> is test<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span></pre></td></tr><tr><td data-num=12></td><td><pre>        	<span class="token operator">&lt;</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre>                <span class="token punctuation">&#123;</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>id<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=14></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num=15></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=18></td><td><pre></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> App</pre></td></tr></table></figure><h3 id=条件渲染><a class=anchor href=#条件渲染>#</a> 条件渲染</h3><p>逻辑与<code>&amp;&amp;</code></p><p>三元运算符<code>exp_condition ? exp1 : exp2</code></p><p>配合JavaScript</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">function</span> <span class="token function">getArticleTem</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">===</span> articleType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>无图文章<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">===</span> articleType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>单图文章<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>三图文章<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=13></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=14></td><td><pre>        	<span class="token punctuation">&#123;</span>isLogin <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token keyword">this</span> is span<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=15></td><td><pre>            <span class="token punctuation">&#123;</span>isLogin <span class="token operator">?</span> <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span> <span class="token operator">:</span> <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token boolean">false</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=16></td><td><pre>            <span class="token punctuation">&#123;</span><span class="token function">getArticleTem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=17></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=20></td><td><pre></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> App</pre></td></tr></table></figure><h3 id=相关操作><a class=anchor href=#相关操作>#</a> 相关操作</h3><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 当前面已经有了一个标签，但是想直接添加多个标签时，用&lt;>&lt;/>可做到</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">></span></pre></td></tr><tr><td data-num=4></td><td><pre>        <span class="token operator">&lt;</span>i className<span class="token operator">=</span><span class="token punctuation">&#123;</span> <span class="token string">'ic-'</span> <span class="token operator">+</span> icon <span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num=5></td><td><pre>        <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">&#123;</span> path <span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">&#123;</span>key<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id=事件绑定><a class=anchor href=#事件绑定>#</a> 事件绑定</h2><p>语法 - <code>on + 事件名称 = &#123;事件处理程序&#125;</code></p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token comment">// 无参</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=5></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'button click'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token comment">// 有参，事件参数e</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'button click'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token comment">// 有参，自定义参数</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=13></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'button click'</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token comment">// 有参，自定义参数与事件参数e</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=17></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'button click'</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=20></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=21></td><td><pre>        	<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span>handleClick<span class="token punctuation">&#125;</span><span class="token operator">></span>click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=22></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token string">'myname'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>click me <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=23></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token string">'myname'</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>click me <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=24></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=26></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=27></td><td><pre></pre></td></tr><tr><td data-num=28></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> App</pre></td></tr></table></figure><h2 id=组件渲染><a class=anchor href=#组件渲染>#</a> 组件渲染</h2><h3 id=概述-2><a class=anchor href=#概述-2>#</a> 概述</h3><p>组件相当于用户界面的一部分，有独自的逻辑和外观，组件之间可以互相嵌套，也可以复用多次。</p><p>React中，一个组件就算首字母大写的函数，内部存放了组件的逻辑和视图UI，渲染组件只需要把组件当成标签书写即可。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 定义组件</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token comment">// 业务逻辑/组件逻辑</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>button<span class="token operator">></span>Click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=6></td><td><pre></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token comment">// 使用组件</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=10></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=11></td><td><pre>            <span class="token operator">&lt;</span>Button <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=12></td><td><pre>        	<span class="token operator">&lt;</span>Button<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=usestate><a class=anchor href=#usestate>#</a> useState</h3><p>useState是一个React Hook(函数)，允许向组件添加一个状态变量，从而控制影响组件的渲染结果。</p><p>与普通的JS变量不同，状态变量一旦发生变化，组件的视图UI也会随之变化。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useState <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment">// const [状态变量,配套修改状态变量的函数] = useState(初始值)</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span>setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment">/////////////////////////////////////////////////////////////</span></pre></td></tr><tr><td data-num=6></td><td><pre></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token comment">// 计数器案例</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span>setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=10></td><td><pre>    </pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=12></td><td><pre>        <span class="token comment">// 重新使用新的count渲染UI</span></pre></td></tr><tr><td data-num=13></td><td><pre>        <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=16></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=17></td><td><pre>            <span class="token operator">&lt;</span>button<span class="token operator">></span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=18></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>相关规则</strong></p><ul><li><p>状态不可变 - 在React中，状态被认为是只读的，应该始终替换它而不是修改它，直接修改状态不能引起视图更新。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 解释的错误案例</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span>setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=4></td><td><pre>    </pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=6></td><td><pre>        <span class="token comment">// 直接修改，但不会引起视图更新</span></pre></td></tr><tr><td data-num=7></td><td><pre>        count<span class="token operator">++</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=10></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=11></td><td><pre>            <span class="token operator">&lt;</span>button<span class="token operator">></span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=12></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>修改对象状态 - 对于对象类型的状态变量，应该始终传给set方法一个全新的对象来进行修改</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 解释的错误案例</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">[</span>from<span class="token punctuation">,</span>setForm<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jack'</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=5></td><td><pre></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">handleChangeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    form<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'john'</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token comment">// 正确用法</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">[</span>from<span class="token punctuation">,</span>setForm<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=14></td><td><pre></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">handleChangeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token function">setForm</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=17></td><td><pre>        <span class="token operator">...</span>form<span class="token punctuation">,</span></pre></td></tr><tr><td data-num=18></td><td><pre>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'john'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ul><h3 id=基础样式><a class=anchor href=#基础样式>#</a> 基础样式</h3><p>行内样式(不推荐) - <code>&lt;div style=&#123;&#123; color: 'red', fontSize: '50px'&#125;&#125;&gt;this is div&lt;/div&gt;</code></p><p>类名控制</p><figure class="highlight css"><figcaption data-lang=CSS><span>index.css</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token selector">.foo</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">,</span></pre></td></tr><tr><td data-num=3></td><td><pre>	<span class="token property">fontSize</span><span class="token punctuation">:</span> <span class="token string">'50px'</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token string">'./indx.css'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">'50px'</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=10></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=11></td><td><pre>            <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token punctuation">&#123;</span>style<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token keyword">this</span> is span<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num=12></td><td><pre>            <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">'foo'</span><span class="token operator">></span><span class="token keyword">this</span> is span<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id=classnames优化类名控制><a class=anchor href=#classnames优化类名控制>#</a> classnames优化类名控制</h2><p>安装 - <code>npm install classnames</code></p><p>classnames是一个简单的JS库，可以非常方便地通过条件动态控制class类名的显示</p><p><code>className=&#123;classNames('静态类名',&#123;控制的类名: 条件&#125;)&#125;</code></p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token operator">&lt;</span>span</pre></td></tr><tr><td data-num=2></td><td><pre>    key<span class="token operator">=</span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>type<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=3></td><td><pre>    onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">handleTabChange</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token comment">// className=&#123;classNames('nav-item',&#123;activate: type === item.type&#125;)&#125;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    className<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">nav-item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>type <span class="token operator">===</span> item<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token string">'active'</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>text<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr></table></figure><h2 id=受控表单绑定-控制表单的状态><a class=anchor href=#受控表单绑定-控制表单的状态>#</a> 受控表单绑定-控制表单的状态</h2><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span>setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=4></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=5></td><td><pre>            <span class="token operator">&lt;</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num=6></td><td><pre>            	value<span class="token operator">=</span><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre>                onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=8></td><td><pre>                type<span class="token operator">=</span><span class="token string">"text"</span></pre></td></tr><tr><td data-num=9></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num=10></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id=useref><a class=anchor href=#useref>#</a> useRef</h2><h3 id=存储持久变量><a class=anchor href=#存储持久变量>#</a> 存储持久变量</h3><p>创建一个可变且持久的引用，它不会触发组件的重新渲染。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">const</span> current <span class="token operator">=</span> ref<span class="token punctuation">.</span>current<span class="token punctuation">;</span> <span class="token comment">// 获取当前引用的值</span></pre></td></tr><tr><td data-num=4></td><td><pre>ref<span class="token punctuation">.</span>current <span class="token operator">=</span> newValue<span class="token punctuation">;</span> <span class="token comment">// 赋新值给引用</span></pre></td></tr></table></figure><h3 id=获取dom><a class=anchor href=#获取dom>#</a> 获取DOM</h3><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 渲染完毕后，即dom生成之后才可使用ref.current获取dom</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token comment">// useRef生成ref对象，绑定到dom标签上</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token keyword">const</span> <span class="token function-variable function">showDom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=6></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inputRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=7></td><td><pre>        <span class="token comment">// 展开</span></pre></td></tr><tr><td data-num=8></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>inputRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    </pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=12></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre>            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> ref<span class="token operator">=</span><span class="token punctuation">&#123;</span>inputRef<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num=14></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span>showDom<span class="token punctuation">&#125;</span><span class="token operator">></span>获取dom<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=15></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>const isFirstRender = useRef(true);</code></p><ul><li><p>保持值的持久性 - 使用<code>useRef</code>创建的引用变量（例如 <code>isFirstRender.current</code>）在组件重新渲染时保持其值不变。这意味着在组件重新渲染期间，<code>isFirstRender.current</code> 的值不会发生变化，从而能够正确地判断是否是第一次渲染。</p></li><li><p>不触发重新渲染 - <code>useRef</code> 创建的变量并不会引起组件的重新渲染。这是因为在 React 中，<code>useState</code> 和 <code>useReducer</code> 创建的状态变量会触发组件的重新渲染，而 <code>useRef</code> 创建的变量不会。</p></li><li><p>适用于保存状态 - <code>useRef</code> 通常用于保存不需要触发重新渲染的状态或标记。在 <code>useEffect</code> 中，可能会根据 <code>isFirstRender.current</code> 的值来执行不同的逻辑，而不影响组件的重新渲染。</p></li></ul><h2 id=组件通信-组件之间的数据传递><a class=anchor href=#组件通信-组件之间的数据传递>#</a> 组件通信-组件之间的数据传递</h2><h3 id=父组件传递给子组件><a class=anchor href=#父组件传递给子组件>#</a> 父组件传递给子组件</h3><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// props是一个对象，里面包含了父组件的全部内容</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>    </pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token keyword">this</span> is son，<span class="token punctuation">&#123;</span>props<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=6></td><td><pre></pre></td></tr><tr><td data-num=7></td><td><pre></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'this is test name'</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=11></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=12></td><td><pre>            <span class="token operator">&lt;</span>Son name<span class="token operator">=</span><span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// props可以传递任意数据</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment">// props是只读对象，不能直接修改，父组件的数据只能父组件修改</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token operator">&lt;</span>Son</pre></td></tr><tr><td data-num=4></td><td><pre>    name<span class="token operator">=</span><span class="token punctuation">&#123;</span>appName<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    age<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">20</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=6></td><td><pre>    isTrue<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token boolean">false</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    list<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">[</span><span class="token string">'Vue'</span><span class="token punctuation">,</span><span class="token string">'React'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    obj<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">2</span><span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num=9></td><td><pre>    cb<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    child<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token keyword">this</span> is span child<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=12></td><td><pre></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token comment">// 特殊的prop children</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token comment">// 把内容嵌套在子组件标签中，父组件会自动在名为children的prop属性中接收该内容</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token keyword">this</span> is son<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>props<span class="token punctuation">.</span>children<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=18></td><td><pre></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'this is test name'</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=22></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=23></td><td><pre>            <span class="token operator">&lt;</span>Son<span class="token operator">></span></pre></td></tr><tr><td data-num=24></td><td><pre>                <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token keyword">this</span> is span<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num=25></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>Son<span class="token operator">></span></pre></td></tr><tr><td data-num=26></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=27></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=28></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=子组件传递给父组件><a class=anchor href=#子组件传递给父组件>#</a> 子组件传递给父组件</h3><p>在子组件中调用父组件中的函数并传递参数。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// props可以传递任意数据</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment">// props是只读对象，不能直接修改，父组件的数据只能父组件修改</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token operator">&lt;</span>Son</pre></td></tr><tr><td data-num=4></td><td><pre>    name<span class="token operator">=</span><span class="token punctuation">&#123;</span>appName<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    age<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">20</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=6></td><td><pre>    isTrue<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token boolean">false</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    list<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">[</span><span class="token string">'Vue'</span><span class="token punctuation">,</span><span class="token string">'React'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    obj<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">3</span><span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num=9></td><td><pre>    cb<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    child<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token keyword">this</span> is span child<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=12></td><td><pre></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token comment">// 特殊的prop children</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token comment">// 把内容嵌套在子组件标签中，父组件会自动在名为children的prop属性中接收该内容</span></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> onGetSonMsg <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">'son msg'</span></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=18></td><td><pre>        <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=19></td><td><pre>            <span class="token keyword">this</span> is son</pre></td></tr><tr><td data-num=20></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">onGetMsg</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>sendMsg<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=21></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=23></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=24></td><td><pre></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=26></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>msg<span class="token punctuation">,</span>setMsg<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=27></td><td><pre>    <span class="token keyword">const</span> <span class="token function-variable function">getMsg</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=28></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=29></td><td><pre>        <span class="token function">setMsg</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=30></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=31></td><td><pre>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'this is test name'</span></pre></td></tr><tr><td data-num=32></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=33></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=34></td><td><pre>            <span class="token keyword">this</span> is App<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>msg<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=35></td><td><pre>            <span class="token operator">&lt;</span>Son onGetSonMsg<span class="token operator">=</span><span class="token punctuation">&#123;</span>getMsg<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Son<span class="token operator">></span></pre></td></tr><tr><td data-num=36></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=37></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=38></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=兄弟组件通信><a class=anchor href=#兄弟组件通信>#</a> 兄弟组件通信</h3><p>借助状态提升机制，通过父组件进行兄弟之间的数据传递。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> onGetAName <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'this is A name'</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=4></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=5></td><td><pre>        	<span class="token keyword">this</span> is <span class="token constant">A</span> compnent<span class="token punctuation">,</span></pre></td></tr><tr><td data-num=6></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">onGetAName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>send<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=7></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'this is B name'</span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=14></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=15></td><td><pre>        	<span class="token keyword">this</span> is <span class="token constant">B</span> compnent<span class="token punctuation">,</span></pre></td></tr><tr><td data-num=16></td><td><pre>            <span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=17></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=20></td><td><pre></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span>setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=24></td><td><pre>    cosnt <span class="token function-variable function">getAName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=26></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=27></td><td><pre>        	<span class="token keyword">this</span> is App</pre></td></tr><tr><td data-num=28></td><td><pre>            <span class="token operator">&lt;</span><span class="token constant">A</span> onGetAName<span class="token operator">=</span><span class="token punctuation">&#123;</span>getAName<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=29></td><td><pre>            <span class="token operator">&lt;</span><span class="token constant">B</span> name<span class="token operator">=</span><span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=30></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=31></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=32></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=使用context机制-跨层级组件通信><a class=anchor href=#使用context机制-跨层级组件通信>#</a> 使用Context机制-跨层级组件通信</h3><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// createContext()方法创建一个上下文对象</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">const</span> MsgContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> onGetAName <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'this is A name'</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=7></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>        	<span class="token keyword">this</span> is <span class="token constant">A</span> compnent<span class="token punctuation">,</span></pre></td></tr><tr><td data-num=9></td><td><pre>            <span class="token operator">&lt;</span><span class="token constant">B</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=10></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=13></td><td><pre></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=15></td><td><pre>    <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MsgContext<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=16></td><td><pre></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token comment">// 在底层组件中，通过useContext钩子函数使用数据</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=19></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=20></td><td><pre>        	<span class="token keyword">this</span> is <span class="token constant">B</span> compnent<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>msg<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=21></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=23></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=24></td><td><pre></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=26></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=27></td><td><pre>    <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">'this is app msg'</span></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token comment">// 在顶层组件，通过Providre组件提供数据</span></pre></td></tr><tr><td data-num=29></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=30></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=31></td><td><pre>             <span class="token operator">&lt;</span>MsgContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">&#123;</span>msg<span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num=32></td><td><pre>                <span class="token keyword">this</span> is App</pre></td></tr><tr><td data-num=33></td><td><pre>                <span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=34></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>MsgContext<span class="token punctuation">.</span>Provider<span class="token operator">></span></pre></td></tr><tr><td data-num=35></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=36></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=37></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id=useeffect><a class=anchor href=#useeffect>#</a> useEffect</h2><h3 id=概述-3><a class=anchor href=#概述-3>#</a> 概述</h3><p>useEffect是一个React Hook函数，用于在React组件中创建不是由事件引起而是由渲染本身引起的操作，比如发送AJAX请求，更改DOM等。</p><p><code>useEffect(() =&gt; &#123;副作用函数&#125;,[依赖项])</code>，数组为空时只执行一次</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 组件渲染完毕后，立即从服务端获取频道数据并显示到页面中</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useEffect <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react'</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">const</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token string">'http://xxx/v/channels'</span></pre></td></tr><tr><td data-num=5></td><td><pre></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>list<span class="token punctuation">,</span>setList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=10></td><td><pre>        <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=11></td><td><pre>            <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre>            <span class="token keyword">const</span> list <span class="token operator">=</span> awiat res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=13></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=14></td><td><pre>            <span class="token function">setList</span><span class="token punctuation">(</span>jsonRes<span class="token punctuation">.</span>data<span class="token punctuation">.</span>channels<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=15></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=16></td><td><pre>        <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=19></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=20></td><td><pre>            <span class="token keyword">this</span> is app</pre></td></tr><tr><td data-num=21></td><td><pre>            <span class="token operator">&lt;</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num=22></td><td><pre>                <span class="token punctuation">&#123;</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span>item<span class="token punctuation">.</span>key<span class="token operator">></span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=23></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num=24></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=26></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><table><thead><tr><th>依赖项</th><th>副作用函数执行时机</th></tr></thead><tbody><tr><td>没有依赖项</td><td>组件初始渲染 + 组件更新时执行</td></tr><tr><td>空数组依赖</td><td>只在初始渲染时执行一次</td></tr><tr><td>添加特定依赖项</td><td>组件初始渲染 + 特性依赖项变化时执行</td></tr></tbody></table><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span>setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token comment">// 没有依赖项</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token comment">// useEffect(() => &#123; console.log('执行')&#125;)</span></pre></td></tr><tr><td data-num=7></td><td><pre>    </pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token comment">// 空数组依赖，只会在组件初始时执行一次</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// useEffect(() => &#123; console.log('执行')&#125;,[])</span></pre></td></tr><tr><td data-num=10></td><td><pre>    </pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token comment">// 特定依赖项，初始 + 依赖项变化时执行</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=14></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=15></td><td><pre>            <span class="token keyword">this</span> is app</pre></td></tr><tr><td data-num=16></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">+</span><span class="token punctuation">&#123;</span>count<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=17></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=清除副作用副作用操作><a class=anchor href=#清除副作用副作用操作>#</a> 清除副作用(副作用操作)</h3><p>如，在useEffect中开启了一个定时器，想在组件卸载时把这个定时器再清理掉，整个过程就是清理副作用。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 基本形式</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=5></td><td><pre></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token comment">// 案例</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>   	<span class="token comment">// 开启定时器</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=10></td><td><pre>        <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=11></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'定时执行中。。。'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=13></td><td><pre>        </pre></td></tr><tr><td data-num=14></td><td><pre>        <span class="token comment">// 组件卸载时会自动执行函数</span></pre></td></tr><tr><td data-num=15></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=16></td><td><pre>            <span class="token comment">// 清除副作用</span></pre></td></tr><tr><td data-num=17></td><td><pre>            <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=18></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token keyword">this</span> is son<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=22></td><td><pre></pre></td></tr><tr><td data-num=23></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=25></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span>setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=26></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=27></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=28></td><td><pre>            <span class="token punctuation">&#123;</span>show <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Son <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=29></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setShow</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>卸载Son组件<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=30></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=31></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=32></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id=自定义hook函数><a class=anchor href=#自定义hook函数>#</a> 自定义Hook函数</h2><h3 id=概述-4><a class=anchor href=#概述-4>#</a> 概述</h3><p>自定义Hook是以use开头的函数，通过自定义Hook函数可以用来实现逻辑的封装和复用。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 问题：布尔切换逻辑，当前组件耦合在一起的，不方便复用</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useState <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react'</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token comment">// 自定义Hook函数</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment">// 声明一个以use开头的函数</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token comment">// 在函数体内封装可复用的逻辑(只要是可复用的逻辑)</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token comment">// 把组件中用到的状态或回调return出去</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token comment">// 在哪个组件中要用这个逻辑，就执行这个函数，解构出来状态和回调进行使用</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">function</span> <span class="token function">useToggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span>setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token keyword">const</span> <span class="token function-variable function">toggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre>    </pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=14></td><td><pre>        value<span class="token punctuation">,</span></pre></td></tr><tr><td data-num=15></td><td><pre>        toggle</pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=17></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=18></td><td><pre></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    cosnt <span class="token punctuation">&#123;</span> value<span class="token punctuation">,</span>toggle <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">useToggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=22></td><td><pre>    </pre></td></tr><tr><td data-num=23></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=24></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=25></td><td><pre>            <span class="token punctuation">&#123;</span>value <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token keyword">this</span> is div<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=26></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span>toggle<span class="token punctuation">&#125;</span><span class="token operator">></span>toggle<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=27></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=29></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=hooks使用规则><a class=anchor href=#hooks使用规则>#</a> Hooks使用规则</h3><p>只能在组件中或其他自定义Hook函数中调用。</p><p>只能在组件的顶层调用，不能嵌套在if、for、其他函数中。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useState <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment">// 只能在组件中或其他自定义Hook函数中调用。</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token comment">// 错误案例</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment">// useState('')</span></pre></td></tr><tr><td data-num=6></td><td><pre></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// 只能在组件的顶层调用，不能嵌套在if、for、其他函数中。</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token comment">// 错误案例</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=12></td><td><pre>        <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=15></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=16></td><td><pre>            <span class="token keyword">this</span> is test</pre></td></tr><tr><td data-num=17></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">)</span>   </pre></td></tr><tr><td data-num=19></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id=reactrouter-路由><a class=anchor href=#reactrouter-路由>#</a> ReactRouter-路由</h2><h3 id=创建项目><a class=anchor href=#创建项目>#</a> 创建项目</h3><figure class="highlight bash"><figcaption data-lang=bash></figcaption><table><tr><td data-num=1></td><td><pre>npx create-react-app react-router-pro</pre></td></tr><tr><td data-num=2></td><td><pre><span class="token builtin class-name">cd</span> react-router-pro</pre></td></tr><tr><td data-num=3></td><td><pre><span class="token function">npm</span> i</pre></td></tr><tr><td data-num=4></td><td><pre><span class="token function">npm</span> i react-router-dom</pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> reportWebBitals <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./reportWebVitals'</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> crateBrowserRouter<span class="token punctuation">,</span>RouterProvider <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token comment">// 创建router实例对象并配置路由对应关系</span></pre></td></tr><tr><td data-num=5></td><td><pre>cosnt router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=11></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/article'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=12></td><td><pre>        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>文章<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=15></td><td><pre></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=17></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num=18></td><td><pre>	<span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">></span></pre></td></tr><tr><td data-num=19></td><td><pre>        <span class="token operator">&lt;</span>RouterProvider router<span class="token operator">=</span><span class="token punctuation">&#123;</span>router<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>RouterProvider<span class="token operator">></span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">></span></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id=抽象路由模块><a class=anchor href=#抽象路由模块>#</a> 抽象路由模块</h3><p>可以将代码分文件写</p><h3 id=路由导航><a class=anchor href=#路由导航>#</a> 路由导航</h3><p>多个路由之间需要进行路由跳转，并在跳转的同时有可能传递参数进行通信。</p><h4 id=声明式导航><a class=anchor href=#声明式导航>#</a> 声明式导航</h4><figure class="highlight javascript"><figcaption data-lang=javascript><span>./router/index.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Link<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=5></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=6></td><td><pre>            登录页</pre></td></tr><tr><td data-num=7></td><td><pre>            <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/article"</span><span class="token operator">></span>文章<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id=编程式导航><a class=anchor href=#编程式导航>#</a> 编程式导航</h4><figure class="highlight javascript"><figcaption data-lang=javascript><span>./router/index.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>useNavigate<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=6></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=7></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">'/article'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>跳转到文章页<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=传参><a class=anchor href=#传参>#</a> 传参</h3><h4 id=searchparams传参><a class=anchor href=#searchparams传参>#</a> searchParams传参</h4><figure class="highlight javascript"><figcaption data-lang=javascript><span>./router/index.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>useNavigate<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=5></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=6></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">'/article?id=1001&amp;name=jack'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>跳转到文章页<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=7></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript><span>./router/atricle/index.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useSearchParams <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"react-router-dom"</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Article</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>params<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token keyword">const</span> id <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre>	<span class="token keyword">const</span> name <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>文章页<span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span><span class="token operator">-</span><span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Article</pre></td></tr></table></figure><h4 id=params传参><a class=anchor href=#params传参>#</a> Params传参</h4><figure class="highlight javascript"><figcaption data-lang=javascript><span>./router/index.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>useNavigate<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=5></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=6></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">'/article/1001/jack'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>跳转到文章页<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=7></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript><span>./router/index.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> reportWebBitals <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./reportWebVitals'</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> crateBrowserRouter<span class="token punctuation">,</span>RouterProvider <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token comment">// 创建router实例对象并配置路由对应关系</span></pre></td></tr><tr><td data-num=5></td><td><pre>cosnt router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=11></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/article/:id/:name'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=12></td><td><pre>        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>文章<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=15></td><td><pre></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=17></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num=18></td><td><pre>	<span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">></span></pre></td></tr><tr><td data-num=19></td><td><pre>        <span class="token operator">&lt;</span>RouterProvider router<span class="token operator">=</span><span class="token punctuation">&#123;</span>router<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>RouterProvider<span class="token operator">></span></pre></td></tr><tr><td data-num=20></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">></span></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript><span>./router/atricle/index.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useParams <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"react-router-dom"</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Article</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token keyword">const</span> id <span class="token operator">=</span> params<span class="token punctuation">.</span>id</pre></td></tr><tr><td data-num=6></td><td><pre>	<span class="token keyword">const</span> name <span class="token operator">=</span> params<span class="token punctuation">.</span>name</pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>文章页<span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span><span class="token operator">-</span><span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Article</pre></td></tr></table></figure><h3 id=嵌套路由><a class=anchor href=#嵌套路由>#</a> 嵌套路由</h3><p>使用children属性配置路由嵌套关系。</p><p>使用<code>&lt;Qutlet/&gt;</code>组件配置二级路由渲染位置。</p><figure class="highlight javascript"><figcaption data-lang=javascript><span>主路由</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Layout <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num=5></td><td><pre>        <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=6></td><td><pre>            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'boadr'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=7></td><td><pre>            <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Board <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=9></td><td><pre>        <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=10></td><td><pre>            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=11></td><td><pre>            <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>About <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=12></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript><span>子路由</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Layout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=3></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=4></td><td><pre>        	<span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/board"</span><span class="token operator">></span>面板<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num=5></td><td><pre>            <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>关于<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num=6></td><td><pre>            </pre></td></tr><tr><td data-num=7></td><td><pre>            <span class="token operator">&lt;</span>Qutlet <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=默认二级路由><a class=anchor href=#默认二级路由>#</a> 默认二级路由</h3><p>在打开一级路由时同时显示二级路由的内容，去掉path属性，添加index属性为true.</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>        <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=4></td><td><pre>        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Board <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token operator">...</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">]</span></pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Layout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=3></td><td><pre>    	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=4></td><td><pre>        	<span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>面板<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num=5></td><td><pre>            <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>关于<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num=6></td><td><pre>            </pre></td></tr><tr><td data-num=7></td><td><pre>            <span class="token operator">&lt;</span>Qutlet <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=404路由配置><a class=anchor href=#404路由配置>#</a> 404路由配置</h3><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 定义notfound组件</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">NotFound</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token keyword">this</span> is notfound<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=3></td><td><pre>    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>NotFound <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=两种路由模式><a class=anchor href=#两种路由模式>#</a> 两种路由模式</h3><p>ReactRouter分别由createBrowerRouter和createHashRouter函数负责创建，对应history模式和hash模式。</p><table><thead><tr><th>路由模式</th><th>url表现</th><th>底层原理</th><th>是否需要后端支持</th></tr></thead><tbody><tr><td>history</td><td>url/login</td><td>history对象 + pushState事件</td><td>需要</td></tr><tr><td>hash</td><td>url/#/login</td><td>监听hashChange事件</td><td>不需要</td></tr></tbody></table><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>createBrowerRouter<span class="token punctuation">,</span>createHashRouter<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createHashRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id=第三方便捷开发包><a class=anchor href=#第三方便捷开发包>#</a> 第三方便捷开发包</h2><h3 id=安装scss><a class=anchor href=#安装scss>#</a> 安装SCSS</h3><p>SCSS是一种后缀名为<code>.scss</code>的预编译CSS语言，支持一些原生CSS不支持的高级用法，支持嵌套语法。</p><p>注意这里的后缀为<code>.scss</code>。</p><p>安装 - <code>npm install sass -D</code></p><figure class="highlight scss"><figcaption data-lang="Sass (Scss)"></figcaption><table><tr><td data-num=1></td><td><pre><span class="token selector">#root </span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=2></td><td><pre>    <span class="token selector">div </span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=3></td><td><pre>        <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=安装ant-sesign><a class=anchor href=#安装ant-sesign>#</a> 安装Ant Sesign</h3><p>Ant Design内置了常用的现成组件，可以用于快速开发PC管理后台项目。</p><p>安装 - <code>npm install antd --save</code></p><h2 id=redux应用状态集中管理工具><a class=anchor href=#redux应用状态集中管理工具>#</a> Redux(应用状态集中管理工具)</h2><p>Redux是React最常用的集中管理工具，类似于Vue中的Pinia(Vuex)，可以独立于框架运行，通过集中管理的方式管理应用的状态。</p><p>不被推荐使用。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 1.定义reducer函数</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token comment">// 作用：根据不同的action对象，返回不同的新的state</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment">// state: 管理的数据初始状态，action：对象type标记当前想要做什么样的修改</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>action</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">'INCREMENT'</span> <span class="token operator">===</span> action<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">'DECREMENT'</span> <span class="token operator">===</span> action<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=10></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token keyword">return</span> state</pre></td></tr><tr><td data-num=13></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=14></td><td><pre></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token comment">// 2.使用reducer函数生成store实例</span></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token keyword">const</span> store <span class="token operator">=</span> Redux<span class="token punctuation">.</span><span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=17></td><td><pre></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token comment">// 3.通过store实例的subscribe订阅数据变化</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token comment">// 回调函数可以在每次state发生变化的时候自动执行</span></pre></td></tr><tr><td data-num=20></td><td><pre>store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'state变化了'</span><span class="token punctuation">,</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=22></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count</pre></td></tr><tr><td data-num=23></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=24></td><td><pre></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token comment">// 4.通过store实例的dispatch函数提交action更改状态</span></pre></td></tr><tr><td data-num=26></td><td><pre><span class="token keyword">const</span> inBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=27></td><td><pre>inBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token comment">// 增</span></pre></td></tr><tr><td data-num=29></td><td><pre>    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=30></td><td><pre>        <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'INCREMENT'</span></pre></td></tr><tr><td data-num=31></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=32></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=33></td><td><pre><span class="token keyword">const</span> dBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'decrement'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=34></td><td><pre>inBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=35></td><td><pre>    <span class="token comment">// 减</span></pre></td></tr><tr><td data-num=36></td><td><pre>    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=37></td><td><pre>        <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'DECREMENT'</span></pre></td></tr><tr><td data-num=38></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=39></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=40></td><td><pre></pre></td></tr><tr><td data-num=41></td><td><pre><span class="token comment">// 5.通过store实例的getState方法获取到最新状态更新到视图中</span></pre></td></tr></table></figure><p>Redux把整个数据修改的流程分成了三个核心概念，分别是：state、action和reducer</p><ul><li>state - 一个对象，存放管理的数据状态</li><li>action - 一个对象，用来描述如何修改数据</li><li>reducer - 一个函数，根据action的描述生成一个新的state</li></ul><h3 id=redux配置环境><a class=anchor href=#redux配置环境>#</a> Redux配置环境</h3><h4 id=安装><a class=anchor href=#安装>#</a> 安装</h4><figure class="highlight bash"><figcaption data-lang=bash></figcaption><table><tr><td data-num=1></td><td><pre>npx create-react-app react-redux</pre></td></tr><tr><td data-num=2></td><td><pre><span class="token function">npm</span> i @reduxjs/toolkit react-redux</pre></td></tr></table></figure><p><code>redux Toolkit(RTK)</code> - 官方推荐编写Redux逻辑的方式，是一套工具的合集，用于简化书写方式</p><p><code>react-redux</code> - 用于链接Redux和React组件的中间件</p><h4 id=目录结构><a class=anchor href=#目录结构>#</a> 目录结构</h4><p>store</p><ul><li>modules<ul><li>channelStore.js</li><li>counterStore.js</li></ul></li><li>index.js</li></ul><h3 id=使用react-toolkit创建counterstore><a class=anchor href=#使用react-toolkit创建counterstore>#</a> 使用React Toolkit创建counterStore</h3><figure class="highlight javascript"><figcaption data-lang=javascript><span>counterStore.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 配置counterStroe模块</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createSlice <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@reduxjs/toolkit'</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">const</span> counterStore <span class="token operator">=</span> <span class="token function">createSlice</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'counter'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token comment">// 初始化状态数据</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token literal-property property">initialState</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token comment">// 修改数据的同步方法</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token literal-property property">reducers</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=12></td><td><pre>        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=13></td><td><pre>            state<span class="token punctuation">.</span>count<span class="token operator">++</span></pre></td></tr><tr><td data-num=14></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=15></td><td><pre>        <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=16></td><td><pre>            state<span class="token punctuation">.</span>count<span class="token operator">--</span></pre></td></tr><tr><td data-num=17></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=18></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=19></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=20></td><td><pre></pre></td></tr><tr><td data-num=21></td><td><pre><span class="token comment">// 结构出创建action对象的函数 (actionCreater)</span></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span>increment<span class="token punctuation">,</span> decrement<span class="token punctuation">&#125;</span> <span class="token operator">=</span> counterStore<span class="token punctuation">.</span>actions</pre></td></tr><tr><td data-num=23></td><td><pre><span class="token comment">// 获取reducer函数</span></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token keyword">const</span> counterReducer <span class="token operator">=</span> counterStore<span class="token punctuation">.</span>reducer</pre></td></tr><tr><td data-num=25></td><td><pre><span class="token comment">// 导出创建action对象的函数和reducer函数</span></pre></td></tr><tr><td data-num=26></td><td><pre><span class="token keyword">export</span> <span class="token punctuation">&#123;</span> increment<span class="token punctuation">,</span> decrement <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=27></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> counterReducer</pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript><span>store/index.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 配置根store并组合counterStore模块</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>configureStore<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@reduxjs/toolkit"</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">import</span> counterReducer <span class="token keyword">from</span> <span class="token string">"./modules/counterStroe"</span></pre></td></tr><tr><td data-num=4></td><td><pre></pre></td></tr><tr><td data-num=5></td><td><pre><span class="token comment">// 创建根store组合子模块</span></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">configureStore</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token literal-property property">reducer</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token literal-property property">counter</span><span class="token operator">:</span> counterReducer</pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=10></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=11></td><td><pre></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> store</pre></td></tr></table></figure><h3 id=为react注入store><a class=anchor href=#为react注入store>#</a> 为React注入store</h3><p>react-redux负责把Redux和React链接起来，内置Provider组件，通过store参数把创建好的store实例注入到应用中。</p><figure class="highlight javascript"><figcaption data-lang=javascript><span>./index.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Provider <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=5></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num=6></td><td><pre>	<span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">&#123;</span>store<span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num=7></td><td><pre>        <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span></pre></td></tr><tr><td data-num=9></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id=react组件中使用store中的数据><a class=anchor href=#react组件中使用store中的数据>#</a> React组件中使用store中的数据</h3><p>在React组件中使用store中的数据，需要用到一个钩子函数 - useSelector，它的作用是把store中的数据映射到组件中。</p><figure class="highlight javascript"><figcaption data-lang=javascript></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useSelector <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> count <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=></span> state<span class="token punctuation">.</span>counter<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=7></td><td><pre>    	<span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span></pre></td></tr><tr><td data-num=8></td><td><pre>        	<span class="token punctuation">&#123;</span>count<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=9></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=11></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=12></td><td><pre></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> App</pre></td></tr></table></figure><h3 id=react组件修改store中的数据><a class=anchor href=#react组件修改store中的数据>#</a> React组件修改store中的数据</h3><p>React组件中修改store中的数据需要借助名为useDispatch的hook函数，它的作用是生成提交action对象的dispatch函数。</p><figure class="highlight javascript"><figcaption data-lang=javascript><span>./index</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useDispatch<span class="token punctuation">,</span>useSelector <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment">// 导入创建action对象的方法</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> decrement<span class="token punctuation">,</span>increment <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./store/modules/counterStore'</span></pre></td></tr><tr><td data-num=5></td><td><pre></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> count <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=></span> state<span class="token punctuation">.</span>counter<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// 得到dispatch函数</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=12></td><td><pre>    	<span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=14></td><td><pre>            <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token punctuation">&#123;</span>count<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num=15></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=16></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=提交action-传参><a class=anchor href=#提交action-传参>#</a> 提交action-传参</h3><p>在reducers的同步修改方法中添加action对象参数，在调用actionCreater的时候传递参数，参数会被传递到action对象payload属性上。</p><figure class="highlight javascript"><figcaption data-lang=javascript><span>counterStore.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 配置counterStroe模块</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createSlice <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@reduxjs/toolkit'</span></pre></td></tr><tr><td data-num=3></td><td><pre></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">const</span> counterStore <span class="token operator">=</span> <span class="token function">createSlice</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'counter'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=6></td><td><pre>    <span class="token comment">// 初始化状态数据</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token literal-property property">initialState</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>        <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token comment">// 修改数据的同步方法</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token literal-property property">reducers</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=12></td><td><pre>        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=13></td><td><pre>            state<span class="token punctuation">.</span>count<span class="token operator">++</span></pre></td></tr><tr><td data-num=14></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=15></td><td><pre>        <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=16></td><td><pre>            state<span class="token punctuation">.</span>count<span class="token operator">--</span></pre></td></tr><tr><td data-num=17></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=18></td><td><pre>        <span class="token function">addToNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>action</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=19></td><td><pre>            state<span class="token punctuation">.</span>count <span class="token operator">=</span> action<span class="token punctuation">.</span>payload</pre></td></tr><tr><td data-num=20></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=21></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=22></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=23></td><td><pre></pre></td></tr><tr><td data-num=24></td><td><pre><span class="token comment">// 结构出创建action对象的函数 (actionCreater)</span></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span>increment<span class="token punctuation">,</span> decrement<span class="token punctuation">&#125;</span> <span class="token operator">=</span> counterStore<span class="token punctuation">.</span>actions</pre></td></tr><tr><td data-num=26></td><td><pre><span class="token comment">// 获取reducer函数</span></pre></td></tr><tr><td data-num=27></td><td><pre><span class="token keyword">const</span> counterReducer <span class="token operator">=</span> counterStore<span class="token punctuation">.</span>reducer</pre></td></tr><tr><td data-num=28></td><td><pre><span class="token comment">// 导出创建action对象的函数和reducer函数</span></pre></td></tr><tr><td data-num=29></td><td><pre><span class="token keyword">export</span> <span class="token punctuation">&#123;</span> increment<span class="token punctuation">,</span> decrement <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=30></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> counterReducer</pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript><span>./App.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useDispatch<span class="token punctuation">,</span>useSelector <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token comment">// 导入创建action对象的方法</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> decrement<span class="token punctuation">,</span>increment<span class="token punctuation">,</span>addToNum <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./store/modules/counterStore'</span></pre></td></tr><tr><td data-num=5></td><td><pre></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> count <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=></span> state<span class="token punctuation">.</span>counter<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token comment">// 得到dispatch函数</span></pre></td></tr><tr><td data-num=10></td><td><pre>    <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=12></td><td><pre>    	<span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span></pre></td></tr><tr><td data-num=13></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=14></td><td><pre>            <span class="token punctuation">&#123;</span>count<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=15></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=16></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addToNum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>add to <span class="token number">10</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=17></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addToNum</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>add to <span class="token number">10</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=18></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=20></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=异步状态操作><a class=anchor href=#异步状态操作>#</a> 异步状态操作</h3><p><strong>步骤</strong></p><ul><li>创建store的写法保持不变，配置好同步修改状态的方法</li><li>单独封装一个函数，在函数内部return一个新函数，在新函数中<ul><li>封装异步请求获取数据</li><li>调用同步actionCreater传入异步数据生成一个action对象，并使用dispatch提交</li></ul></li><li>组件中dispatch的写法保持不变</li></ul><figure class="highlight javascript"><figcaption data-lang=javascript><span>./store/modules/channelStore.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> crateSlice <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@reduxjs/toolkit"</span></pre></td></tr><tr><td data-num=2></td><td><pre></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">const</span> channelStoer <span class="token operator">=</span> <span class="token function">createSlice</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=4></td><td><pre>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'channel'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=5></td><td><pre>    <span class="token literal-property property">initialState</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=6></td><td><pre>        <span class="token literal-property property">channelList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num=7></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token literal-property property">reducers</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>        <span class="token function">setChannels</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>action</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=10></td><td><pre>            state<span class="token punctuation">.</span>channelist <span class="token operator">=</span> action<span class="token punctuation">.</span>payload</pre></td></tr><tr><td data-num=11></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=12></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=13></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=14></td><td><pre></pre></td></tr><tr><td data-num=15></td><td><pre><span class="token comment">// 异步请求部分</span></pre></td></tr><tr><td data-num=16></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> setChannels <span class="token punctuation">&#125;</span> <span class="token operator">=</span> channelStore<span class="token punctuation">.</span>actions</pre></td></tr><tr><td data-num=17></td><td><pre></pre></td></tr><tr><td data-num=18></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">fetchChannlList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=19></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=20></td><td><pre>        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://xxxx/v/channels'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=21></td><td><pre>        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">setChannels</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>channels<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=22></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=23></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=24></td><td><pre></pre></td></tr><tr><td data-num=25></td><td><pre><span class="token keyword">export</span> <span class="token punctuation">&#123;</span> fetchChannelList <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=26></td><td><pre></pre></td></tr><tr><td data-num=27></td><td><pre><span class="token keyword">const</span> reducer <span class="token operator">=</span> channelStore<span class="token punctuation">.</span>reducer</pre></td></tr><tr><td data-num=28></td><td><pre></pre></td></tr><tr><td data-num=29></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> reducer</pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript><span>./modules/index.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token comment">// 配置根store并组合counterStore模块</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>configureStore<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@reduxjs/toolkit"</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">import</span> counterReducer <span class="token keyword">from</span> <span class="token string">"./modules/counterStroe"</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">import</span> channelReducer <span class="token keyword">from</span> <span class="token string">'./modules/channelStore'</span></pre></td></tr><tr><td data-num=5></td><td><pre></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token comment">// 创建根store组合子模块</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">configureStroe</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token literal-property property">reducer</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=9></td><td><pre>        <span class="token literal-property property">counter</span><span class="token operator">:</span> counterReducer</pre></td></tr><tr><td data-num=10></td><td><pre>        <span class="token literal-property property">channel</span><span class="token operator">:</span> channelReducer</pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=12></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=13></td><td><pre></pre></td></tr><tr><td data-num=14></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> store</pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang=javascript><span>./App.js</span></figcaption><table><tr><td data-num=1></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useEffect <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react'</span></pre></td></tr><tr><td data-num=2></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useDispatch<span class="token punctuation">,</span>useSelector <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span></pre></td></tr><tr><td data-num=3></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> decrement<span class="token punctuation">,</span>increment<span class="token punctuation">,</span>addToNum <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./store/modules/counterStore'</span></pre></td></tr><tr><td data-num=4></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> fetchChannlList <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./store/modules/channelStore'</span></pre></td></tr><tr><td data-num=5></td><td><pre></pre></td></tr><tr><td data-num=6></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=7></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=8></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> count <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=></span> state<span class="token punctuation">.</span>counter<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=9></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> channelList <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=></span> state<span class="token punctuation">.</span>channel<span class="token punctuation">)</span></pre></td></tr><tr><td data-num=10></td><td><pre></pre></td></tr><tr><td data-num=11></td><td><pre>    <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=12></td><td><pre>    </pre></td></tr><tr><td data-num=13></td><td><pre>    <span class="token comment">// 使用useEffect触发异步请求执行</span></pre></td></tr><tr><td data-num=14></td><td><pre>    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num=15></td><td><pre>        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">fetchChannelList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=16></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">[</span>dispatch<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num=17></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num=18></td><td><pre>    	<span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span></pre></td></tr><tr><td data-num=19></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=20></td><td><pre>            <span class="token punctuation">&#123;</span>count<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=21></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=22></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addToNum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>add to <span class="token number">10</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=23></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addToNum</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>add to <span class="token number">10</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num=24></td><td><pre>            <span class="token operator">&lt;</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num=25></td><td><pre>                <span class="token punctuation">&#123;</span>channelList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>id<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num=26></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num=27></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num=28></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num=29></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id=redux调试><a class=anchor href=#redux调试>#</a> Redux调试</h3><p>浏览器插件 - <code>Redux DevTools</code></p><p>F12 → Redux</p><div class=tags><a href=/tags/web/ rel=tag><i class="ic i-tag"></i> web</a></div></div><footer><div class=meta><span class=item><span class=icon><i class="ic i-calendar-check"></i></span> <span class=text>更新于</span> <time title="修改时间：2024-07-14 12:15:23" itemprop=dateModified datetime=2024-07-14T12:15:23+08:00>2024-07-14</time></span><span class=item data-path=/computer-science/programming/web/react-basic/ title=阅读次数><span class=icon><i class="ic i-eye"></i></span> <span class=text>阅读次数</span><span class=waline-pageview-count></span> <span class=text>次</span></span></div><div id=copyright><ul><li class=author><strong>本文作者：</strong> ReverseSacle <i class="ic i-at"><em>@</em></i>逆转天平</li><li class=link><strong>本文链接：</strong> <a href=https://www.reversesacle.com/computer-science/programming/web/react-basic/ title=React框架基础>https://www.reversesacle.com/computer-science/programming/web/react-basic/</a></li><li class=license><strong>版权声明：</strong> 本站所有文章除特别声明外，均采用 <span class=exturl data-url=aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class=post-nav><div class="item left"><a href=/computer-science/programming/web/anti-scraping-vs-countermeasures/ itemprop=url rel=prev data-background-image=https:&#x2F;&#x2F;resa-imgs.oss-accelerate.aliyuncs.com&#x2F;img&#x2F;acg5.webp title=防爬虫与反防爬虫知识聚合><span class=type>上一篇</span><span class=category><i class="ic i-flag"></i> web</span><h3>防爬虫与反防爬虫知识聚合</h3></a></div><div class="item right"></div></div><div class=wrap id=comments><div id=waline-comment></div></div></div><div id=sidebar><div class=inner><div class=panels><div class=inner><div class="contents panel pjax" data-title=文章目录><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%89%8D%E8%A8%80><span class=toc-number>1.</span> <span class=toc-text>前言</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%A1%86%E6%9E%B6><span class=toc-number>2.</span> <span class=toc-text>创建项目框架</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#jsxjavascript%E4%B8%8Exmlhtml><span class=toc-number>3.</span> <span class=toc-text>JSX(JavaScript与XML(HTML))</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E8%BF%B0><span class=toc-number>3.1.</span> <span class=toc-text>概述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%B8%B2%E6%9F%93%E5%88%97%E8%A1%A8><span class=toc-number>3.2.</span> <span class=toc-text>渲染列表</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93><span class=toc-number>3.3.</span> <span class=toc-text>条件渲染</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C><span class=toc-number>3.4.</span> <span class=toc-text>相关操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A><span class=toc-number>4.</span> <span class=toc-text>事件绑定</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93><span class=toc-number>5.</span> <span class=toc-text>组件渲染</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E8%BF%B0-2><span class=toc-number>5.1.</span> <span class=toc-text>概述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#usestate><span class=toc-number>5.2.</span> <span class=toc-text>useState</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%9F%BA%E7%A1%80%E6%A0%B7%E5%BC%8F><span class=toc-number>5.3.</span> <span class=toc-text>基础样式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#classnames%E4%BC%98%E5%8C%96%E7%B1%BB%E5%90%8D%E6%8E%A7%E5%88%B6><span class=toc-number>6.</span> <span class=toc-text>classnames优化类名控制</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%8F%97%E6%8E%A7%E8%A1%A8%E5%8D%95%E7%BB%91%E5%AE%9A-%E6%8E%A7%E5%88%B6%E8%A1%A8%E5%8D%95%E7%9A%84%E7%8A%B6%E6%80%81><span class=toc-number>7.</span> <span class=toc-text>受控表单绑定-控制表单的状态</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#useref><span class=toc-number>8.</span> <span class=toc-text>useRef</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AD%98%E5%82%A8%E6%8C%81%E4%B9%85%E5%8F%98%E9%87%8F><span class=toc-number>8.1.</span> <span class=toc-text>存储持久变量</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%8E%B7%E5%8F%96dom><span class=toc-number>8.2.</span> <span class=toc-text>获取DOM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1-%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92><span class=toc-number>9.</span> <span class=toc-text>组件通信-组件之间的数据传递</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E7%BB%99%E5%AD%90%E7%BB%84%E4%BB%B6><span class=toc-number>9.1.</span> <span class=toc-text>父组件传递给子组件</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E7%BB%99%E7%88%B6%E7%BB%84%E4%BB%B6><span class=toc-number>9.2.</span> <span class=toc-text>子组件传递给父组件</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1><span class=toc-number>9.3.</span> <span class=toc-text>兄弟组件通信</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BD%BF%E7%94%A8context%E6%9C%BA%E5%88%B6-%E8%B7%A8%E5%B1%82%E7%BA%A7%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1><span class=toc-number>9.4.</span> <span class=toc-text>使用Context机制-跨层级组件通信</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#useeffect><span class=toc-number>10.</span> <span class=toc-text>useEffect</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E8%BF%B0-3><span class=toc-number>10.1.</span> <span class=toc-text>概述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%B8%85%E9%99%A4%E5%89%AF%E4%BD%9C%E7%94%A8%E5%89%AF%E4%BD%9C%E7%94%A8%E6%93%8D%E4%BD%9C><span class=toc-number>10.2.</span> <span class=toc-text>清除副作用(副作用操作)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%87%AA%E5%AE%9A%E4%B9%89hook%E5%87%BD%E6%95%B0><span class=toc-number>11.</span> <span class=toc-text>自定义Hook函数</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A6%82%E8%BF%B0-4><span class=toc-number>11.1.</span> <span class=toc-text>概述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#hooks%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99><span class=toc-number>11.2.</span> <span class=toc-text>Hooks使用规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#reactrouter-%E8%B7%AF%E7%94%B1><span class=toc-number>12.</span> <span class=toc-text>ReactRouter-路由</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE><span class=toc-number>12.1.</span> <span class=toc-text>创建项目</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%8A%BD%E8%B1%A1%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%9D%97><span class=toc-number>12.2.</span> <span class=toc-text>抽象路由模块</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA><span class=toc-number>12.3.</span> <span class=toc-text>路由导航</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA><span class=toc-number>12.3.1.</span> <span class=toc-text>声明式导航</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA><span class=toc-number>12.3.2.</span> <span class=toc-text>编程式导航</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BC%A0%E5%8F%82><span class=toc-number>12.4.</span> <span class=toc-text>传参</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#searchparams%E4%BC%A0%E5%8F%82><span class=toc-number>12.4.1.</span> <span class=toc-text>searchParams传参</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#params%E4%BC%A0%E5%8F%82><span class=toc-number>12.4.2.</span> <span class=toc-text>Params传参</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1><span class=toc-number>12.5.</span> <span class=toc-text>嵌套路由</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%BB%98%E8%AE%A4%E4%BA%8C%E7%BA%A7%E8%B7%AF%E7%94%B1><span class=toc-number>12.6.</span> <span class=toc-text>默认二级路由</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#404%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE><span class=toc-number>12.7.</span> <span class=toc-text>404路由配置</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%B8%A4%E7%A7%8D%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F><span class=toc-number>12.8.</span> <span class=toc-text>两种路由模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%AC%AC%E4%B8%89%E6%96%B9%E4%BE%BF%E6%8D%B7%E5%BC%80%E5%8F%91%E5%8C%85><span class=toc-number>13.</span> <span class=toc-text>第三方便捷开发包</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AE%89%E8%A3%85scss><span class=toc-number>13.1.</span> <span class=toc-text>安装SCSS</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AE%89%E8%A3%85ant-sesign><span class=toc-number>13.2.</span> <span class=toc-text>安装Ant Sesign</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#redux%E5%BA%94%E7%94%A8%E7%8A%B6%E6%80%81%E9%9B%86%E4%B8%AD%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7><span class=toc-number>14.</span> <span class=toc-text>Redux(应用状态集中管理工具)</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#redux%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83><span class=toc-number>14.1.</span> <span class=toc-text>Redux配置环境</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%AE%89%E8%A3%85><span class=toc-number>14.1.1.</span> <span class=toc-text>安装</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84><span class=toc-number>14.1.2.</span> <span class=toc-text>目录结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BD%BF%E7%94%A8react-toolkit%E5%88%9B%E5%BB%BAcounterstore><span class=toc-number>14.2.</span> <span class=toc-text>使用React Toolkit创建counterStore</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%B8%BAreact%E6%B3%A8%E5%85%A5store><span class=toc-number>14.3.</span> <span class=toc-text>为React注入store</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#react%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8store%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE><span class=toc-number>14.4.</span> <span class=toc-text>React组件中使用store中的数据</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#react%E7%BB%84%E4%BB%B6%E4%BF%AE%E6%94%B9store%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE><span class=toc-number>14.5.</span> <span class=toc-text>React组件修改store中的数据</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%8F%90%E4%BA%A4action-%E4%BC%A0%E5%8F%82><span class=toc-number>14.6.</span> <span class=toc-text>提交action-传参</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BC%82%E6%AD%A5%E7%8A%B6%E6%80%81%E6%93%8D%E4%BD%9C><span class=toc-number>14.7.</span> <span class=toc-text>异步状态操作</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#redux%E8%B0%83%E8%AF%95><span class=toc-number>14.8.</span> <span class=toc-text>Redux调试</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title=系列文章><ul><li><a href=/computer-science/programming/web/hcpart1/ rel=bookmark title=HTML与CSS基础知识-第一部分>HTML与CSS基础知识-第一部分</a></li><li><a href=/computer-science/programming/web/hcpart2/ rel=bookmark title=HTML与CSS基础知识-第二部分>HTML与CSS基础知识-第二部分</a></li><li><a href=/computer-science/programming/web/jspart1/ rel=bookmark title=JavaScript基础-第一部分>JavaScript基础-第一部分</a></li><li><a href=/computer-science/programming/web/jspart2/ rel=bookmark title=JavaScript基础-第二部分>JavaScript基础-第二部分</a></li><li><a href=/computer-science/programming/web/nginx/ rel=bookmark title=Nginx基础>Nginx基础</a></li><li><a href=/computer-science/programming/web/json/ rel=bookmark title=轻量级的数据交换格式JSON>轻量级的数据交换格式JSON</a></li><li><a href=/computer-science/programming/web/anti-scraping-vs-countermeasures/ rel=bookmark title=防爬虫与反防爬虫知识聚合>防爬虫与反防爬虫知识聚合</a></li><li class=active><a href=/computer-science/programming/web/react-basic/ rel=bookmark title=React框架基础>React框架基础</a></li></ul></div><div class="overview panel" data-title=站点概览><div class=author itemprop=author itemscope itemtype=http://schema.org/Person><img class=image itemprop=image alt=ReverseSacle data-src=/images/avatar.webp><p class=name itemprop=name>ReverseSacle</p><div class=description itemprop=description>知识书库 & 学习点滴</div></div><nav class=state><div class="item posts"><a href=/archives/ ><span class=count>186</span> <span class=name>文章</span></a></div><div class="item categories"><a href=/categories/ ><span class=count>52</span> <span class=name>分类</span></a></div><div class="item tags"><a href=/tags/ ><span class=count>18</span> <span class=name>标签</span></a></div></nav><div class=social><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1JldmVyc2VTYWNsZQ==" title=https:&#x2F;&#x2F;github.com&#x2F;ReverseSacle><i class="ic i-github"></i></span><span class="exturl item email" data-url="bWFpbHRvOnByaXZhdGVAcmV2ZXJzZXNhY2xlLmNvbQ==" title=mailto:private@reversesacle.com><i class="ic i-envelope"></i></span></div><ul class=menu><li class=item><a href=/ rel=section><i class="ic i-home"></i> 首页</a></li><li class="item dropdown"><a href=javascript:void(0);><i class="ic i-feather"></i> 文章</a><ul class=submenu><li class=item><a href=/archives/ rel=section><i class="ic i-list-alt"></i> 归档</a></li><li class=item><a href=/categories/ rel=section><i class="ic i-th"></i> 分类</a></li><li class=item><a href=/tags/ rel=section><i class="ic i-tags"></i> 标签</a></li></ul></li><li class=item><a href=/about/ rel=section><i class="ic i-user"></i> 关于</a></li><li class=item><a href=/friend-links/ rel=section><i class="ic i-heart"></i> 友链</a></li></ul></div></div></div><ul id=quick><li class="prev pjax"></li><li class=up><i class="ic i-arrow-up"></i></li><li class=down><i class="ic i-arrow-down"></i></li><li class="next pjax"></li><li class=percent></li></ul></div></div><div class=dimmer></div></div></main><footer id=footer><div class=inner><div class=widgets><div class="rpost pjax"><h2>随机文章</h2><ul><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/c-basic/ title="分类于 C语言基础">C语言基础</a></div><span><a href=/computer-science/programming/c-language/basis/c/cpart1/ title=C语言基础-第一部分-C89&#x2F;C90标准>C语言基础-第一部分-C89/C90标准</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/ title="分类于 C语言">C语言</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/c-language/string/ title="分类于 字符串">字符串</a></div><span><a href=/computer-science/programming/c-language/c-algorithm/string/nums/ title=字符串-数理>字符串-数理</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/reverse-engineering/ title="分类于 逆向工程">逆向工程</a></div><span><a href=/computer-science/programming/reverse-engineering/cheatengine/ title=CheatEngine基础>CheatEngine基础</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/database/ title="分类于 数据库">数据库</a></div><span><a href=/computer-science/programming/database/sql/ title=关系数据库标准语言SQL>关系数据库标准语言SQL</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/rust/ title="分类于 Rust">Rust</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/rust/rust-basic/ title="分类于 Rust基础">Rust基础</a></div><span><a href=/computer-science/programming/rust/rust-basic/rustpart2/ title=Rust语言-基础-第二部分>Rust语言-基础-第二部分</a></span></li><li class=item><div class=breadcrumb><a href=/categories/general-science-and-technology/ title="分类于 通用科学技术">通用科学技术</a><i class="ic i-angle-right"></i> <a href=/categories/general-science-and-technology/pc/ title="分类于 通用技术之PC端">通用技术之PC端</a><i class="ic i-angle-right"></i> <a href=/categories/general-science-and-technology/pc/external-device/ title="分类于 外接设备">外接设备</a></div><span><a href=/general-science-and-technology/pc/external-device/external-screen-guidance/ title=外接显示屏DIY指南>外接显示屏DIY指南</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/rust/ title="分类于 Rust">Rust</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/rust/rust-basic/ title="分类于 Rust基础">Rust基础</a></div><span><a href=/computer-science/programming/rust/rust-basic/rustpart3/ title=Rust语言-基础-第三部分>Rust语言-基础-第三部分</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/ title="分类于 编程">编程</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/programming/database/ title="分类于 数据库">数据库</a></div><span><a href=/computer-science/programming/database/theory/ title=数据库基础理论>数据库基础理论</a></span></li><li class=item><div class=breadcrumb><a href=/categories/computer-science/ title="分类于 计算机科学">计算机科学</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/computer-basic/ title="分类于 计算机基础">计算机基础</a><i class="ic i-angle-right"></i> <a href=/categories/computer-science/computer-basic/computer-network/ title="分类于 计算机网络">计算机网络</a></div><span><a href=/computer-science/computer-basic/network/nwpart3/ title=计算机网络-第三部分>计算机网络-第三部分</a></span></li><li class=item><div class=breadcrumb><a href=/categories/potpourri/ title="分类于 百味">百味</a><i class="ic i-angle-right"></i> <a href=/categories/potpourri/foreign-language/ title="分类于 外语">外语</a></div><span><a href=/potpourri/foreign-language/advanced-learning/ title=英语进阶学习材料>英语进阶学习材料</a></span></li></ul></div><div><h2>最新评论</h2><ul id=waline-recent></ul></div></div><div class=status><div class=copyright>&copy; 2021 – <span itemprop=copyrightYear>2025</span><span class=with-love><i class="ic i-sakura rotate"></i></span> <span class=author itemprop=copyrightHolder>ReverseSacle @ ReverseSacle-Blog</span></div><div class=count><i class="ic i-clock" aria-hidden=true></i> <span id=time align=center>载入时间中...<script defer>var now=new Date;function createtime(){var n=new Date("2021-11-16 22:30:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("time").innerHTML="已经过 "+dnum+" 天 "+hnum+" 小时 "+mnum+" 分 "+snum+" 秒 "}setInterval("createtime()",250)</script></span><span class=post-meta-item-icon>|&nbsp<i class="ic i-chart-area"></i></span> <span title=站点总字数>2.1m 字</span> <span class=post-meta-item-icon>|&nbsp<i class="ic i-coffee"></i></span> <span title=站点阅读时长>40:40</span></div></div></div></footer></div><script data-config>var LOCAL={path:"computer-science/programming/web/react-basic/",favicon:{show:"ReverseSacle-Blog",hide:"ReverseSacle-Blog"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},waline:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src=https://polyfill.alicdn.com/v3/polyfill.min.js></script><script src=https://cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1.16.0/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js></script><script src=/js/app.js></script></body></html>