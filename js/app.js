var CONFIG={version:"0.3.4",hostname:"https://www.reversesacle.com",root:"/",statics:"/",inner_proxy:"/",plugin_proxy:"https://jd.reversesacle.com",favicon:{normal:"images/favicon.ico",hidden:"images/failure.ico"},darkmode:!1,auto_scroll:!1,js:{waline:"npm/@waline/client@3/dist/waline.umd.min.js",chart:"npm/frappe-charts@1.5.0/dist/frappe-charts.min.iife.min.js",copy_tex:"npm/katex@0.12.0/dist/contrib/copy-tex.min.js",fancybox:"combine/npm/jquery@3.5.1/dist/jquery.min.js,npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js,npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"},css:{waline_crop:"css/comment.css",waline:"combine/npm/@waline/client@3/dist/waline.min.css,npm/@waline/client@3/dist/waline-meta.min.css",katex:"npm/katex@0.12.0/dist/katex.min.css",fancybox:"combine/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css,npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"},loader:{start:!0,switch:!1},search:{appID:"YNRLAAETIC",apiKey:"0db77b6334e19c600b99863a6037a07e",indexName:"blog_index",hits:{per_page:10}},waline:{serverURL:"https://cmt.reversesacle.com",comment:!0,pageview:!0,lang:"zh-CN",dark:"auto",commentSorting:"latest",login:"disable",wordLimit:0,pageSize:8,imageUploader:!1,highlighter:!1,texRenderer:!1,search:!1,noCopyright:!0,recaptchaV3Key:!1,turnstileKey:!1,reaction:!1,meta:["nick","mail","link"],requiredMeta:["nick","mail"],locale:{placeholder:"1.请遵守评论礼仪o(*￣▽￣*)o \n2.可前往Gravatar自行注册邮箱,并添加个性头像,有七天缓冲时间"},emoji:[]},quicklink:{timeout:3e3,priority:!0}};const getRndInteger=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},getDocHeight=function(){return $("main > .inner").offsetHeight},getScript=function(e,t,n){if(n)t();else{var a=document.createElement("script");a.onload=a.onreadystatechange=function(e,n){(n||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,a=void 0,!n&&t&&setTimeout(t,0))},a.src=e,document.head.appendChild(a)}},assetUrl=function(e,t){const n=CONFIG[e][t];if(n.startsWith("http"))return n;if(n.startsWith("npm")||n.startsWith("gh")||n.startsWith("combine")){const e=CONFIG.plugin_proxy;return"/"!=e?e+"/"+n:"https://cdn.jsdelivr.net/"+n}return CONFIG.statics+n},vendorJs=function(e,t,n){LOCAL[e]&&getScript(assetUrl("js",e),t||function(){window[e]=!0},n||window[e])},vendorCss=function(e,t){window["css"+e]||LOCAL[e]&&(document.head.createChild("link",{rel:"stylesheet",href:assetUrl("css",e)}),window["css"+e]=!0)},vendorCss_body=function(e){var t="css-"+e;null==document.querySelector("body link."+t)&&document.body.createChild("link",{rel:"stylesheet",href:assetUrl("css",e)}).setAttribute("class",t)},pjaxScript=function(e){const t=e.text||e.textContent||e.innerHTML||"";var n=e.parentNode;n.removeChild(e);var a=document.createElement("script");e.id&&(a.id=e.id),e.className&&(a.className=e.className),e.type&&(a.type=e.type),e.src&&(a.src=e.src,a.async=!1),void 0!==e.dataset.pjax&&(a.dataset.pjax=""),""!==t&&a.appendChild(document.createTextNode(t)),n.appendChild(a)},pageScroll=function(e,t,n){const a={targets:"number"==typeof t?e.parentNode:document.scrollingElement,duration:500,easing:"easeInOutQuad",scrollTop:t||("number"==typeof e?e:e?e.top()+document.documentElement.scrollTop-siteNavHeight:0),complete:function(){n&&n()}};anime(a)},transition=function(e,t,n){var a={},i="none";switch(t){case 0:a={opacity:[1,0]};break;case 1:a={opacity:[0,1]},i="block";break;case"bounceUpIn":a={begin:function(t){e.display("block")},translateY:[{value:-60,duration:200},{value:10,duration:200},{value:-5,duration:200},{value:0,duration:200}],opacity:[0,1]},i="block";break;case"shrinkIn":a={begin:function(t){e.display("block")},scale:[{value:1.1,duration:300},{value:1,duration:200}],opacity:1},i="block";break;case"slideRightIn":a={begin:function(t){e.display("block")},translateX:[100,0],opacity:[0,1]},i="block";break;case"slideRightOut":a={translateX:[0,100],opacity:[1,0]};break;default:a=t,i=t.display}anime(Object.assign({targets:e,duration:200,easing:"linear"},a)).finished.then((function(){e.display(i),n&&n()}))},store={get:function(e){return localStorage.getItem(e)},set:function(e,t){return localStorage.setItem(e,t),t},del:function(e){localStorage.removeItem(e)}},$=function(e,t){return t=t||document,0===e.indexOf("#")?t.getElementById(e.replace("#","")):t.querySelector(e)};$.all=function(e,t){return(t=t||document).querySelectorAll(e)},$.each=function(e,t,n){return $.all(e,n).forEach(t)},Object.assign(HTMLElement.prototype,{createChild:function(e,t,n){var a=document.createElement(e);switch(Object.assign(a,t),n){case"after":this.insertAfter(a);break;case"replace":this.innerHTML="";default:this.appendChild(a)}return a},wrap:function(e){var t=document.createElement("div");Object.assign(t,e),this.parentNode.insertBefore(t,this),this.parentNode.removeChild(this),t.appendChild(this)},height:function(e){return e&&(this.style.height="number"==typeof e?e+"rem":e),this.getBoundingClientRect().height},width:function(e){return e&&(this.style.width="number"==typeof e?e+"rem":e),this.getBoundingClientRect().width},top:function(){return this.getBoundingClientRect().top},left:function(){return this.getBoundingClientRect().left},attr:function(e,t){return null===t?this.removeAttribute(e):t?(this.setAttribute(e,t),this):this.getAttribute(e)},insertAfter:function(e){var t=this.parentNode;t.lastChild==this?t.appendChild(e):t.insertBefore(e,this.nextSibling)},display:function(e){return null==e?this.style.display:(this.style.display=e,this)},child:function(e){return $(e,this)},find:function(e){return $.all(e,this)},_class:function(e,t,n){var a=t.indexOf(" ")?t.split(" "):[t],i=this;a.forEach((function(t){"toggle"==e?i.classList.toggle(t,n):i.classList[e](t)}))},addClass:function(e){return this._class("add",e),this},removeClass:function(e){return this._class("remove",e),this},toggleClass:function(e,t){return this._class("toggle",e,t),this},hasClass:function(e){return this.classList.contains(e)}});var originTitle,titleTime,statics=CONFIG.statics.indexOf("//")>0?CONFIG.statics:CONFIG.root,proxy=CONFIG.inner_proxy.indexOf("//")>0?CONFIG.inner_proxy:CONFIG.root,scrollAction={x:"undefined",y:"undefined"},diffY=0;const BODY=document.body,HTML=document.documentElement,Container=$("#container"),loadCat=$("#loading"),siteNav=$("#nav"),siteHeader=$("#header"),menuToggle=siteNav.child(".toggle"),quickBtn=$("#quick"),sideBar=$("#sidebar"),siteBrand=$("#brand");var backToTop,goToComment,showContents,siteNavHeight,headerHightInner,headerHight,pjax,toolBtn=$("#tool"),siteSearch=$("#search"),oWinHeight=window.innerHeight,oWinWidth=window.innerWidth,LOCAL_HASH=0,LOCAL_URL=window.location.href;const lazyload=lozad("img, [data-background-image]",{loaded:function(e){e.addClass("lozaded")}}),Loader={timer:null,lock:!1,show:function(){clearTimeout(this.timer),document.body.removeClass("loaded"),loadCat.attr("style","display:block"),Loader.lock=!1},hide:function(e){CONFIG.loader.start||(e=-1),this.timer=setTimeout(this.vanish,e||3e3)},vanish:function(){Loader.lock||(CONFIG.loader.start&&transition(loadCat,0),document.body.addClass("loaded"),Loader.lock=!0)}},changeTheme=function(e){var t=$(".theme .ic");"dark"==e?(HTML.attr("data-theme",e),t.removeClass("i-sun"),t.addClass("i-moon")):(HTML.attr("data-theme",null),t.removeClass("i-moon"),t.addClass("i-sun"))},changeMetaTheme=function(e){"dark"==HTML.attr("data-theme")&&(e="#222"),$('meta[name="theme-color"]').attr("content",e)},themeColorListener=function(){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=function(e){e.matches?changeTheme("dark"):changeTheme()};try{e.addEventListener("change",t)}catch(n){e.addListener(t)}var n=store.get("theme");n?changeTheme(n):CONFIG.darkmode&&changeTheme("dark"),$(".theme").addEventListener("click",(function(e){var t=e.currentTarget.child(".ic"),n=BODY.createChild("div",{id:"neko",innerHTML:'<div class="planet"><div class="sun"></div><div class="moon"></div></div><div class="body"><div class="face"><section class="eyes left"><span class="pupil"></span></section><section class="eyes right"><span class="pupil"></span></section><span class="nose"></span></div></div>'}),a=function(){transition(n,{delay:2500,opacity:0},(function(){BODY.removeChild(n)}))};if(t.hasClass("i-sun"))var i=function(){n.addClass("dark"),changeTheme("dark"),store.set("theme","dark"),a()};else{n.addClass("dark");i=function(){n.removeClass("dark"),changeTheme(),store.set("theme","light"),a()}}transition(n,1,(function(){setTimeout(i,210)}))}))},visibilityListener=function(){document.addEventListener("visibilitychange",(function(){switch(document.visibilityState){case"hidden":$('[rel="icon"]').attr("href",proxy+CONFIG.favicon.hidden),document.title=LOCAL.favicon.hide,CONFIG.loader.switch&&Loader.show(),clearTimeout(titleTime);break;case"visible":$('[rel="icon"]').attr("href",proxy+CONFIG.favicon.normal),document.title=LOCAL.favicon.show,CONFIG.loader.switch&&Loader.hide(1e3),titleTime=setTimeout((function(){document.title=originTitle}),2e3)}}))},showtip=function(e){if(e){var t=BODY.createChild("div",{innerHTML:e,className:"tip"});setTimeout((function(){t.addClass("hide"),setTimeout((function(){BODY.removeChild(t)}),300)}),3e3)}},resizeHandle=function(e){siteNavHeight=siteNav.height(),headerHightInner=siteHeader.height(),headerHight=headerHightInner+$("#waves").height(),oWinWidth!=window.innerWidth&&sideBarToggleHandle(null,1),oWinHeight=window.innerHeight,oWinWidth=window.innerWidth,sideBar.child(".panels").height(oWinHeight+"px")},scrollHandle=function(e){var t=window.innerHeight,n=getDocHeight(),a=n>t?n-t:document.body.scrollHeight-t,i=window.scrollY>headerHightInner,s=window.scrollY>0;changeMetaTheme(i?"#FFF":"#222"),siteNav.toggleClass("show",i),toolBtn.toggleClass("affix",s),siteBrand.toggleClass("affix",s),sideBar.toggleClass("affix",window.scrollY>headerHight&&document.body.offsetWidth>991),void 0===scrollAction.y&&(scrollAction.y=window.scrollY),(diffY=scrollAction.y-window.scrollY)<0?(siteNav.removeClass("up"),siteNav.toggleClass("down",i)):diffY>0&&(siteNav.removeClass("down"),siteNav.toggleClass("up",i)),scrollAction.y=window.scrollY;var o=Math.round(Math.min(100*window.scrollY/a,100))+"%";backToTop.child("span").innerText=o,$(".percent").width(o)},pagePosition=function(){CONFIG.auto_scroll&&store.set(LOCAL_URL,scrollAction.y)},positionInit=function(e){var t=window.location.hash,n=null;LOCAL_HASH?store.del(LOCAL_URL):((n=t?$(decodeURI(t)):CONFIG.auto_scroll?parseInt(store.get(LOCAL_URL)):0)&&(pageScroll(n),LOCAL_HASH=1),e&&t&&!LOCAL_HASH&&(pageScroll(n),LOCAL_HASH=1))},clipBoard=function(e,t){var n=BODY.createChild("textarea",{style:{top:window.scrollY+"px",position:"absolute",opacity:"0"},readOnly:!0,value:e});const a=document.getSelection(),i=a.rangeCount>0&&a.getRangeAt(0);n.select(),n.setSelectionRange(0,e.length),n.readOnly=!1;var s=document.execCommand("copy");t&&t(s),n.blur(),i&&(a.removeAllRanges(),a.addRange(i)),BODY.removeChild(n)},sideBarToggleHandle=function(e,t){sideBar.hasClass("on")?(sideBar.removeClass("on"),menuToggle.removeClass("close"),t?sideBar.style="":transition(sideBar,"slideRightOut")):t?sideBar.style="":transition(sideBar,"slideRightIn",(function(){sideBar.addClass("on"),menuToggle.addClass("close")}))},sideBarTab=function(){var e=sideBar.child(".inner");sideBar.find(".panel");sideBar.child(".tab")&&e.removeChild(sideBar.child(".tab"));var t=document.createElement("ul"),n="active";t.className="tab",["contents","related","overview"].forEach((function(e){var a=sideBar.child(".panel."+e);if(a.innerHTML.replace(/(^\s*)|(\s*$)/g,"").length<1)"contents"==e&&showContents.display("none");else{"contents"==e&&showContents.display("");var i=document.createElement("li"),s=document.createElement("span"),o=document.createTextNode(a.attr("data-title"));s.appendChild(o),i.appendChild(s),i.addClass(e+" item"),n?(a.addClass(n),i.addClass(n)):a.removeClass("active"),i.addEventListener("click",(function(e){var t=e.currentTarget;t.hasClass("active")||(sideBar.find(".tab .item").forEach((function(e){e.removeClass("active")})),sideBar.find(".panel").forEach((function(e){e.removeClass("active")})),sideBar.child(".panel."+t.className.replace(" item","")).addClass("active"),t.addClass("active"))})),t.appendChild(i),n=""}})),t.childNodes.length>1?(e.insertBefore(t,e.childNodes[0]),sideBar.child(".panels").style.paddingTop=""):sideBar.child(".panels").style.paddingTop=".625rem"},sidebarTOC=function(){var e=$.all(".contents li");if(!(e.length<1)){var t=Array.prototype.slice.call(e)||[],n=null;t=t.map((function(e,t){var a=e.child("a.toc-link"),s=$(decodeURI(a.attr("href")));if(s){var o=s.child("a.anchor"),r=function(e){e.preventDefault();var a=$(decodeURI(e.currentTarget.attr("href")));n=t,pageScroll(a,null,(function(){i(t),n=null}))};return a.addEventListener("click",r),o&&o.addEventListener("click",(function(e){r(e),clipBoard(CONFIG.hostname+"/"+LOCAL.path+e.currentTarget.attr("href"))})),s}}));var a=sideBar.child(".contents.panel"),i=function(n,i){var s=e[n];if(s&&!s.hasClass("current")){$.each(".toc .active",(function(e){e&&e.removeClass("active current")})),t.forEach((function(e){e&&e.removeClass("active")})),s.addClass("active current"),t[n]&&t[n].addClass("active");for(var o=s.parentNode;!o.matches(".contents");){if(o.matches("li")){o.addClass("active");var r=$(o.child("a.toc-link").attr("href"));r&&r.addClass("active")}o=o.parentNode}"none"!=getComputedStyle(sideBar).display&&a.hasClass("active")&&pageScroll(a,s.offsetTop-a.offsetHeight/4)}};!function(){if(window.IntersectionObserver){var e=new IntersectionObserver((function(e,a){var s=function(e){var n=0,a=e[n];if(a.boundingClientRect.top>0)return 0===(n=t.indexOf(a.target))?0:n-1;for(;n<e.length;n++){if(!(e[n].boundingClientRect.top<=0))return t.indexOf(a.target);a=e[n]}return t.indexOf(a.target)}(e)+(diffY<0?1:0);null===n&&i(s)}),{rootMargin:"0px 0px -100% 0px",threshold:0});t.forEach((function(t){t&&e.observe(t)}))}}()}},backToTopHandle=function(){pageScroll(0)},goToBottomHandle=function(){pageScroll(parseInt(Container.height()))},goToCommentHandle=function(){pageScroll($("#comments"))},menuActive=function(){$.each(".menu .item:not(.title)",(function(e){var t=e.child("a[href]"),n=e.parentNode.parentNode;if(t){var a=t.pathname===location.pathname||t.pathname===location.pathname.replace("index.html",""),i=!CONFIG.root.startsWith(t.pathname)&&location.pathname.startsWith(t.pathname),s=t.hostname===location.hostname&&(a||i);e.toggleClass("active",s),e.parentNode.child(".active")&&n.hasClass("dropdown")?n.removeClass("active").addClass("expand"):n.removeClass("expand")}}))},cardActive=function(){if($(".index.wrap")){if(window.IntersectionObserver){var e=new IntersectionObserver((function(t){t.forEach((function(t){t.target.hasClass("show")?e.unobserve(t.target):(t.isIntersecting||t.intersectionRatio>0)&&(t.target.addClass("show"),e.unobserve(t.target))}))}),{root:null,threshold:[.3]});$.each(".index.wrap article.item, .index.wrap section.item",(function(t){e.observe(t)})),$(".index.wrap .item:first-child").addClass("show")}else $.each(".index.wrap article.item, .index.wrap section.item",(function(e){!1===e.hasClass("show")&&e.addClass("show")}));$.each(".cards .item",(function(e,t){["mouseenter","touchstart"].forEach((function(t){e.addEventListener(t,(function(t){$(".cards .item.active")&&$(".cards .item.active").removeClass("active"),e.addClass("active")}))})),["mouseleave"].forEach((function(t){e.addEventListener(t,(function(t){e.removeClass("active")}))}))}))}},registerExtURL=function(){$.each("span.exturl",(function(e){var t=document.createElement("a");t.href=decodeURIComponent(atob(e.dataset.url).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")),t.rel="noopener external nofollow noreferrer",t.target="_blank",t.className=e.className,t.title=e.title||e.innerText,t.innerHTML=e.innerHTML,e.dataset.backgroundImage&&(t.dataset.backgroundImage=e.dataset.backgroundImage),e.parentNode.replaceChild(t,e)}))},postFancybox=function(e){$(e+" .md img")&&(vendorCss("fancybox"),vendorJs("fancybox",(function(){var t=jQuery.noConflict();$.each(e+" p.gallery",(function(e){var t=document.createElement("div");t.className="gallery",t.attr("data-height",e.attr("data-height")||220),t.innerHTML=e.innerHTML.replace(/<br>/g,""),e.parentNode.insertBefore(t,e),e.remove()})),$.each(e+" .md img:not(.emoji):not(.vemoji)",(function(e){var n,a=t(e),i="image-info";if(!a.is("a img")){var s=a.attr("data-src")||a.attr("src");a.data("safe-src",s);var o=a.wrap('<a class="fancybox" href="'+s+'" itemscope itemtype="http://schema.org/ImageObject" itemprop="url"></a>').parent("a");a.is(".gallery img")?i="jg-caption":o.attr("data-fancybox","default").attr("rel","default")}if(n=e.attr("title")){o.attr("data-caption",n);var r=document.createElement("span"),c=document.createTextNode(n);r.appendChild(c),r.addClass(i),e.insertAfter(r)}})),$.each(e+" div.gallery",(function(e,n){t(e).justifiedGallery({rowHeight:t(e).data("height")||120,rel:"gallery-"+n}).on("jg.complete",(function(){t(this).find("a").each((function(e,t){t.attr("data-fancybox","gallery-"+n)}))}))})),t.fancybox.defaults.hash=!1,t(e+" .fancybox").fancybox({loop:!0,helpers:{overlay:{locked:!1}}})}),window.jQuery))},postBeauty=function(){loadComments(),$(".md")&&(postFancybox(".post.block"),$(".post.block").oncopy=function(e){if(showtip(LOCAL.copyright),LOCAL.nocopy)e.preventDefault();else{var t=$("#copyright");if(window.getSelection().toString().length>250&&t){e.preventDefault();var n="# "+t.child(".author").innerText,a="# "+t.child(".link").innerText,i="# "+t.child(".license").innerText,s=n+"<br>"+a+"<br>"+i+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>"),o=n+"\n"+a+"\n"+i+"\n\n"+window.getSelection().toString().replace(/\r\n/g,"\n");if(e.clipboardData)e.clipboardData.setData("text/html",s),e.clipboardData.setData("text/plain",o);else if(window.clipboardData)return window.clipboardData.setData("text",o)}}},$.each("li ruby",(function(e){var t=e.parentNode;"LI"!=e.parentNode.tagName&&(t=e.parentNode.parentNode),t.addClass("ruby")})),$.each("ol[start]",(function(e){e.style.counterReset="counter "+parseInt(e.attr("start")-1)})),$.each(".md table",(function(e){e.wrap({className:"table-container"})})),$.each(".highlight > .table-container",(function(e){e.className="code-container"})),$.each("figure.highlight",(function(e){var t=e.child(".code-container"),n=e.child("figcaption");e.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>');var a=e.child(".copy-btn");LOCAL.nocopy?a.remove():(a.addEventListener("click",(function(e){var n=e.currentTarget,a="",i="";t.find("pre").forEach((function(e){i+=a+e.innerText,a="\n"})),clipBoard(i,(function(e){n.child(".ic").className=e?"ic i-check":"ic i-times",n.blur(),showtip(LOCAL.copyright)}))})),a.addEventListener("mouseleave",(function(e){setTimeout((function(){e.target.child(".ic").className="ic i-clipboard"}),1e3)}))),e.child(".breakline-btn").addEventListener("click",(function(t){var n=t.currentTarget;e.hasClass("breakline")?(e.removeClass("breakline"),n.child(".ic").className="ic i-align-left"):(e.addClass("breakline"),n.child(".ic").className="ic i-align-justify")}));var i=e.child(".fullscreen-btn"),s=function(){e.removeClass("fullscreen"),e.scrollTop=0,BODY.removeClass("fullscreen"),i.child(".ic").className="ic i-expand"},o=function(t){t.currentTarget;e.hasClass("fullscreen")?(s(),l&&l(),pageScroll(e)):(e.addClass("fullscreen"),BODY.addClass("fullscreen"),i.child(".ic").className="ic i-compress",c&&c())};if(i.addEventListener("click",o),n&&n.addEventListener("click",o),t&&t.find("tr").length>15){t.style.maxHeight="300px",t.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>');var r=t.child(".show-btn"),c=function(){t.style.maxHeight="",r.addClass("open")},l=function(){t.style.maxHeight="300px",r.removeClass("open")};r.addEventListener("click",(function(e){r.hasClass("open")?(s(),l(),pageScroll(t)):c()}))}})),$.each(".reward button",(function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=$("#qr");"inline-flex"===t.display()?transition(t,0):transition(t,1,(function(){t.display("inline-flex")}))}))})),$.each(".quiz > ul.options li",(function(e){e.addEventListener("click",(function(t){e.hasClass("correct")?(e.toggleClass("right"),e.parentNode.parentNode.addClass("show")):e.toggleClass("wrong")}))})),$.each(".quiz > p",(function(e){e.addEventListener("click",(function(t){e.parentNode.toggleClass("show")}))})),$.each(".quiz > p:first-child",(function(e){var t=e.parentNode,n="choice";(t.hasClass("true")||t.hasClass("false"))&&(n="true_false"),t.hasClass("multi")&&(n="multiple"),t.hasClass("fill")&&(n="gap_fill"),t.hasClass("essay")&&(n="essay"),e.attr("data-type",LOCAL.quiz[n])})),$.each(".quiz .mistake",(function(e){e.attr("data-type",LOCAL.quiz.mistake)})),$.each("div.tags a",(function(e){e.className=["primary","success","info","warning","danger"][Math.floor(5*Math.random())]})))},tabFormat=function(){var e;$.each("div.tab",(function(t,n){if(!t.attr("data-ready")){var a=t.attr("data-id"),i=t.attr("data-title"),s=$("#"+a);if(s)e=!1;else(s=document.createElement("div")).className="tabs",s.id=a,s.innerHTML='<div class="show-btn"></div>',s.child(".show-btn").addEventListener("click",(function(e){pageScroll(s)})),t.parentNode.insertBefore(s,t),e=!0;var o=s.child(".nav ul");o||(o=s.createChild("div",{className:"nav",innerHTML:"<ul></ul>"}).child("ul"));var r=o.createChild("li",{innerHTML:i});e&&(r.addClass("active"),t.addClass("active")),r.addEventListener("click",(function(e){var n=e.currentTarget;s.find(".active").forEach((function(e){e.removeClass("active")})),t.addClass("active"),n.addClass("active")})),s.appendChild(t),t.attr("data-ready",!0)}}))},loadComments=function(){var e=$("#comments");e?(goToComment.display(""),window.IntersectionObserver?new IntersectionObserver((function(e,t){var n=e[0];vendorCss_body("waline_crop"),(n.isIntersecting||n.intersectionRatio>0)&&(transition($("#comments"),"bounceUpIn"),t.disconnect())})).observe(e):vendorCss_body("waline_crop")):goToComment.display("none")},algoliaSearch=function(e){if(null===CONFIG.search)return;siteSearch||(siteSearch=BODY.createChild("div",{id:"search",innerHTML:'<div class="inner"><div class="header"><span class="icon"><i class="ic i-search"></i></span><div class="search-input-container"></div><span class="close-btn"><i class="ic i-times-circle"></i></span></div><div class="results"><div class="inner"><div id="search-stats"></div><div id="search-hits"></div><div id="search-pagination"></div></div></div></div>'}));var t=instantsearch({indexName:CONFIG.search.indexName,searchClient:algoliasearch(CONFIG.search.appID,CONFIG.search.apiKey),searchFunction:function(e){$(".search-input").value&&e.search()}});t.on("render",(function(){e.refresh($("#search-hits"))})),t.addWidgets([instantsearch.widgets.configure({hitsPerPage:CONFIG.search.hits.per_page||10}),instantsearch.widgets.searchBox({container:".search-input-container",placeholder:LOCAL.search.placeholder,showReset:!1,showSubmit:!1,showLoadingIndicator:!1,cssClasses:{input:"search-input"}}),instantsearch.widgets.stats({container:"#search-stats",templates:{text:function(e){return LOCAL.search.stats.replace(/\$\{hits}/,e.nbHits).replace(/\$\{time}/,e.processingTimeMS)+'<span class="algolia-powered"></span><hr>'}}}),instantsearch.widgets.hits({container:"#search-hits",templates:{item:function(e){var t=e.categories?"<span>"+e.categories.join('<i class="ic i-angle-right"></i>')+"</span>":"";return'<a href="'+CONFIG.root+e.path+'">'+t+e._highlightResult.title.value+"</a>"},empty:function(e){return'<div id="hits-empty">'+LOCAL.search.empty.replace(/\$\{query}/,e.query)+"</div>"}},cssClasses:{item:"item"}}),instantsearch.widgets.pagination({container:"#search-pagination",scrollTo:!1,showFirst:!1,showLast:!1,templates:{first:'<i class="ic i-angle-double-left"></i>',last:'<i class="ic i-angle-double-right"></i>',previous:'<i class="ic i-angle-left"></i>',next:'<i class="ic i-angle-right"></i>'},cssClasses:{root:"pagination",item:"pagination-item",link:"page-number",selectedItem:"current",disabledItem:"disabled-item"}})]),t.start(),$.each(".search",(function(e){e.addEventListener("click",(function(){document.body.style.overflow="hidden",transition(siteSearch,"shrinkIn",(function(){$(".search-input").focus()}))}))}));const n=function(){document.body.style.overflow="",transition(siteSearch,0)};siteSearch.addEventListener("click",(function(e){e.target===siteSearch&&n()})),$(".close-btn").addEventListener("click",n),window.addEventListener("pjax:success",n),window.addEventListener("keyup",(function(e){"Escape"===e.key&&n()}))},domInit=function(){$.each(".overview .menu > .item",(function(e){siteNav.child(".menu").appendChild(e.cloneNode(!0))})),loadCat.addEventListener("click",Loader.vanish),menuToggle.addEventListener("click",sideBarToggleHandle),$(".dimmer").addEventListener("click",sideBarToggleHandle),quickBtn.child(".down").addEventListener("click",goToBottomHandle),quickBtn.child(".up").addEventListener("click",backToTopHandle),toolBtn||(toolBtn=siteHeader.createChild("div",{id:"tool",innerHTML:'<div class="item contents"><i class="ic i-list-ol"></i></div><div class="item chat"><i class="ic i-comments"></i></div><div class="item back-to-top"><i class="ic i-arrow-up"></i><span>0%</span></div>'})),backToTop=toolBtn.child(".back-to-top"),goToComment=toolBtn.child(".chat"),showContents=toolBtn.child(".contents"),backToTop.addEventListener("click",backToTopHandle),goToComment.addEventListener("click",goToCommentHandle),showContents.addEventListener("click",sideBarToggleHandle)},pjaxReload=function(){pagePosition(),sideBar.hasClass("on")&&transition(sideBar,(function(){sideBar.removeClass("on"),menuToggle.removeClass("close")})),$("#main").innerHTML="",$("#main").appendChild(loadCat.lastChild.cloneNode(!0)),pageScroll(0)},recent_comment_create=function(e){var t=$("#waline-recent");if(t.hasChildNodes()){var n=t.parentNode;n.removeChild(t),n.appendChild(t.cloneNode(!1))}var a=e.length;if(0!=a){var i=function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return n+"-"+(a=a<10?"0"+a:a)+"-"+(i=i<10?"0"+i:i)},s=function(e){for(var t="",n=(e=e.replace(/\n/g,"")).length,a=["r","g","t","j","f","i","v","y","x","z",",",".","!",";",":",'"',"(",")","-"," "],i=/[a-z]/,s=/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/,o=/[A-Z]/,r=0,c=0;r<n;)if("<"!=e[r]){if(c>=100){r<n&&(t+="...");break}var l=e[r++];l in a?c+=1:i.test(l)||s.test(l)?c+=2:o.test(l)?c+=2.5:c+=3.5,t+=l}else for(;r<n&&">"!=e[r++];);return t},o=0,r=document.createElement("li");r.setAttribute("class","item");var c=document.createElement("a");c.setAttribute("href",e[o].url),c.setAttribute("data-pjax-state","");var l=document.createElement("span");l.style.marginBottom="-5.3px",l.innerText=e[o].nick+" @ "+i(e[o].time);var d=document.createElement("span");for(d.innerText=s(e[o].comment),t=$("#waline-recent"),c.appendChild(l),c.appendChild(d),r.appendChild(c),t.append(r),++o;o<a;++o){var h=r.cloneNode(!1),u=c.cloneNode(!1);u.setAttribute("href",e[o].url);var p=l.cloneNode(!1);p.innerText=e[o].nick+" @ "+i(e[o].time);var m=d.cloneNode(!1);m.innerText=s(e[o].comment),u.appendChild(p),u.appendChild(m),h.appendChild(u),t.append(h)}}},waline_create=function(){if(CONFIG.waline.serverURL){!function(e){var t=document.querySelector("body script.script-waline");t&&document.body.removeChild(t);var n=document.createElement("script");n.defer=!0,n.crossOrigin="anonymous",n.setAttribute("class","script-waline"),Object.keys(e).forEach((function(t){n[t]=e[t]})),document.body.appendChild(n)}({src:assetUrl("js","waline"),onload:function(){var e=Object.assign({},CONFIG.waline);e=Object.assign(e,LOCAL.waline||{}),Waline.RecentComments({serverURL:e.serverURL,count:10}).then((({comments:e})=>{recent_comment_create(e.data)})),$("#waline-comment")&&(e.el="#waline-comment",Waline.init(e),setTimeout((function(){positionInit(1),postFancybox("#waline-comment")}),1e3))}})}},siteRefresh=function(e){LOCAL_HASH=0,LOCAL_URL=window.location.href,vendorCss("katex"),vendorJs("copy_tex"),vendorJs("chart"),e||$.each("script[data-pjax]",pjaxScript),waline_create(),originTitle=document.title,resizeHandle(),menuActive(),sideBarTab(),sidebarTOC(),registerExtURL(),postBeauty(),tabFormat(),Loader.hide(),setTimeout((function(){positionInit()}),500),cardActive(),lazyload.observe()},siteInit=function(){domInit(),pjax=new Pjax({selectors:["head title",".languages",".pjax","script[data-config]"],analytics:!1,cacheBust:!1}),CONFIG.quicklink.ignores=LOCAL.ignores,quicklink.listen(CONFIG.quicklink),visibilityListener(),themeColorListener(),algoliaSearch(pjax),siteRefresh(1),window.addEventListener("scroll",scrollHandle),window.addEventListener("resize",resizeHandle),window.addEventListener("pjax:send",pjaxReload),window.addEventListener("pjax:success",siteRefresh),window.addEventListener("beforeunload",(function(){pagePosition()}))};window.addEventListener("DOMContentLoaded",siteInit);